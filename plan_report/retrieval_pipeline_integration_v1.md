# (ì§€í›„) ë¦¬íŠ¸ë¦¬ë²Œ íŒŒì´í”„ë¼ì¸ ê¸°ìˆ  ë¬¸ì„œ v1.0  â€” ë£¨ë¸Œë¦­(ìˆ˜ì—°) íŒŒì´í”„ë¼ì¸ê³¼ ê²°í•©í˜•
> ëª©ì : **ì´ë¯¸ êµ¬í˜„ëœ ì‹œìŠ¤í…œ**ì— â€œì—…ë¡œë“œ ìë£Œ ë‚´ë¶€ ê²€ìƒ‰(Retrieval)â€ì„ **ë£¨ë¸Œë¦­/í…œí”Œë¦¿ ê¸°ë°˜ í‰ê°€Â·íŒ¨ì¹˜ ì—”ì§„**ê³¼ ì‹œë„ˆì§€ ë‚˜ê²Œ ë¶™ì¸ë‹¤.  
> í•µì‹¬: **Rule/Example/Pattern ì¸ë±ìŠ¤ + BM25 + LLM Query Builder + Pin/Unpin + Citation Gate**  
> ë²”ìœ„: ì—…ë¡œë“œ ìë£Œ(ìŠ¤í¬ë¦½íŠ¸/ê°•ì˜) â†’ ì¸ë±ì‹± â†’ ê²€ìƒ‰ â†’ ê·¼ê±°íŒ©(Criteria Pack) â†’ Judge/Coachë¡œ ì „ë‹¬

---

## 0) ì°¸ì„ì/ì—­í• 
### ğŸ‘¤ ë¦¬íŠ¸ë¦¬ë²Œ(ê²€ìƒ‰/IR) ì „ë¬¸ê°€: ì§€í›„
- **ì£¼íŠ¹ê¸°:** BM25(í‚¤ì›Œë“œ ê²€ìƒ‰) ì¸ë±ìŠ¤ ì„¤ê³„/íŠœë‹, ì—…ë¡œë“œ ë¬¸ì„œ ë‚´ë¶€ ê²€ìƒ‰, Rule/Example ë¶„ë¦¬, íŒ¨í„´ ì¤‘ì‹¬ ì¸ë±ìŠ¤, ì¿¼ë¦¬ ìƒì„± í…œí”Œë¦¿, Hard Negative ê¸°ë°˜ ê°œì„ 
- **ì±…ì„:** â€œë£¨ë¸Œë¦­ì´ ìš”êµ¬í•˜ëŠ” ê·¼ê±°ë¥¼ *ì •í™•í•˜ê³  ì¬í˜„ ê°€ëŠ¥*í•˜ê²Œ íšŒìˆ˜â€í•˜ì—¬ í‰ê°€/ì¡°ì–¸ ì‹ ë¢°ë¥¼ ê³ ì •

---

## 1) (ìˆ˜ì—°) ë£¨ë¸Œë¦­ íŒŒì´í”„ë¼ì¸ í•µì‹¬ ë°œì·Œ(ë¦¬íŠ¸ë¦¬ë²Œì— ì˜í–¥ì„ ì£¼ëŠ” ë¶€ë¶„)
> ì•„ë˜ í•­ëª©ì€ ë¦¬íŠ¸ë¦¬ë²Œ ì„¤ê³„ ì‹œ **ë°˜ë“œì‹œ ë§ì¶°ì•¼ í•˜ëŠ” ê³„ì•½(Contract)** ì´ë‹¤.

1) **ë£¨ë¸Œë¦­ì€ â€˜í‰ê°€ ê°€ëŠ¥í•œ ê¸°ì¤€â€™ì´ì–´ì•¼ í•œë‹¤**
   - pass/failì´ â€œê´€ì°° ê°€ëŠ¥í•œ ë¬¸ì¥â€ìœ¼ë¡œ ì‘ì„±ë˜ì–´ì•¼ í•¨(ëª¨í˜¸ì–´ ê¸ˆì§€)

2) **ì‚¬ëŒ ê²€ìˆ˜(Human Review)ì˜ ì˜ë¯¸**
   - ì‚¬ëŒì´ ë£¨ë¸Œë¦­ì„ ìƒˆë¡œ ì“°ëŠ” ê²Œ ì•„ë‹ˆë¼,
   - **(a) ê·¼ê±° ì¸ìš©ì´ ì›ë¬¸ì— ì‹¤ì œ ì¡´ì¬í•˜ëŠ”ì§€**, **(b) ë¬¸ë§¥ì´ ì˜ë„ì™€ ì¼ì¹˜í•˜ëŠ”ì§€**, **(c) ê¸°ì¤€/ì˜ˆì‹œ ì •í•©ì„±**ì„ ë¹ ë¥´ê²Œ ìŠ¹ì¸/ë°˜ë ¤í•˜ëŠ” *í’ˆì§ˆ ê²Œì´íŠ¸*

3) **Citation GateëŠ” P0ë¶€í„° í•„ìˆ˜**
   - `evidence.quote`ê°€ ì‹¤ì œë¡œ ì›ë¬¸ ì²­í¬ì— ì¡´ì¬í•´ì•¼ í•˜ë©°, ì—†ìœ¼ë©´ ìŠ¹ê²©/ì‚¬ìš© ê¸ˆì§€

âœ… ê²°ë¡ : ë¦¬íŠ¸ë¦¬ë²Œì€ â€œê·¼ê±°ê°€ ì•ˆì •ì ìœ¼ë¡œ ë‚˜ì˜¤ë„ë¡â€ ì„¤ê³„ë˜ì–´ì•¼ í•˜ë©°, **ê·¼ê±°ê°€ ë¹ˆì•½í•˜ë©´ â€˜íŒì • ë³´ë¥˜â€™**ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.

---

## 2) ë¦¬íŠ¸ë¦¬ë²Œì´ í•´ê²°í•´ì•¼ í•˜ëŠ” ë¬¸ì œ ì •ì˜(ë‹¹ì‹  ì„œë¹„ìŠ¤ì— íŠ¹í™”)
ë‹¹ì‹  ì„œë¹„ìŠ¤ëŠ” â€œì£¼ì œâ€ê°€ ì•„ë‹ˆë¼ **íŒ¨í„´/ì¥ì (êµ¬ì¡°Â·ì–´íˆ¬Â·ì„¤ë“ ë©”ì»¤ë‹ˆì¦˜)** ì„ ì´ì‹í•œë‹¤.  
ë”°ë¼ì„œ ê²€ìƒ‰ì˜ ëª©í‘œëŠ” 2ê°€ì§€ë¡œ ë¶„ë¦¬ëœë‹¤.

1) **Rule Retrieval**: í•´ë‹¹ ë£¨ë¸Œë¦­ ê¸°ì¤€ì˜ â€œì›ì¹™/ì •ì˜/ê·œì¹™ ê·¼ê±°â€ íšŒìˆ˜  
2) **Example Retrieval**: í•´ë‹¹ ë£¨ë¸Œë¦­ ê¸°ì¤€ì˜ â€œdo/donâ€™t ì˜ˆì‹œâ€ íšŒìˆ˜  
(ê¶Œì¥ ì¶”ê°€) 3) **Pattern Retrieval**: â€˜í›…/ë°˜ë°•ì²˜ë¦¬/CTA/ë¹„ìœ /ëŒ€ë¹„â€™ ê°™ì€ **íŒ¨í„´ ë¼ë²¨ì´ ë¶™ì€ ì²­í¬** íšŒìˆ˜

âœ… ê²°ë¡ : ì¸ë±ìŠ¤ë„ 2~3ê°œë¡œ ë¶„ë¦¬í•˜ëŠ” ê²Œ ê°€ì¥ ì•ˆì •ì ì´ë‹¤.

---

## 3) ì‹œìŠ¤í…œ êµ¬ì„±(ìµœì†Œ ìš”êµ¬ ì»´í¬ë„ŒíŠ¸)
1) **DocumentStore**: ì—…ë¡œë“œ ë¬¸ì„œ/ì²­í¬/ë©”íƒ€ ì €ì¥
2) **Chunker**: ì„¹ì…˜/ìŠ¬ë¼ì´ë“œ/ë¬¸ë‹¨ ê¸°ì¤€ ì²­í¬ ë¶„ë¦¬ + overlap
3) **Indexer(BM25)**: Rule/Example/(Pattern) ì¸ë±ìŠ¤ êµ¬ì¶•
4) **Retriever API**: Top-K ê²€ìƒ‰ ì œê³µ
5) **LLM Query Builder**: ë£¨ë¸Œë¦­ í•­ëª©ë³„ ê²€ìƒ‰ ì§ˆì˜ ìƒì„±(í…œí”Œë¦¿ ê³ ì •)
6) **Citation Verifier**: ì¸ìš© ë¬¸ìì—´ì´ ì›ë¬¸ ì²­í¬ì— ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì‚¬
7) **Pin/Unpin UI**: ê·¼ê±° í›„ë³´ë¥¼ ì‚¬ìš©ì/ë¦¬ë·°ì–´ê°€ ê³ ì •(ì„ íƒ)

---

## 4) ë°ì´í„° ëª¨ë¸(ìŠ¤í‚¤ë§ˆ) â€” ë°”ë¡œ êµ¬í˜„ìš©
### 4.1 Chunk(ê³µí†µ)
```json
{
  "chunk_id": "c_000123",
  "doc_id": "d_0009",
  "namespace_id": "ns_mindbodylab",
  "version": 3,
  "section_title": "ë„ì…ë¶€ í›…",
  "text": "â€¦ì›ë¬¸ ì²­í¬â€¦",
  "source": { "page": 12, "offset": 0 },
  "tags": { "pattern": ["hook","contrast"], "speaker": "instructor" }
}
```

### 4.2 RuleDoc (Rule Indexì— ë“¤ì–´ê°€ëŠ” ë¬¸ì„œ ë‹¨ìœ„)
```json
{
  "rule_doc_id": "r_045",
  "namespace_id": "ns_mindbodylab",
  "criteria_id": "R01",
  "pattern_type": "structure",
  "rule_text": "ë„ì…ë¶€ ì²« 2ë¬¸ì¥ ì•ˆì— ë…ì ì´ìµì„ ëª…ì‹œí•œë‹¤.",
  "keywords": ["ë„ì…", "ì²«ë¬¸ì¥", "ë…ì", "ì´ìµ"],
  "source_chunk_id": "c_000123",
  "version": 3
}
```

### 4.3 ExampleDoc (Example Index)
```json
{
  "example_doc_id": "e_210",
  "namespace_id": "ns_mindbodylab",
  "criteria_id": "R01",
  "label": "do|dont",
  "example_text": "ì§€ê¸ˆë¶€í„° 3ë¶„ì´ë©´, ê³ ê°ì´ ì™œ ë§ì„¤ì´ëŠ”ì§€ í•œ ë²ˆì— ì •ë¦¬ë©ë‹ˆë‹¤.",
  "source_chunk_id": "c_000124",
  "version": 3
}
```

### 4.4 PatternDoc (ê¶Œì¥: Pattern Index)
```json
{
  "pattern_doc_id": "p_090",
  "namespace_id": "ns_mindbodylab",
  "pattern": "hook|cta|rebuttal|analogy|contrast|story",
  "pattern_type": "structure|persuasion|tone|rhythm",
  "text": "â€¦íŒ¨í„´ì´ ê°•í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” ì²­í¬â€¦",
  "source_chunk_id": "c_000123",
  "version": 3
}
```

---

## 5) ì¸ë±ì‹± íŒŒì´í”„ë¼ì¸(ì—…ë¡œë“œ í›„ 1íšŒ/ì—…ë°ì´íŠ¸ ë•Œ)
### 5.1 ë‹¨ê³„
1) **Ingest**: ì—…ë¡œë“œ ë¬¸ì„œ ì €ì¥ â†’ doc_id ë¶€ì—¬
2) **Chunk**: ì„¹ì…˜/ë¬¸ë‹¨ ë‹¨ìœ„ ë¶„í•  + overlap + chunk_id
3) **(ì„ íƒ) Classify**: ì²­í¬ë¥¼ rule/example/pattern í›„ë³´ë¡œ ë¼ë²¨ë§(LLM ë˜ëŠ” ê·œì¹™ ê¸°ë°˜)
4) **Index Build**
   - Rule Index: ê·œì¹™/ì •ì˜/ì›ì¹™ ì¤‘ì‹¬
   - Example Index: do/donâ€™t ì˜ˆì‹œ ì¤‘ì‹¬
   - Pattern Index(ê¶Œì¥): í›…/CTA/ë°˜ë°• ë“± íŒ¨í„´ ë¼ë²¨ ì¤‘ì‹¬

### 5.2 ì²­í¬ ê¶Œì¥ ê°€ì´ë“œ(ì‹¤ë¬´)
- ë„ˆë¬´ ì§§ìœ¼ë©´ ì˜ë¯¸ê°€ ëŠê¹€(ê·¼ê±° ë¹ˆì•½)
- ë„ˆë¬´ ê¸¸ë©´ ê²€ìƒ‰ì´ íë ¤ì§(ì •ë°€ë„ í•˜ë½)
- ê¶Œì¥: â€œë¬¸ë‹¨/ìŠ¬ë¼ì´ë“œâ€ ë‹¨ìœ„ + 10~20% overlap

---

## 6) ê²€ìƒ‰(ë¦¬íŠ¸ë¦¬ë²Œ) íŒŒì´í”„ë¼ì¸(í‰ê°€ ìš”ì²­ ë•Œ ë§¤ë²ˆ ì‹¤í–‰)
> í•µì‹¬ êµ¬ì¡°: **LLM(Query Builder) â†’ BM25(Retriever) â†’ (Pin) â†’ Citation Verify â†’ Criteria Pack**

### 6.1 ì…ë ¥
- `namespace_id`
- `template_set_version`
- `criteria_id`(ë˜ëŠ” criteria ëª©ë¡)
- ì‚¬ìš©ì ê¸€: `user_text`(ë¬¸ì¥/ë¬¸ë‹¨/ì „ì²´)
- (ì˜µì…˜) ì‚¬ìš©ì ê³ ì •ê·¼ê±°: `pinned_chunk_ids[]`

### 6.2 ì¶œë ¥
- `criteria_pack` (Judge/Coachë¡œ ë„˜ê¸¸ â€œê·¼ê±°íŒ©â€)

---

## 7) Criteria Pack ìŠ¤í‚¤ë§ˆ(ë£¨ë¸Œë¦­ê³¼ ê²°í•©ì˜ í•µì‹¬)
> ë£¨ë¸Œë¦­ì´ â€œê¸°ì¤€â€ì´ë¼ë©´, Criteria Packì€ â€œì¦ê±°/ê·¼ê±° ë°ì´í„°â€ë‹¤.  
> JudgeëŠ” **Criteria Pack ì•ˆì˜ ê·¼ê±°ë§Œ ë³´ê³ ** íŒì •í•´ì•¼ ì¬í˜„ì„±ì´ ìƒê¸´ë‹¤.

```json
{
  "namespace_id": "ns_mindbodylab",
  "template_set_version": "v1",
  "criteria_id": "R01",
  "pattern_type": "structure",
  "query": {
    "rule_query": "ë„ì… ì²« 2ë¬¸ì¥ ë…ì ì´ìµ ëª…ì‹œ ê·œì¹™",
    "example_query": "ë…ì ì´ìµ ì œì‹œ í›… do ì˜ˆì‹œ",
    "pattern_query": "hook ë…ì ì´ìµ ì‹œì‘ ë¬¸ì¥ íŒ¨í„´"
  },
  "retrieved": {
    "rules": [
      { "chunk_id": "c_000123", "score": 12.4, "quote": "â€¦", "source": { "page": 12 } }
    ],
    "examples": [
      { "chunk_id": "c_000124", "score": 10.1, "label": "do", "quote": "â€¦", "source": { "page": 13 } }
    ],
    "patterns": [
      { "chunk_id": "c_000125", "score": 9.2, "pattern": "hook", "quote": "â€¦", "source": { "page": 14 } }
    ]
  },
  "pins": {
    "pinned_chunk_ids": ["c_000124"],
    "pinned_by": "user|reviewer|system"
  },
  "gates": {
    "citation_verified": true,
    "retrieval_sufficient": true
  }
}
```

---

## 8) LLM Query Builder(ì§ˆì˜ í…œí”Œë¦¿ ê³ ì •) â€” ë°˜ë“œì‹œ í•„ìš”í•œ ì´ìœ 
### 8.1 ì™œ LLMì´ ì§ˆì˜ë¥¼ ë§Œë“¤ê²Œ í•˜ë‚˜?
- ë£¨ë¸Œë¦­ í•­ëª©ë§ˆë‹¤ â€œì°¾ì•„ì•¼ í•  ê·¼ê±°â€ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸
- ì‚¬ëŒ ê²€ìˆ˜ ë¶€ë‹´ì„ ì¤„ì´ê¸° ìœ„í•´ `query_hints`ë¥¼ ìë™ ìƒì„±/ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•¨

### 8.2 í•˜ì§€ë§Œ â€˜ì§ˆì˜ í”ë“¤ë¦¼â€™ì„ ë§‰ì•„ì•¼ í•œë‹¤(ì¤‘ìš”)
- LLMì´ ë§¤ë²ˆ ë‹¤ë¥¸ ë§ë¡œ ì§ˆì˜ë¥¼ ë§Œë“¤ë©´ ê²°ê³¼ê°€ íŠ„ë‹¤.
- ë”°ë¼ì„œ **ì§ˆì˜ í”„ë¡¬í”„íŠ¸ë¥¼ í…œí”Œë¦¿í™”**í•˜ê³ , ì…ë ¥ì„ ê³ ì •í•œë‹¤.

### 8.3 Query Builder ì…ë ¥(ê¶Œì¥)
- `criteria_id`, `name`, `definition`, `pass_conditions`, `query_hints`, `pattern_type`

### 8.4 Query Builder ì¶œë ¥(ê¶Œì¥)
- `rule_query`, `example_query`, `pattern_query` 3ê°œ
- ê° ì¿¼ë¦¬ëŠ” 5~12ë‹¨ì–´ ë‚´ì™¸(ê¸¸ë©´ BM25ê°€ íë ¤ì§)

---

## 9) ê²Œì´íŠ¸(í•„ìˆ˜) â€” ë£¨ë¸Œë¦­ì˜ â€œì‚¬ëŒ ê²€ìˆ˜â€ì™€ ì§ê²°
### 9.1 Citation Gate(í•„ìˆ˜)
- retrieved ê²°ê³¼ì—ì„œ `quote`ëŠ” ë°˜ë“œì‹œ `chunk.text`ì— ë¶€ë¶„ ë¬¸ìì—´ë¡œ ì¡´ì¬í•´ì•¼ í•¨
- ì‹¤íŒ¨ ì‹œ: `citation_verified=false` â†’ Judgeì— â€œê·¼ê±° ë¶€ì¡±â€ìœ¼ë¡œ ì „ë‹¬(íŒì • ë³´ë¥˜)

### 9.2 Retrieval Sufficiency Gate(ê¶Œì¥ P0)
- Top-K ì¤‘ â€œì˜ë¯¸ ìˆëŠ” ê·¼ê±°â€ê°€ ìµœì†Œ 1ê°œ ì´ìƒì´ë©´ true
- ì—†ìœ¼ë©´: â€œê·¼ê±° ë¶€ì¡±â€ìœ¼ë¡œ ì¢…ë£Œ ë˜ëŠ” Pattern Indexë¡œ ì¬ì‹œë„

---

## 10) Pin/Unpin(ê¶Œì¥ P1) â€” ì œí’ˆ ì‹ ë¢°ë„ ë ˆë²„
### ì˜ë¯¸
- ì‹œìŠ¤í…œì´ ê°€ì ¸ì˜¨ ê·¼ê±° í›„ë³´ ì¤‘, ì‚¬ìš©ìê°€ â€œì´ ê·¼ê±°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í‰ê°€í•´ì¤˜â€ë¥¼ ì„ íƒ/ê³ ì •
- ê²°ê³¼ê°€ í”ë“¤ë¦¬ê±°ë‚˜ ë…¼ìŸì´ ìƒê²¼ì„ ë•Œ â€œì‚¬ìš©ì í†µì œê¶Œâ€ ì œê³µ

### UI ìš”êµ¬(ìµœì†Œ)
- í›„ë³´ ê·¼ê±° ì¹´ë“œ(ì²­í¬ ë¯¸ë¦¬ë³´ê¸° + í˜ì´ì§€/ì„¹ì…˜)
- [í•€] ë²„íŠ¼
- í•€ëœ ê·¼ê±°ëŠ” Criteria Packì— ìš°ì„  í¬í•¨

---

## 11) API/ì¡(ì¶”ì²œ ìŠ¤í™) â€” ë£¨ë¸Œë¦­ ë¬¸ì„œì™€ ë§ë¬¼ë¦¬ë„ë¡
### 11.1 ì¸ë±ì‹± ì¡
- `POST /retrieval/{namespace_id}/index:build`
```json
{ "doc_ids": ["d_0009"], "mode": "RULE_EXAMPLE_PATTERN", "version": 3 }
```

### 11.2 ë¦¬íŠ¸ë¦¬ë²Œ(ê·œì¹™/ì˜ˆì‹œ/íŒ¨í„´)
- `POST /retrieval/{namespace_id}/retrieve`
```json
{
  "template_set_version": "v1",
  "criteria_id": "R01",
  "top_k": { "rules": 5, "examples": 5, "patterns": 5 },
  "query_source": "template_query_hints|llm_query_builder",
  "pinned_chunk_ids": ["c_000124"]
}
```
ì‘ë‹µ
```json
{ "criteria_pack_id": "cp_20260103_001", "criteria_pack": { "...": "..." } }
```

### 11.3 ê²€ì¦
- `POST /retrieval/{namespace_id}/criteria-packs/{id}:verify`
```json
{ "verify": ["citation", "sufficiency"] }
```

---

## 12) ë£¨ë¸Œë¦­ íŒŒì´í”„ë¼ì¸ê³¼ì˜ ê²°í•© í¬ì¸íŠ¸(ì‹œë„ˆì§€ ì„¤ê³„)
### 12.1 Template â†’ Retrieval ì—°ê²°(ê°€ì¥ ì¤‘ìš”)
ë£¨ë¸Œë¦­ í…œí”Œë¦¿(ìˆ˜ì—°)ì—ì„œ ë‹¤ìŒ í•„ë“œëŠ” ë¦¬íŠ¸ë¦¬ë²Œ í’ˆì§ˆì„ í¬ê²Œ ì˜¬ë¦°ë‹¤.
- `criteria_id`, `pattern_type`
- `query_hints`(í›„ë³´ ìƒì„± ë‹¨ê³„ì—ì„œ ì €ì¥)
- `evidence[]`(ëŒ€í‘œ ê·¼ê±°) â†’ ì´ˆê¸° í•€ì˜ í›„ë³´ë¡œ ì‚¬ìš© ê°€ëŠ¥

### 12.2 ì‚¬ëŒ ê²€ìˆ˜ ê²°ê³¼ë¥¼ Retrieval ê°œì„  ë°ì´í„°ë¡œ ì¬ì‚¬ìš©
- ë°˜ë ¤ ì‚¬ìœ :
  - â€œì¸ìš©ì€ ë§ëŠ”ë° ë¬¸ë§¥ì´ ë‹¤ë¦„â€ â†’ Hard Negativeë¡œ ì €ì¥
  - â€œê·¼ê±°ê°€ ì•½í•¨/ì—†ìŒâ€ â†’ Query Builder í…œí”Œë¦¿ ìˆ˜ì • ë˜ëŠ” Pattern Index ë³´ê°•

âœ… ê²°ë¡ : ë£¨ë¸Œë¦­ ê²€ìˆ˜ ë¡œê·¸ëŠ” ê³§ â€œê²€ìƒ‰ íŠœë‹ ë°ì´í„°â€ë‹¤.

---

## 13) ìš´ì˜/í’ˆì§ˆ(ìµœê³  ì„±ëŠ¥ì„ ìœ„í•œ ê·œì¹™)
### P0(ë°”ë¡œ ì œí’ˆí™”)
- Rule/Example ì¸ë±ìŠ¤ ë¶„ë¦¬ + BM25
- Query Builder í…œí”Œë¦¿ ê³ ì •
- Citation Gate + Sufficiency Gate

### P1(ì‹ ë¢°ë„ ê°•í™”)
- Pin/Unpin UI
- Pattern Index ì¶”ê°€
- Hard Negative ì €ì¥ ì‹œì‘

### P2(ì •ë°€ë„ ê°•í™”)
- í•„ìš” ì‹œ í•˜ì´ë¸Œë¦¬ë“œ(ë²¡í„°+BM25) ë˜ëŠ” ë¦¬ë­ì»¤ ë„ì…
- ë‹¨, ê²°ê³¼ íŠ ë°©ì§€ë¥¼ ìœ„í•´ íšŒê·€ í…ŒìŠ¤íŠ¸(ê³¨ë“œì…‹) í•„ìˆ˜

---

## 14) Feature Flags(ë¦¬íŠ¸ë¦¬ë²Œ íŒŒì´í”„ë¼ì¸ìš©)
- `FF_RETRIEVE_RULE_INDEX` (ê¸°ë³¸ ON)
- `FF_RETRIEVE_EXAMPLE_INDEX` (ê¸°ë³¸ ON)
- `FF_RETRIEVE_PATTERN_INDEX` (ê¶Œì¥ P1 ON)
- `FF_LLM_QUERY_BUILDER` (ê¸°ë³¸ ON)
- `FF_PIN_UNPIN` (ê¶Œì¥ P1 ON)
- `FF_CITATION_GATE` (ê¸°ë³¸ ON)
- `FF_SUFFICIENCY_GATE` (ê¸°ë³¸ ON)

---

## 15) êµ¬í˜„ ìš°ì„ ìˆœìœ„(ë‹¹ì¥ ì ìš©ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸)
### P0 (ìµœì†Œ ì™„ì„±)
1) ì²­í‚¹ + ë©”íƒ€ë°ì´í„°(ì„¹ì…˜/í˜ì´ì§€/ë²„ì „/ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
2) Rule/Example ì¸ë±ìŠ¤ êµ¬ì¶• + ê²€ìƒ‰ API
3) Query Builder(í…œí”Œë¦¿ ê³ ì •) + Criteria Pack ìƒì„±
4) Citation Gate + Sufficiency Gate

### P1 (ì²´ê°/ì‹ ë¢° ìƒìŠ¹)
1) Pin/Unpin UI
2) Pattern Index + íŒ¨í„´ íƒœê¹…
3) Hard Negative ì €ì¥(ê²€ìˆ˜/ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜)

---

## ë¶€ë¡ A) â€œë£¨ë¸Œë¦­+ë¦¬íŠ¸ë¦¬ë²Œâ€ í•©ì³ì„œ ì—”ì§„ì´ ìµœê³  ì„±ëŠ¥ì´ ë˜ëŠ” ì´ìœ (í•œ ë¬¸ì¥)
- ë£¨ë¸Œë¦­ì´ **í‰ê°€ ê¸°ì¤€ì„ ê³ ì •**í•˜ê³ ,
- ë¦¬íŠ¸ë¦¬ë²Œì´ **ê·¼ê±°ë¥¼ ê³ ì •**í•˜ë©°,
- ê²Œì´íŠ¸/ê²€ìˆ˜ê°€ **í™˜ê°ê³¼ í”ë“¤ë¦¼ì„ ì°¨ë‹¨**í•´ì„œ,
ê²°ê³¼ê°€ â€œê·¸ëŸ´ë“¯í•œ ë‹µë³€â€ì´ ì•„ë‹ˆë¼ **ì¬í˜„ ê°€ëŠ¥í•œ ì œí’ˆ í’ˆì§ˆ**ì´ ëœë‹¤.

---

### ë‹¤ìŒ ì•¡ì…˜(ì§€í›„ ì œì•ˆ)
1) í˜„ì¬ ì‹œìŠ¤í…œì—ì„œ **ì²­í‚¹/ê²€ìƒ‰**ì´ ì–´ë””ê¹Œì§€ êµ¬í˜„ëëŠ”ì§€ ê¸°ì¤€ìœ¼ë¡œ  
2) ë³¸ ë¬¸ì„œ P0 ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ë§¤í•‘í•˜ë©´  
3) â€œë£¨ë¸Œë¦­ í…œí”Œë¦¿(v1) 10ê°œ + ë¦¬íŠ¸ë¦¬ë²Œ(P0) + Citation Gateâ€ê¹Œì§€ ê°€ì¥ ë¹ ë¥´ê²Œ ë¶™ì¼ ìˆ˜ ìˆë‹¤.
