# PRISM Writer RAG 시스템 개선 로드맵

> **문서 작성일**: 2026-01-04  
> **목적**: 전문가 평가에서 도출된 약점 분석 및 우선순위별 개선 계획

---

## 📊 현재 시스템 평가 요약

| 평가 영역       | 점수       | 담당 전문가              |
| --------------- | ---------- | ------------------------ |
| 백엔드 아키텍처 | 6.5/10     | 시니어 백엔드 개발자     |
| 프론트엔드 UX   | 6.5/10     | 주니어 프론트엔드 개발자 |
| UI 디자인       | 6.0/10     | UX/UI 전문가             |
| 인프라/운영     | 5.0/10     | DevOps 엔지니어          |
| AI/RAG 알고리즘 | 7.0/10     | AI/ML 엔지니어           |
| **종합 평균**   | **6.2/10** | -                        |

---

## 🔍 각 전문가별 약점 및 개선 방안

### 1️⃣ 시니어 백엔드 개발자 (기술 리더)

#### 지적된 약점

| #    | 약점                    | 현재 상태                     | 영향도 |
| ---- | ----------------------- | ----------------------------- | ------ |
| B-01 | 청크 캐싱 없음          | 매 요청마다 임베딩 생성       | 높음   |
| B-02 | 배치 처리 부재          | 대량 문서 업로드 시 성능 저하 | 중간   |
| B-03 | 모니터링/메트릭 미흡    | 오류 추적 어려움              | 중간   |
| B-04 | Rate Limiting 기본 수준 | API 남용 가능                 | 낮음   |

#### 개선 방안

**B-01: 임베딩 캐시 레이어 추가**

```
구현 방법:
1. Supabase 테이블에 embedding_cache 추가
2. 쿼리 해시 → 임베딩 매핑 저장
3. TTL(Time-To-Live) 24시간 설정
4. 캐시 히트율 모니터링

예상 작업량: 중간 (1-2일)
필요 기술: Supabase, TypeScript
```

**B-02: 대량 문서 배치 처리**

```
구현 방법:
1. 업로드 큐 시스템 구현 (Bull Queue 또는 Supabase Edge Functions)
2. 청크 단위 병렬 처리 (Promise.allSettled)
3. 진행률 표시 UI 추가
4. 실패 청크 재시도 로직

예상 작업량: 높음 (3-5일)
필요 기술: Queue 시스템, Worker 패턴
```

**B-03: 간단한 로깅/모니터링 추가**

```
구현 방법:
1. console.error 대신 구조화된 로깅
2. Supabase에 rag_logs 테이블 추가
3. 검색 성능 메트릭 기록 (latency, hit_rate)
4. 간단한 대시보드 페이지

예상 작업량: 낮음 (0.5-1일)
필요 기술: TypeScript, Supabase
```

**B-04: API Rate Limiting 강화**

```
구현 방법:
1. Next.js middleware에서 IP 기반 제한
2. 사용자별 요청 카운터 (Redis 또는 메모리)
3. 429 Too Many Requests 응답 처리

예상 작업량: 낮음 (0.5일)
필요 기술: Next.js Middleware
```

---

### 2️⃣ 주니어 프론트엔드 개발자

#### 지적된 약점

| #    | 약점                        | 현재 상태             | 영향도 |
| ---- | --------------------------- | --------------------- | ------ |
| F-01 | 검색 결과 필터링 UI 부재    | 전체 결과만 표시      | 중간   |
| F-02 | 검색 히스토리 없음          | 이전 검색 재사용 불가 | 낮음   |
| F-03 | 자동완성/추천 검색어 미구현 | 사용자 가이드 부족    | 중간   |
| F-04 | 모바일 반응형 최적화 부족   | 모바일 UX 저하        | 중간   |

#### 개선 방안

**F-01: 검색 결과 필터 UI**

```
구현 방법:
1. 문서 타입 필터 (PDF, TXT, 노션 등)
2. 날짜 범위 필터
3. 최소 유사도 슬라이더
4. 필터 상태 URL 파라미터 동기화

예상 작업량: 중간 (1-2일)
필요 기술: React, URL State
```

**F-02: 검색 히스토리**

```
구현 방법:
1. localStorage에 최근 검색어 10개 저장
2. 검색창 포커스 시 드롭다운 표시
3. 히스토리 항목 삭제 기능

예상 작업량: 낮음 (0.5일)
필요 기술: React, localStorage
```

**F-03: 자동완성 검색어**

```
구현 방법:
1. 디바운스된 입력으로 API 호출
2. 기존 문서 청크에서 키워드 추출
3. 드롭다운 리스트로 추천어 표시

예상 작업량: 중간 (1-2일)
필요 기술: React, API 확장
```

**F-04: 모바일 반응형 개선**

```
구현 방법:
1. Tailwind breakpoint 적용 (sm, md, lg)
2. 탭 UI 스와이프 제스처
3. 검색 결과 카드 축소 뷰
4. 터치 타겟 44px 이상 보장

예상 작업량: 중간 (1-2일)
필요 기술: Tailwind CSS, 반응형 디자인
```

---

### 3️⃣ UX/UI 디자인 전문가

#### 지적된 약점

| #    | 약점                             | 현재 상태             | 영향도 |
| ---- | -------------------------------- | --------------------- | ------ |
| U-01 | 빈 상태(Empty State) 디자인 미흡 | 기본 텍스트만 표시    | 중간   |
| U-02 | 로딩 스켈레톤 부재               | 로딩 시 빈 화면       | 중간   |
| U-03 | 검색 결과 페이지네이션 없음      | 전체 결과 한번에 표시 | 낮음   |
| U-04 | 접근성(a11y) 부분적 구현         | ARIA 일부만 적용      | 중간   |

#### 개선 방안

**U-01: Empty State 디자인 개선**

```
구현 방법:
1. 일러스트레이션 추가 (SVG)
2. 상황별 안내 메시지
3. 다음 행동 CTA 버튼
4. 도움말 링크 포함

예상 작업량: 낮음 (0.5일)
필요 기술: React, SVG, Tailwind
```

**U-02: 로딩 스켈레톤 추가**

```
구현 방법:
1. 검색 결과 카드 스켈레톤
2. 탭 콘텐츠 스켈레톤
3. 애니메이션 pulse 효과

예상 작업량: 낮음 (0.5일)
필요 기술: Tailwind animate-pulse
```

**U-03: 무한 스크롤/페이지네이션**

```
구현 방법:
1. Intersection Observer로 무한 스크롤
2. 또는 "더 보기" 버튼
3. 결과 카운터 표시

예상 작업량: 낮음 (0.5-1일)
필요 기술: React, Intersection Observer
```

**U-04: 접근성 강화**

```
구현 방법:
1. 모든 인터랙티브 요소에 ARIA 라벨
2. 키보드 네비게이션 완성
3. 스크린 리더 테스트
4. 색상 대비 검증 (WCAG AA)

예상 작업량: 중간 (1-2일)
필요 기술: ARIA, 접근성 테스트
```

---

### 4️⃣ DevOps/인프라 엔지니어

#### 지적된 약점

| #    | 약점                       | 현재 상태             | 영향도 |
| ---- | -------------------------- | --------------------- | ------ |
| D-01 | APM 없음                   | 성능 병목 파악 불가   | 높음   |
| D-02 | 로깅 집중화 없음           | 분산된 console.log    | 중간   |
| D-03 | 임베딩 캐시 레이어 없음    | 반복 연산 발생        | 높음   |
| D-04 | 벡터 DB 인덱스 최적화 제한 | 대량 데이터 시 느림   | 중간   |
| D-05 | CDN 캐싱 전략 미흡         | 정적 자산 최적화 부족 | 낮음   |

#### 개선 방안

**D-01: 간단한 APM 도입**

```
구현 방법:
1. Vercel Analytics 활성화 (무료)
2. 또는 Sentry 무료 티어 연동
3. API 응답 시간 로깅

예상 작업량: 낮음 (0.5일)
필요 기술: Vercel, Sentry
```

**D-02: 구조화된 로깅**

```
구현 방법:
1. 로깅 유틸리티 함수 생성
2. JSON 포맷 로그 출력
3. 로그 레벨 (info, warn, error)
4. 요청 ID 추적

예상 작업량: 낮음 (0.5일)
필요 기술: TypeScript
```

**D-03: 임베딩 캐시 (B-01과 동일)**

```
→ 백엔드 B-01 참조
```

**D-04: 벡터 인덱스 최적화**

```
구현 방법:
1. pgvector 인덱스 튜닝 (HNSW vs IVFFlat)
2. 적절한 ef_construction, m 파라미터
3. 주기적 VACUUM ANALYZE

예상 작업량: 낮음 (0.5일)
필요 기술: PostgreSQL, pgvector
```

**D-05: CDN 최적화**

```
구현 방법:
1. Vercel Edge 캐싱 헤더 설정
2. 이미지 next/image 최적화 확인
3. 정적 자산 Cache-Control 설정

예상 작업량: 낮음 (0.5일)
필요 기술: Vercel, HTTP 캐싱
```

---

### 5️⃣ AI/ML 엔지니어

#### 지적된 약점

| #    | 약점                        | 현재 상태           | 영향도 |
| ---- | --------------------------- | ------------------- | ------ |
| A-01 | Query Expansion 미구현      | 단일 쿼리만 검색    | 중간   |
| A-02 | Contextual Compression 없음 | 긴 청크 그대로 사용 | 중간   |
| A-03 | Multi-hop Reasoning 미지원  | 단일 검색만 가능    | 낮음   |
| A-04 | Semantic Chunking 기본      | 고정 크기 청킹      | 중간   |

#### 개선 방안

**A-01: Query Expansion**

```
구현 방법:
1. LLM으로 쿼리 변형 생성 (3-5개)
2. 각 변형으로 검색 후 결과 병합
3. 중복 제거 및 리랭킹

예상 작업량: 중간 (1-2일)
필요 기술: LLM API, 검색 로직
```

**A-02: Contextual Compression**

```
구현 방법:
1. 검색된 청크를 LLM으로 요약
2. 질문 관련 부분만 추출
3. 토큰 수 절약 및 정확도 향상

예상 작업량: 중간 (1-2일)
필요 기술: LLM API
```

**A-03: Multi-hop Reasoning**

```
구현 방법:
1. 초기 검색 → 분석 → 추가 검색 루프
2. 체인 형태의 질문 분해
3. 중간 결과 축적

예상 작업량: 높음 (3-5일)
필요 기술: Agent 패턴, LLM
```

**A-04: Semantic Chunking 개선**

```
구현 방법:
1. 문장 경계 기반 분할
2. 의미 단위 감지 (단락, 섹션)
3. 오버랩 청킹 전략

예상 작업량: 중간 (1-2일)
필요 기술: NLP, 청킹 알고리즘
```

---

## 🗳️ 우선순위 투표 (구현 용이성 + 효과)

### 투표 기준

- **속도**: 얼마나 빨리 구현 가능한가? (높음 = 0.5일 이하)
- **효과**: 사용자/시스템에 얼마나 영향이 큰가?
- **위험**: 기존 시스템 영향도

### 최종 우선순위 목록

| 순위 | 항목 ID | 개선 항목                    | 예상 시간 | 효과 | 위험 |
| ---- | ------- | ---------------------------- | --------- | ---- | ---- |
| 🥇 1 | U-02    | 로딩 스켈레톤 추가           | 0.5일     | 중   | 낮음 |
| 🥇 1 | U-01    | Empty State 디자인           | 0.5일     | 중   | 낮음 |
| 🥈 2 | D-01    | Vercel Analytics 활성화      | 0.5일     | 중   | 낮음 |
| 🥈 2 | D-02    | 구조화된 로깅                | 0.5일     | 중   | 낮음 |
| 🥉 3 | F-02    | 검색 히스토리 (localStorage) | 0.5일     | 낮   | 낮음 |
| 4    | B-03    | 간단한 RAG 로깅              | 0.5-1일   | 중   | 낮음 |
| 5    | D-04    | 벡터 인덱스 튜닝             | 0.5일     | 중   | 낮음 |
| 6    | U-03    | 무한 스크롤/페이지네이션     | 0.5-1일   | 낮   | 낮음 |
| 7    | F-01    | 검색 필터 UI                 | 1-2일     | 중   | 낮음 |
| 8    | F-04    | 모바일 반응형                | 1-2일     | 중   | 낮음 |
| 9    | U-04    | 접근성 강화                  | 1-2일     | 중   | 낮음 |
| 10   | B-01    | 임베딩 캐시                  | 1-2일     | 높   | 중간 |
| 11   | A-01    | Query Expansion              | 1-2일     | 중   | 중간 |
| 12   | A-04    | Semantic Chunking            | 1-2일     | 중   | 중간 |
| 13   | F-03    | 자동완성 검색어              | 1-2일     | 중   | 낮음 |
| 14   | A-02    | Contextual Compression       | 1-2일     | 중   | 중간 |
| 15   | B-02    | 배치 처리 시스템             | 3-5일     | 높   | 중간 |
| 16   | A-03    | Multi-hop Reasoning          | 3-5일     | 중   | 높음 |

---

## 📋 권장 구현 Phase

### Phase A: Quick Wins (1-2일)

> 바로 적용 가능하고 효과가 큰 개선

- [ ] U-02: 로딩 스켈레톤
- [ ] U-01: Empty State 디자인
- [ ] D-01: Vercel Analytics
- [ ] D-02: 구조화된 로깅
- [ ] F-02: 검색 히스토리

### Phase B: UX 개선 (3-5일)

> 사용자 경험을 높이는 개선

- [ ] F-01: 검색 필터 UI
- [ ] F-04: 모바일 반응형
- [ ] U-03: 무한 스크롤
- [ ] U-04: 접근성 강화

### Phase C: 성능 최적화 (3-5일)

> 시스템 성능을 높이는 개선

- [ ] B-01: 임베딩 캐시
- [ ] D-04: 벡터 인덱스 튜닝
- [ ] B-03: RAG 메트릭 로깅

### Phase D: AI/RAG 고도화 (5-10일)

> 검색 품질을 높이는 개선

- [ ] A-01: Query Expansion
- [ ] A-04: Semantic Chunking
- [ ] A-02: Contextual Compression
- [ ] F-03: 자동완성 검색어

### Phase E: 엔터프라이즈 기능 (10일+)

> 대규모 운영을 위한 개선

- [ ] B-02: 배치 처리 시스템
- [ ] A-03: Multi-hop Reasoning

---

## 📊 예상 효과

| Phase 완료   | 예상 점수 변화 |
| ------------ | -------------- |
| 현재         | 6.2/10         |
| Phase A 완료 | 6.8/10 (+0.6)  |
| Phase B 완료 | 7.3/10 (+0.5)  |
| Phase C 완료 | 7.8/10 (+0.5)  |
| Phase D 완료 | 8.3/10 (+0.5)  |
| Phase E 완료 | 8.8/10 (+0.5)  |

---

## 🎯 결론

> **Phase A부터 순차적으로 진행하면 가장 효율적으로 시스템을 개선할 수 있습니다.**

1. **즉시 시작 권장**: U-02, U-01, D-01, D-02 (모두 0.5일 작업)
2. **이번 주 목표**: Phase A 전체 완료
3. **다음 주 목표**: Phase B, C 병행

**모든 전문가님께서 고생 많으셨습니다! 🎉**
