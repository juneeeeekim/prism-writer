# ğŸŸ  Phase 1: RAG ê¸°ë°˜ ê³„ì¸µ ì¬ì •ë¹„ ìƒì„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

> **ìƒì„±ì¼**: 2025-12-29 03:13  
> **ìƒìœ„ ë¬¸ì„œ**: [Architecture_Refactoring_Master_Plan.md](./2512290307_Architecture_Refactoring_Master_Plan.md)  
> **ì„ í–‰ ì¡°ê±´**: Phase 0 ì™„ë£Œ  
> **ëª©í‘œ**: RAG ì‹œìŠ¤í…œì„ "ë¶€ê°€ ê¸°ëŠ¥"ì—ì„œ "ê¸°ë°˜ ê³„ì¸µ"ìœ¼ë¡œ ì¬ë°°ì¹˜  
> **ì˜ˆìƒ ì†Œìš”**: 4~6ì‹œê°„

---

## ğŸ“Œ í˜„ì¬ ì•„í‚¤í…ì²˜ ë¶„ì„

### ë¬¸ì œì 

```
[í˜„ì¬] ê¸€ì“°ê¸° â†’ (ì˜µì…˜) RAG â†’ í‰ê°€
                    â†‘
              í›„ìˆœìœ„ë¡œ ì¶”ê°€ë¨
              ìŠ¤í‚¤ë§ˆê°€ ë¶ˆì•ˆì •
```

### ëª©í‘œ ì•„í‚¤í…ì²˜

```
[ëª©í‘œ] RAG ê¸°ë°˜ ê³„ì¸µ (ì•ˆì •ì  ìŠ¤í‚¤ë§ˆ)
           â†“
      ê¸€ì“°ê¸°/í‰ê°€/ì±„íŒ… ê¸°ëŠ¥
```

---

## ğŸ“‹ Phase 1.1: ë°ì´í„° ëª¨ë¸ ì •ë¦¬

### P1-01: `rag_chunks` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ìµœì¢… í™•ì •

**ëª©í‘œ**: í•„ìˆ˜ ì»¬ëŸ¼ ì •ë¦¬, ë¶ˆí•„ìš” ì»¬ëŸ¼ ì œê±°, ìŠ¤í‚¤ë§ˆ ë¬¸ì„œí™”

**í˜„ì¬ ìŠ¤í‚¤ë§ˆ ì¶”ì •** (ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ê¸°ë°˜):
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… | ìƒíƒœ |
|------|------|------|------|
| `id` | UUID | ê¸°ë³¸í‚¤ | âœ… í•„ìˆ˜ |
| `document_id` | UUID | user_documents FK | âœ… í•„ìˆ˜ |
| `content` | TEXT | ì²­í¬ ë‚´ìš© | âœ… í•„ìˆ˜ |
| `embedding` | VECTOR(1536) | ì„ë² ë”© ë²¡í„° | âœ… í•„ìˆ˜ |
| `metadata` | JSONB | ë©”íƒ€ë°ì´í„° | âœ… í•„ìˆ˜ |
| `chunk_index` | INT | ì²­í¬ ìˆœì„œ | âš ï¸ í™•ì¸ í•„ìš” |
| `category` | TEXT | ì¹´í…Œê³ ë¦¬ (ë¹„ì •ê·œí™”) | âš ï¸ ì •ë¦¬ í•„ìš” |
| `user_id` | UUID | ì‚¬ìš©ì ID (ë¹„ì •ê·œí™”) | âš ï¸ ì •ë¦¬ í•„ìš” |
| `created_at` | TIMESTAMPTZ | ìƒì„±ì¼ | âœ… í•„ìˆ˜ |

**ì‘ì—… ë‚´ìš©**:

```sql
-- 1. í˜„ì¬ ìŠ¤í‚¤ë§ˆ í™•ì¸ ì¿¼ë¦¬
SELECT column_name, data_type, is_nullable, column_default
FROM information_schema.columns
WHERE table_name = 'rag_chunks'
ORDER BY ordinal_position;

-- 2. ê²°ê³¼ë¥¼ ë¬¸ì„œí™”
```

**ì‚°ì¶œë¬¼**: ìŠ¤í‚¤ë§ˆ ë¬¸ì„œ (ì´ íŒŒì¼ í•˜ë‹¨ì— ê¸°ë¡)

**ë‹´ë‹¹**: DB ì—”ì§€ë‹ˆì–´  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-02: `user_documents` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ìµœì¢… í™•ì •

**ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ** (`033_user_documents.sql` ê¸°ì¤€):
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… | ìƒíƒœ |
|------|------|------|------|
| `id` | UUID | ê¸°ë³¸í‚¤ | âœ… í•„ìˆ˜ |
| `user_id` | UUID | auth.users FK | âœ… í•„ìˆ˜ |
| `title` | TEXT | ë¬¸ì„œ ì œëª© | âœ… í•„ìˆ˜ |
| `content` | TEXT | ë¬¸ì„œ ë‚´ìš© | âœ… í•„ìˆ˜ |
| `created_at` | TIMESTAMPTZ | ìƒì„±ì¼ | âœ… í•„ìˆ˜ |
| `updated_at` | TIMESTAMPTZ | ìˆ˜ì •ì¼ | âœ… í•„ìˆ˜ |

**ì¶”ê°€ëœ ì»¬ëŸ¼** (í›„ì† ë§ˆì´ê·¸ë ˆì´ì…˜):
| ì»¬ëŸ¼ | íƒ€ì… | ì¶”ê°€ ë§ˆì´ê·¸ë ˆì´ì…˜ | ìƒíƒœ |
|------|------|------------------|------|
| `category` | TEXT | `034_add_category.sql` | âš ï¸ í™•ì¸ |
| `sort_order` | INT | `035_add_sort_order.sql` | âš ï¸ í™•ì¸ |
| `file_path` | TEXT | RAG ì—…ë¡œë“œìš© | âš ï¸ í™•ì¸ |
| `file_type` | TEXT | RAG íŒŒì¼ íƒ€ì… | âš ï¸ í™•ì¸ |
| `status` | TEXT | ì²˜ë¦¬ ìƒíƒœ | âš ï¸ í™•ì¸ |
| `started_at` | TIMESTAMPTZ | ì²˜ë¦¬ ì‹œì‘ ì‹œê°„ | âš ï¸ í™•ì¸ |

**ì‘ì—… ë‚´ìš©**: í˜„ì¬ ìŠ¤í‚¤ë§ˆ í™•ì¸ ë° ë¬¸ì„œí™”

**ë‹´ë‹¹**: DB ì—”ì§€ë‹ˆì–´  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-03: RPC í•¨ìˆ˜ `match_document_chunks` ê³„ì•½ ê³ ì •

**ëª©í‘œ**: ì´í›„ ë°˜í™˜ íƒ€ì… ë³€ê²½ ê¸ˆì§€, API ê³„ì•½ìœ¼ë¡œ ê³ ì •

**í™•ì • ê³„ì•½**:

```typescript
// Input Parameters
interface MatchDocumentChunksParams {
  query_embedding: number[]; // 1536 dimensions
  match_threshold: number; // 0.0 ~ 1.0
  match_count: number; // Top-K
  user_id_param: string; // UUID
  category_param?: string; // Optional category filter
}

// Output (ê³ ì •, ë³€ê²½ ê¸ˆì§€)
interface MatchDocumentChunksResult {
  id: string; // UUID
  document_id: string; // UUID (Required)
  content: string; // Chunk text
  metadata: object; // JSONB
  similarity: number; // 0.0 ~ 1.0
}
```

**ì‘ì—… ë‚´ìš©**:

1. TypeScript íƒ€ì… ì •ì˜ íŒŒì¼ì— ê³„ì•½ ì¶”ê°€
2. API í˜¸ì¶œ ì‹œ íƒ€ì… ê²€ì¦ ì ìš©
3. ì´í›„ ë³€ê²½ ì‹œ ë²„ì „ ê´€ë¦¬ (v2 í•¨ìˆ˜ ìƒì„±)

**ë‹´ë‹¹**: ë°±ì—”ë“œ ê°œë°œì  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-04: TypeScript íƒ€ì… ì •ì˜ì™€ DB ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”

**ëª©í‘œ**: `frontend/src/types/rag.ts`ê°€ DB ìŠ¤í‚¤ë§ˆì™€ ì •í™•íˆ ì¼ì¹˜í•˜ë„ë¡ ë™ê¸°í™”

**í˜„ì¬ íƒ€ì… ì •ì˜ í™•ì¸**:

- `DocumentStatus` enum: âœ… ì •ì˜ë¨ (Line 23-30)
- `ACLFilter`: âœ… ì •ì˜ë¨ (Line 42-51)
- `ChunkMetadata`: âœ… ì •ì˜ë¨ (Line 75-84)
- `EvidencePack`: âœ… ì •ì˜ë¨ (Line 310-319)

**ë™ê¸°í™” í•„ìš” í•­ëª©**:
| í•­ëª© | í˜„ì¬ ìƒíƒœ | ì‘ì—… |
|------|----------|------|
| `RagChunk` ì¸í„°í˜ì´ìŠ¤ | âŒ ì—†ìŒ | ì¶”ê°€ í•„ìš” |
| `UserDocument` ì¸í„°í˜ì´ìŠ¤ | âŒ ì—†ìŒ | ì¶”ê°€ í•„ìš” |
| `MatchResult` ì¸í„°í˜ì´ìŠ¤ | ë¶€ë¶„ | í™•ì¥ í•„ìš” |

**ì¶”ê°€í•  íƒ€ì… ì •ì˜**:

```typescript
/**
 * [P1-04] RAG Chunk íƒ€ì… (DB ìŠ¤í‚¤ë§ˆì™€ ë™ê¸°í™”)
 */
export interface RagChunk {
  id: string;
  document_id: string;
  content: string;
  embedding?: number[]; // Optional (ëŒ€ìš©ëŸ‰)
  metadata: ChunkMetadata;
  chunk_index?: number;
  category?: string;
  created_at: string;
}

/**
 * [P1-04] User Document íƒ€ì… (DB ìŠ¤í‚¤ë§ˆì™€ ë™ê¸°í™”)
 */
export interface UserDocument {
  id: string;
  user_id: string;
  title: string;
  content: string;
  category?: string;
  file_path?: string;
  file_type?: string;
  status: DocumentStatus;
  started_at?: string;
  created_at: string;
  updated_at: string;
}

/**
 * [P1-04] RPC ê²°ê³¼ íƒ€ì… (ê³„ì•½ ê³ ì •)
 */
export interface MatchChunkResult {
  id: string;
  document_id: string;
  content: string;
  metadata: Record<string, unknown>;
  similarity: number;
}
```

**ë‹´ë‹¹**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

## ğŸ“‹ Phase 1.2: RLS ì •ì±… ì²´ê³„í™”

### P1-05: `user_documents` RLS ì •ì±… ê²€í†  ë° í™•ì •

**í˜„ì¬ ìƒíƒœ** (`033_user_documents.sql` ê¸°ì¤€):

- âœ… SELECT: `auth.uid() = user_id`
- âœ… INSERT: `auth.uid() = user_id`
- âœ… UPDATE: `auth.uid() = user_id`
- âœ… DELETE: `auth.uid() = user_id`

**ì‘ì—… ë‚´ìš©**: ì •ì±… ì¤‘ë³µ ì—¬ë¶€ í™•ì¸ ë° ì •ë¦¬

```sql
-- í˜„ì¬ ì •ì±… ëª©ë¡ í™•ì¸
SELECT policyname, cmd, qual, with_check
FROM pg_policies
WHERE tablename = 'user_documents';
```

**ë‹´ë‹¹**: DB ì—”ì§€ë‹ˆì–´ + ë³´ì•ˆ ì—”ì§€ë‹ˆì–´  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-06: `rag_chunks` RLS ì •ì±… ê²€í†  ë° í™•ì •

**í˜„ì¬ ì„¤ê³„ (Phase 0ì—ì„œ ì ìš©)**:

- JOIN ê¸°ë°˜ ê²€ì¦ (`user_documents` í…Œì´ë¸” ì¡°íšŒ)

**ê²€í†  ì‚¬í•­**:
| ë°©ì‹ | ì¥ì  | ë‹¨ì  |
|------|------|------|
| **í˜„ì¬ (JOIN ê¸°ë°˜)** | ì •ê·œí™” ìœ ì§€ | ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ |
| **ë¹„ì •ê·œí™” (user_id ì§ì ‘)** | ë¹ ë¥¸ ì¡°íšŒ | ë°ì´í„° ë™ê¸°í™” í•„ìš” |

**ê²°ì • í•„ìš”**: í˜„ì¬ JOIN ë°©ì‹ ìœ ì§€ vs `user_id` ì»¬ëŸ¼ ì¶”ê°€

> **ì „ë¬¸ê°€ íšŒì˜ ì˜ê²¬**:
>
> - **DB ì—”ì§€ë‹ˆì–´**: "í˜„ì¬ ë°ì´í„°ëŸ‰ì—ì„œëŠ” JOIN ë°©ì‹ìœ¼ë¡œ ì¶©ë¶„. ì„±ëŠ¥ ì´ìŠˆ ë°œìƒ ì‹œ ë¹„ì •ê·œí™” ê²€í† "
> - **ë³´ì•ˆ ì—”ì§€ë‹ˆì–´**: "ì–´ëŠ ë°©ì‹ì´ë“  RLS ì •ì±…ì€ í•„ìˆ˜. í˜„ì¬ ë°©ì‹ ìœ ì§€ ê¶Œì¥"

**ì‘ì—… ë‚´ìš©**: í˜„ì¬ ì •ì±… í™•ì¸ ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

**ë‹´ë‹¹**: DB ì—”ì§€ë‹ˆì–´ + ë³´ì•ˆ ì—”ì§€ë‹ˆì–´  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-07: RLS ì •ì±… í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:

| #   | ì‹œë‚˜ë¦¬ì˜¤                  | ì˜ˆìƒ ê²°ê³¼  |
| --- | ------------------------- | ---------- |
| 1   | User Aê°€ ë³¸ì¸ ë¬¸ì„œ ì¡°íšŒ   | âœ… ì„±ê³µ    |
| 2   | User Aê°€ User B ë¬¸ì„œ ì¡°íšŒ | âŒ ë¹ˆ ê²°ê³¼ |
| 3   | User Aê°€ ë³¸ì¸ ì²­í¬ ì¡°íšŒ   | âœ… ì„±ê³µ    |
| 4   | User Aê°€ User B ì²­í¬ ì¡°íšŒ | âŒ ë¹ˆ ê²°ê³¼ |
| 5   | ìµëª… ì‚¬ìš©ì ì¡°íšŒ ì‹œë„     | âŒ ì‹¤íŒ¨    |

**í…ŒìŠ¤íŠ¸ SQL**:

```sql
-- í…ŒìŠ¤íŠ¸ ì¤€ë¹„: ë‘ ì‚¬ìš©ì ID í•„ìš”
-- User A: (í…ŒìŠ¤íŠ¸ ê³„ì • 1)
-- User B: (í…ŒìŠ¤íŠ¸ ê³„ì • 2)

-- í…ŒìŠ¤íŠ¸ 1: User Aë¡œ ì¸ì¦ í›„ ë³¸ì¸ ë¬¸ì„œ ì¡°íšŒ
SET request.jwt.claim.sub = '<USER_A_ID>';
SELECT * FROM user_documents LIMIT 5;

-- í…ŒìŠ¤íŠ¸ 2: User Aë¡œ ì¸ì¦ í›„ User B ë¬¸ì„œ ì¡°íšŒ ì‹œë„
-- (RLSê°€ ì‘ë™í•˜ë©´ ë¹ˆ ê²°ê³¼ ë°˜í™˜)
```

**ë‹´ë‹¹**: QA ì—”ì§€ë‹ˆì–´  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

## ğŸ“‹ Phase 1.3: API ê³„ì¸µ ì •ë¦¬

### P1-08: `/api/documents/process` íë¦„ ê²€í†  ë° ë¬¸ì„œí™”

**í˜„ì¬ íë¦„** (`frontend/src/app/api/documents/process/route.ts`):

```
1. ì‚¬ìš©ì ì¸ì¦ í™•ì¸ (auth.getUser)
2. Request Body ê²€ì¦ (documentId)
3. ë¬¸ì„œ ì •ë³´ ì¡°íšŒ + ì†Œìœ ê¶Œ ê²€ì¦ (IDOR ë°©ì§€)
4. ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€ (Idempotency)
5. ë¬¸ì„œ ì²˜ë¦¬ ì‹¤í–‰ (processDocument)
6. ì‘ë‹µ ë°˜í™˜
```

**ê²€í†  ë° ë¬¸ì„œí™” í•­ëª©**:

- [ ] ì—ëŸ¬ ì½”ë“œ í‘œì¤€í™”
- [ ] ì‘ë‹µ í˜•ì‹ í†µì¼
- [ ] íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ í™•ì¸

**ë‹´ë‹¹**: ë°±ì—”ë“œ ê°œë°œì  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-09: `/api/rag/*` ì—”ë“œí¬ì¸íŠ¸ ê³„ì•½ ì •ì˜

**ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡**:
| ì—”ë“œí¬ì¸íŠ¸ | ì—­í•  | ê³„ì•½ ì •ì˜ ìƒíƒœ |
|-----------|------|---------------|
| `/api/rag/search` | ë²¡í„° ê²€ìƒ‰ | â¬œ í•„ìš” |
| `/api/rag/chunks` | ì²­í¬ CRUD | â¬œ í•„ìš” |
| `/api/rag/evaluate` | ê¸°ì¤€ë³„ í‰ê°€ | â¬œ í•„ìš” |
| `/api/rag/evaluate-holistic` | ì¢…í•© í‰ê°€ | â¬œ í•„ìš” |
| `/api/rag/evaluate-single` | ê°œë³„ í•­ëª© ì¬í‰ê°€ | â¬œ í•„ìš” |
| `/api/rag/change-plan` | ìˆ˜ì • ê³„íš ìƒì„± | â¬œ í•„ìš” |

**ê³„ì•½ ì •ì˜ í˜•ì‹**:

```typescript
// ì˜ˆì‹œ: /api/rag/search
interface SearchRequest {
  query: string;
  topK?: number;
  category?: string;
  threshold?: number;
}

interface SearchResponse {
  success: boolean;
  chunks: MatchChunkResult[];
  message?: string;
}
```

**ë‹´ë‹¹**: ë°±ì—”ë“œ ê°œë°œì + í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

### P1-10: ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´ í†µì¼

**í˜„ì¬ ë¬¸ì œ**: APIë§ˆë‹¤ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ì´ ë‹¤ë¦„

**í‘œì¤€í™” ì œì•ˆ**:

```typescript
interface ApiErrorResponse {
  success: false;
  error: {
    code: string; // ì˜ˆ: 'UNAUTHORIZED', 'NOT_FOUND', 'INTERNAL_ERROR'
    message: string; // ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€
    details?: any; // ê°œë°œììš© ìƒì„¸ ì •ë³´ (ì˜µì…˜)
  };
}

interface ApiSuccessResponse<T> {
  success: true;
  data: T;
  message?: string;
}
```

**ì‘ì—… ë‚´ìš©**:

1. ì—ëŸ¬ ì½”ë“œ ëª©ë¡ ì •ì˜
2. ê³µí†µ ì—ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ìƒì„±
3. ê¸°ì¡´ API ë¼ìš°íŠ¸ì— ì ìš©

**ë‹´ë‹¹**: ë°±ì—”ë“œ ê°œë°œì  
**ìƒíƒœ**: â¬œ ë¯¸ì™„ë£Œ

---

## âœ… Phase 1 ì™„ë£Œ ê¸°ì¤€ (ë§ˆìŠ¤í„° í”Œëœê³¼ ë™ê¸°í™”)

### í•µì‹¬ ê²€ì¦ ê¸°ì¤€ â­

- [ ] **ë¬¸ì„œ ì—…ë¡œë“œ â†’ ì²­í‚¹ â†’ ì„ë² ë”© â†’ ì €ì¥ ì „ì²´ íë¦„ ë™ì‘**
- [ ] **RAG ê²€ìƒ‰ APIê°€ ì¼ê´€ëœ ì‘ë‹µ ë°˜í™˜**
- [ ] **RLS ì •ì±…ì´ ì˜ë„ëŒ€ë¡œ ë™ì‘ (íƒ€ ì‚¬ìš©ì ë¬¸ì„œ ì ‘ê·¼ ë¶ˆê°€)**

### ì„¸ë¶€ ì™„ë£Œ í•­ëª©

- [ ] `rag_chunks`, `user_documents` ìŠ¤í‚¤ë§ˆ ë¬¸ì„œí™” ì™„ë£Œ (P1-01, P1-02)
- [ ] RPC í•¨ìˆ˜ ê³„ì•½ ê³ ì • ë° TypeScript íƒ€ì… ë™ê¸°í™” (P1-03, P1-04)
- [ ] RLS ì •ì±… í…ŒìŠ¤íŠ¸ ì™„ë£Œ - 5ê°œ ì‹œë‚˜ë¦¬ì˜¤ í†µê³¼ (P1-05, P1-06, P1-07)
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ê³„ì•½ ì •ì˜ ë¬¸ì„œ ì‘ì„± (P1-08, P1-09)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´ í†µì¼ (P1-10)

---

## ğŸ“Š Phase 1 ê²€ì¦ ê³„íš

### ìë™í™” í…ŒìŠ¤íŠ¸

```powershell
# TypeScript ë¹Œë“œ í…ŒìŠ¤íŠ¸
cd frontend
npx tsc --noEmit
```

### ìˆ˜ë™ ê²€ì¦

| #   | í…ŒìŠ¤íŠ¸ í•­ëª© | ìˆ˜í–‰ ë°©ë²•                    | ì˜ˆìƒ ê²°ê³¼              |
| --- | ----------- | ---------------------------- | ---------------------- |
| 1   | ë¬¸ì„œ ì—…ë¡œë“œ | ì°¸ê³ ìë£Œ íƒ­ â†’ íŒŒì¼ ì—…ë¡œë“œ    | ì—…ë¡œë“œ ì„±ê³µ, ì²˜ë¦¬ ì™„ë£Œ |
| 2   | ì²­í‚¹ í™•ì¸   | DBì—ì„œ `rag_chunks` ì¡°íšŒ     | ì²­í¬ ìƒì„±ë¨            |
| 3   | ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ | ì±„íŒ…ì—ì„œ ë¬¸ì„œ ê´€ë ¨ ì§ˆë¬¸      | ê´€ë ¨ ì²­í¬ ë°˜í™˜         |
| 4   | RLS ê²€ì¦    | ë‹¤ë¥¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ì¡°íšŒ | íƒ€ì¸ ë¬¸ì„œ ì•ˆ ë³´ì„      |

---

## ğŸ“Š ì§„í–‰ë¥ 

```
Phase 1.1: ë°ì´í„° ëª¨ë¸ ì •ë¦¬
  P1-01 [â¬œ] rag_chunks ìŠ¤í‚¤ë§ˆ í™•ì •
  P1-02 [â¬œ] user_documents ìŠ¤í‚¤ë§ˆ í™•ì •
  P1-03 [â¬œ] RPC í•¨ìˆ˜ ê³„ì•½ ê³ ì •
  P1-04 [â¬œ] TypeScript íƒ€ì… ë™ê¸°í™”

Phase 1.2: RLS ì •ì±… ì²´ê³„í™”
  P1-05 [â¬œ] user_documents RLS ê²€í† 
  P1-06 [â¬œ] rag_chunks RLS ê²€í† 
  P1-07 [â¬œ] RLS í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

Phase 1.3: API ê³„ì¸µ ì •ë¦¬
  P1-08 [â¬œ] /api/documents/process ë¬¸ì„œí™”
  P1-09 [â¬œ] /api/rag/* ê³„ì•½ ì •ì˜
  P1-10 [â¬œ] ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´ í†µì¼

ì™„ë£Œ: 0/10 (0%)
```

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

Phase 1 ì™„ë£Œ í›„ â†’ [Phase 2: Template Builder êµ¬ì¡° ë„ì…](./2512290319_Phase2_Template_Builder_Checklist.md)

---

## ğŸ“š ì°¸ì¡° ë¬¸ì„œ

- [ë§ˆìŠ¤í„° í”Œëœ](./2512290307_Architecture_Refactoring_Master_Plan.md)
- [Phase 0 ì²´í¬ë¦¬ìŠ¤íŠ¸](./2512290313_Phase0_Critical_Fix_Checklist.md)
- [Phase 2 ì²´í¬ë¦¬ìŠ¤íŠ¸](./2512290319_Phase2_Template_Builder_Checklist.md)
