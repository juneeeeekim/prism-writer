# Pipeline v4 Upgrade - JeDebug C.O.R.E + S/D ë¶„ì„

> **ë¶„ì„ ë¬¸ì„œ**: `2512251345_Pipeline_v4_Upgrade_Checklist.md`  
> **ë¶„ì„ì¼**: 2025-12-25  
> **ë¶„ì„ì**: JeDebug (Senior Migration & Reliability Specialist)  
> **Project Domain**: RAG Pipeline ì—…ê·¸ë ˆì´ë“œ (v3 â†’ v4)  
> **Tech Stack**: Next.js (Frontend), Supabase (PostgreSQL + RLS), OpenAI API  
> **Risk Level**: Mid-High (ê²€ìƒ‰/í…œí”Œë¦¿ ì½”ì–´ ë¡œì§ ë³€ê²½)

---

## 1) ğŸš¨ ìœ„í—˜ ìš”ì†Œ ë° ë””ë²„ê¹… í¬ì¸íŠ¸ (Risk Checklist)

### Compatibility & Regression (í˜¸í™˜ì„± ë° íšŒê·€ ë°©ì§€)

- [x] **(High) Risk: BM25 ì¸ë±ìŠ¤ ë¶„ë¦¬ ì‹œ ê¸°ì¡´ ê²€ìƒ‰ ê²°ê³¼ ë³€ê²½** âœ… **COMPLETED**

  - [x] ì›ì¸: `chunk_type` ì»¬ëŸ¼ ì¶”ê°€ í›„ ê¸°ì¡´ ì²­í¬ì— NULL ê°’ ë°œìƒ
  - [x] ì›ì¸: ê¸°ì¡´ `fullTextSearch()`ê°€ ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¿¼ë¦¬ í˜¸ì¶œ
  - [x] í•´ê²°: ë§ˆì´ê·¸ë ˆì´ì…˜ì—ì„œ ê¸°ì¡´ ë°ì´í„° `chunk_type = 'general'` ê¸°ë³¸ê°’ ì„¤ì •
  - [x] í•´ê²°: `chunkType` íŒŒë¼ë¯¸í„° ë¯¸ì§€ì • ì‹œ ëª¨ë“  íƒ€ì… ê²€ìƒ‰í•˜ëŠ” Adapter íŒ¨í„´ ì ìš©
  - [x] íŒŒì¼: `backend/migrations/030_bm25_dual_index.sql` âœ… Supabase ì ìš© ì™„ë£Œ
  - [x] íŒŒì¼: `backend/migrations/031_search_chunk_type_filter.sql` âœ… Supabase ì ìš© ì™„ë£Œ
  - [x] íŒŒì¼: `frontend/src/lib/rag/search.ts` (fullTextSearch, vectorSearch) âœ… ìˆ˜ì • ì™„ë£Œ
  - [x] ì—°ê²°ì„±: Phase 1.3 ì™„ë£Œ í›„ â†’ Phase 1 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹¤í–‰
  - [x] ì™„ë£Œì¡°ê±´: TypeScript 0 errors âœ… + Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ Success âœ…

- [x] **(High) Risk: Regression Gate ì¶”ê°€ ì‹œ ê¸°ì¡´ í…œí”Œë¦¿ ë¹Œë“œ ì‹¤íŒ¨** âœ… **COMPLETED**

  - [x] ì›ì¸: `validateAllGates()` ì‹œê·¸ë‹ˆì²˜ ë³€ê²½ìœ¼ë¡œ í˜¸ì¶œë¶€ Breaking Change
  - [x] ì›ì¸: ì´ì „ ë²„ì „/ìƒ˜í”Œ ì—†ëŠ” ì‹ ê·œ í…œí”Œë¦¿ì´ regression gateì—ì„œ ì˜¤ë¥˜ ë°œìƒ
  - [x] í•´ê²°: `regressionResult`ë¥¼ Optional í•„ë“œë¡œ ì„¤ê³„ âœ…
  - [x] í•´ê²°: ì´ì „ ë²„ì „ ì—†ì„ ì‹œ ìë™ í†µê³¼ ë¡œì§ (Null Object Pattern) âœ…
  - [x] íŒŒì¼: `frontend/src/lib/rag/templateGates.ts` âœ… ìˆ˜ì • ì™„ë£Œ
  - [x] ìœ„ì¹˜: line 21 (AllGatesResult), line 168-222 (validateRegressionGate), line 224-260 (validateAllGates)
  - [x] ì—°ê²°ì„±: Phase 2.2 ì™„ë£Œ âœ…
  - [x] ì™„ë£Œì¡°ê±´: TypeScript 0 errors âœ… + ê¸°ì¡´ 3ì¢… ê²Œì´íŠ¸ ì •ìƒ ë™ì‘

- [x] **(Mid) Risk: Telemetry í…Œì´ë¸” ì»¬ëŸ¼ ì¶”ê°€ ì‹œ ê¸°ì¡´ ë¡œê¹… ì‹¤íŒ¨** âœ… **COMPLETED**

  - [x] ì›ì¸: `run_type` ì»¬ëŸ¼ì´ NOT NULLì´ê³  ê¸°ì¡´ ì½”ë“œê°€ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•ŠìŒ
  - [x] í•´ê²°: `run_type` ì»¬ëŸ¼ì— `DEFAULT 'judge'` ì„¤ì • âœ…
  - [x] í•´ê²°: ê¸°ì¡´ telemetry í•¨ìˆ˜ì— í•˜ìœ„ í˜¸í™˜ ë˜í¼ ì¶”ê°€ (generateBuildRunId, generateJudgeRunId) âœ…
  - [x] íŒŒì¼: `backend/migrations/032_telemetry_run_type.sql` âœ… ìƒì„±ë¨
  - [x] íŒŒì¼: `frontend/src/lib/telemetry.ts` âœ… ìˆ˜ì •ë¨
  - [x] íŒŒì¼: `frontend/src/types/telemetry.ts` âœ… TelemetryRunType, runType? ì¶”ê°€
  - [x] ì—°ê²°ì„±: Phase 3.1 ì™„ë£Œ âœ…
  - [x] ì™„ë£Œì¡°ê±´: TypeScript 0 errors âœ… + ë§ˆì´ê·¸ë ˆì´ì…˜ ì‚¬ìš©ì ì ìš© í•„ìš”

- [x] **(Mid) Risk: ExampleSet ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ìœ¼ë¡œ íƒ€ì… í˜¸í™˜ì„± ê¹¨ì§** âœ… **COMPLETED**
  - [x] ì›ì¸: `source_rule_quotes` í•„ìˆ˜ í•„ë“œ ì¶”ê°€ ì‹œ ê¸°ì¡´ í˜¸ì¶œë¶€ ì»´íŒŒì¼ ì—ëŸ¬
  - [x] í•´ê²°: `source_rule_quotes?: string[]` Optional í•„ë“œë¡œ ì„¤ê³„ âœ…
  - [x] í•´ê²°: ê¸°ì¡´ Mining ê²°ê³¼ì—ëŠ” ë¹ˆ ë°°ì—´ ê¸°ë³¸ê°’ ì ìš© (ìë™)
  - [x] íŒŒì¼: `frontend/src/lib/rag/exampleMiner.ts` âœ… ìˆ˜ì • ì™„ë£Œ
  - [x] ìœ„ì¹˜: line 30 (ExampleSet ì¸í„°í˜ì´ìŠ¤)
  - [x] ì—°ê²°ì„±: Phase 4.1 ì™„ë£Œ âœ…
  - [x] ì™„ë£Œì¡°ê±´: TypeScript 0 errors âœ…

### Operational & Performance (ìš´ì˜ ë° ì„±ëŠ¥)

- [x] **(Mid) Risk: Regression Gate LLM í˜¸ì¶œë¡œ í…œí”Œë¦¿ ë¹Œë“œ ì‹œê°„ ê¸‰ì¦** âœ… **COMPLETED**

  - [x] ì›ì¸: validation_samples ìˆœíšŒí•˜ë©° LLM í‰ê°€ ë°˜ë³µ í˜¸ì¶œ
  - [x] ì›ì¸: 10ê°œ ìƒ˜í”Œ Ã— LLM í˜¸ì¶œ â‰ˆ ì¶”ê°€ 30ì´ˆ ì´ìƒ ì†Œìš”
  - [x] í•´ê²°: ìƒ˜í”Œ ìˆ˜ ì œí•œ (ìµœëŒ€ 5ê°œ) - `REGRESSION_MAX_SAMPLES = 5` âœ…
  - [x] í•´ê²°: LLM í˜¸ì¶œ ë³‘ë ¬í™” (`Promise.all`) âœ…
  - [x] í•´ê²°: ë°°ì¹˜ ì²˜ë¦¬ìš© ê²½ëŸ‰ ëª¨ë¸ ì‚¬ìš© (`gpt-3.5-turbo`) âœ…
  - [x] íŒŒì¼: `frontend/src/lib/rag/templateGates.ts` âœ… ìˆ˜ì • ì™„ë£Œ
  - [x] ìœ„ì¹˜: line 171-306 (validateRegressionGate)
  - [x] ì—°ê²°ì„±: Phase 2.2 ìµœì í™” ì™„ë£Œ âœ…
  - [x] ì™„ë£Œì¡°ê±´: TypeScript 0 errors âœ… + ì„±ëŠ¥ ìµœì í™” ì ìš©

- [ ] **(Low) Risk: 3ë‹¨ UI ë Œë”ë§ ì„±ëŠ¥ ì €í•˜ (ëŒ€ëŸ‰ ì˜ˆì‹œ)**
  - [ ] ì›ì¸: ë§ì€ ì˜ˆì‹œ ë°ì´í„° DOM ë Œë”ë§ ì‹œ FCP ì§€ì—°
  - [ ] í•´ê²°: ì˜ˆì‹œ ëª©ë¡ ê°€ìƒ ìŠ¤í¬ë¡¤ ì ìš© ë˜ëŠ” ìµœëŒ€ 5ê°œ í‘œì‹œ
  - [ ] íŒŒì¼: `frontend/src/components/` (ê´€ë ¨ ì»´í¬ë„ŒíŠ¸)
  - [ ] ìœ„ì¹˜: (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ - ì»´í¬ë„ŒíŠ¸ íƒìƒ‰ í•„ìš”)
  - [ ] ì—°ê²°ì„±: Phase 5.1 êµ¬í˜„ ì‹œ ê³ ë ¤ ì‚¬í•­
  - [ ] ì™„ë£Œì¡°ê±´: Lighthouse Performance ì ìˆ˜ 80ì  ì´ìƒ

### Robustness & Data Integrity (ê²¬ê³ ì„± ë° ë°ì´í„° ë¬´ê²°ì„±)

- [ ] **(High) Risk: ì²­í¬ ìœ í˜• ë¶„ë¥˜ ì˜¤ë¥˜ë¡œ ì¸í•œ ë°ì´í„° í’ˆì§ˆ ì €í•˜**

  - [ ] ì›ì¸: `classifyChunkType()` ì •ê·œì‹ì´ ì—£ì§€ ì¼€ì´ìŠ¤ ë¯¸ì²˜ë¦¬
  - [ ] ì›ì¸: í•œê¸€/ì˜ì–´ í˜¼ìš© ë¬¸ì„œì—ì„œ íŒ¨í„´ ë¯¸ì¸ì‹
  - [ ] í•´ê²°: ë¶„ë¥˜ ë¡œì§ì— Fallback (`general` ê¸°ë³¸ê°’)
  - [ ] í•´ê²°: ë¶„ë¥˜ ê²°ê³¼ ë¡œê¹… ë° ìˆ˜ë™ ê²€í†  ê¸°ëŠ¥ ì¶”ê°€
  - [ ] íŒŒì¼: `frontend/src/lib/rag/chunking.ts`
  - [ ] ìœ„ì¹˜: classifyChunkType í•¨ìˆ˜ (ì‹ ê·œ ì¶”ê°€ ì˜ˆì •, ì•½ 100ë²ˆëŒ€ ë¼ì¸)
  - [ ] ì—°ê²°ì„±: Phase 1.2 êµ¬í˜„ ì‹œ í•µì‹¬ ê³ ë ¤ ì‚¬í•­
  - [ ] ì™„ë£Œì¡°ê±´: í…ŒìŠ¤íŠ¸ ë¬¸ì„œ 10ê°œì—ì„œ ë¶„ë¥˜ ì •í™•ë„ 80% ì´ìƒ

- [ ] **(Mid) Risk: template_validation_samples ë°ì´í„° ëˆ„ë½ ì‹œ Regression Gate ë¬´ë ¥í™”**
  - [ ] ì›ì¸: ìƒ˜í”Œ ê´€ë¦¬ ì—†ì´ í…œí”Œë¦¿ë§Œ ìƒì„±ë˜ë©´ Gateê°€ ì˜ë¯¸ ì—†ìŒ
  - [ ] í•´ê²°: í…œí”Œë¦¿ ìƒì„± ì‹œ ìµœì†Œ 3ê°œ ìƒ˜í”Œ ìë™ ìƒì„± ë¡œì§ ì¶”ê°€
  - [ ] í•´ê²°: ìƒ˜í”Œ ì—†ëŠ” í…œí”Œë¦¿ì— ê²½ê³  í‘œì‹œ
  - [ ] íŒŒì¼: (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ - ì‹ ê·œ ë¡œì§ í•„ìš”)
  - [ ] ìœ„ì¹˜: templateBuilder.ts saveFinalTemplate ë©”ì„œë“œ ì´í›„
  - [ ] ì—°ê²°ì„±: Phase 2.1, 2.2 í†µí•© ì‹œ ê³ ë ¤
  - [ ] ì™„ë£Œì¡°ê±´: ëª¨ë“  approved í…œí”Œë¦¿ì— ìµœì†Œ 3ê°œ validation_sample ì¡´ì¬

### Security (ë³´ì•ˆ)

- [ ] **(Mid) Risk: template_validation_samples RLS ì •ì±… ëˆ„ë½**

  - [ ] ì›ì¸: ìƒˆ í…Œì´ë¸”ì— RLS ë¯¸ì„¤ì • ì‹œ ë‹¤ë¥¸ tenant ìƒ˜í”Œ ë…¸ì¶œ
  - [ ] í•´ê²°: tenant_id ê¸°ë°˜ RLS ì •ì±… í•„ìˆ˜ ì ìš©
  - [ ] íŒŒì¼: `backend/migrations/031_template_validation_set.sql`
  - [ ] ìœ„ì¹˜: RLS ì •ì±… ì„¤ì • ì„¹ì…˜
  - [ ] ì—°ê²°ì„±: Phase 2.1 ì™„ë£Œ ì¡°ê±´
  - [ ] ì™„ë£Œì¡°ê±´: RLS ì •ì±… 4ì¢… ìƒì„± (SELECT, INSERT, UPDATE, DELETE)

- [ ] **(Low) Risk: ì˜ˆì‹œ ìƒì„± LLM í”„ë¡¬í”„íŠ¸ì— ë¯¼ê° ì •ë³´ ë…¸ì¶œ**
  - [ ] ì›ì¸: ì›ë¬¸ ì²­í¬ê°€ í”„ë¡¬í”„íŠ¸ì— í¬í•¨ë˜ì–´ OpenAIë¡œ ì „ì†¡
  - [ ] í•´ê²°: ë¯¼ê° ì •ë³´ ë§ˆìŠ¤í‚¹ or ì‚¬ìš©ì ë™ì˜ í™•ì¸ UI ì¶”ê°€
  - [ ] íŒŒì¼: `frontend/src/lib/rag/prompts/exampleGeneration.ts`
  - [ ] ìœ„ì¹˜: generateExampleGenerationPrompt í•¨ìˆ˜
  - [ ] ì—°ê²°ì„±: Phase 4.2 êµ¬í˜„ ì‹œ ê²€í† 
  - [ ] ì™„ë£Œì¡°ê±´: í”„ë¡¬í”„íŠ¸ì— ì›ë¬¸ ê¸¸ì´ ì œí•œ (1000ì) ì ìš©

### Deployment & Fallback (ë°°í¬ ë° ë³µêµ¬)

- [ ] **(High) Risk: ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ë¶ˆê°€**

  - [ ] ì›ì¸: ALTER TABLE í›„ ë°ì´í„° ë³€ê²½ë˜ë©´ ì›ìƒë³µêµ¬ ì–´ë ¤ì›€
  - [ ] í•´ê²°: ê° ë§ˆì´ê·¸ë ˆì´ì…˜ì— ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] í•´ê²°: ë‹¨ê³„ë³„ ë°°í¬ (ì¸ë±ìŠ¤ â†’ ì½”ë“œ â†’ í™œì„±í™”)
  - [ ] íŒŒì¼: `backend/migrations/030_bm25_dual_index.sql`
  - [ ] íŒŒì¼: `backend/migrations/031_template_validation_set.sql`
  - [ ] íŒŒì¼: `backend/migrations/032_telemetry_run_type.sql`
  - [ ] ìœ„ì¹˜: ê° ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ í•˜ë‹¨ì— ë¡¤ë°± ì„¹ì…˜
  - [ ] ì—°ê²°ì„±: ëª¨ë“  Phase ë°°í¬ ì „ í•„ìˆ˜
  - [ ] ì™„ë£Œì¡°ê±´: ê° ë§ˆì´ê·¸ë ˆì´ì…˜ë³„ ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì¡´ì¬ ë° í…ŒìŠ¤íŠ¸ ì™„ë£Œ

- [ ] **(Mid) Risk: Feature Flag ë¶€ì¬ë¡œ ì¦‰ì‹œ ë¡¤ë°± ë¶ˆê°€**
  - [ ] ì›ì¸: ë¬¸ì„œì— Feature Flag / Kill Switch ì–¸ê¸‰ ì—†ìŒ
  - [ ] í•´ê²°: `ENABLE_PIPELINE_V4` í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ Feature Toggle ì¶”ê°€
  - [ ] í•´ê²°: Toggle OFF ì‹œ ê¸°ì¡´ v3 ë¡œì§ìœ¼ë¡œ Fallback
  - [ ] íŒŒì¼: (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ - ì‹ ê·œ êµ¬í˜„ í•„ìš”)
  - [ ] ìœ„ì¹˜: templateBuilder.ts, search.ts ì§„ì…ì 
  - [ ] ì—°ê²°ì„±: Phase 6 ë°°í¬ ì „ í•„ìˆ˜
  - [ ] ì™„ë£Œì¡°ê±´: í™˜ê²½ ë³€ìˆ˜ ë³€ê²½ë§Œìœ¼ë¡œ v3 ë™ì‘ í™•ì¸

---

## 2) ğŸ§ª í•„ìˆ˜ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ì‹œë‚˜ë¦¬ì˜¤ (Verification Checklist)

### Regression Test (ê¸°ì¡´ ê¸°ëŠ¥ ë³´í˜¸)

- [ ] **RT-1: ê¸°ì¡´ ë¬¸ì„œ ì—…ë¡œë“œ ë° ì²˜ë¦¬ ì •ìƒ ë™ì‘**

  - [ ] Given: Pipeline v3ë¡œ ì²˜ë¦¬ëœ ê¸°ì¡´ ë¬¸ì„œ ì¡´ì¬
  - [ ] When: ë™ì¼ ë¬¸ì„œë¥¼ Pipeline v4 í™˜ê²½ì—ì„œ ì¬ì—…ë¡œë“œ
  - [ ] Then: ì²­í¬ ìƒì„± ë° ì¸ë±ì‹± ì„±ê³µ
  - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ„ì¹˜: `frontend/src/lib/rag/__tests__/` (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ - í™•ì¸ í•„ìš”)
  - [ ] ì™„ë£Œì¡°ê±´: CI í†µê³¼ / ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì„±ê³µ

- [ ] **RT-2: hybridSearch() ê¸°ì¡´ ê²°ê³¼ ë™ì¼ì„±**

  - [ ] Given: íŠ¹ì • ì¿¼ë¦¬ì™€ ê¸°ì¡´ ê²€ìƒ‰ ê²°ê³¼ ìŠ¤ëƒ…ìƒ·
  - [ ] When: v4ì—ì„œ ë™ì¼ ì¿¼ë¦¬ë¡œ hybridSearch() í˜¸ì¶œ (chunkType ë¯¸ì§€ì •)
  - [ ] Then: ê²°ê³¼ Top 5ê°€ ê¸°ì¡´ê³¼ ë™ì¼
  - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ„ì¹˜: (ì‹ ê·œ ì‘ì„± í•„ìš”)
  - [ ] ì™„ë£Œì¡°ê±´: Before/After ê²°ê³¼ ë¹„êµ ì¼ì¹˜

- [ ] **RT-3: validateAllGates() ê¸°ì¡´ 3ì¢… ê²Œì´íŠ¸ ì •ìƒ ë™ì‘**

  - [ ] Given: í…ŒìŠ¤íŠ¸ìš© TemplateSchema ê°ì²´
  - [ ] When: validateAllGates() í˜¸ì¶œ
  - [ ] Then: citationResult, consistencyResult, hallucinationResult ëª¨ë‘ ë°˜í™˜
  - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ„ì¹˜: `frontend/src/lib/rag/__tests__/` (í™•ì¸ í•„ìš”)
  - [ ] ì™„ë£Œì¡°ê±´: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³¼

- [ ] **RT-4: TemplateBuilder.build() ì‹ ê·œ í…œí”Œë¦¿ ìƒì„± ì„±ê³µ**

  - [ ] Given: í…ŒìŠ¤íŠ¸ ë¬¸ì„œ ID, ìœ íš¨í•œ userId, tenantId
  - [ ] When: new TemplateBuilder(userId, tenantId).build(documentId) í˜¸ì¶œ
  - [ ] Then: success: true ë°˜í™˜, template ê°ì²´ ìƒì„±
  - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ„ì¹˜: `frontend/src/lib/rag/documentProcessor.test.ts` (ì¡´ì¬ í™•ì¸ë¨)
  - [ ] ì™„ë£Œì¡°ê±´: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í†µê³¼ + ì‹ ê·œ regression gate í†µê³¼

- [ ] **RT-5: ê¸°ì¡´ telemetry ë¡œê¹… ì •ìƒ ë™ì‘**
  - [ ] Given: Judge í‰ê°€ API í˜¸ì¶œ
  - [ ] When: í‰ê°€ ì™„ë£Œ
  - [ ] Then: telemetry_runsì— run_type = 'judge' ë ˆì½”ë“œ ìƒì„±
  - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ìœ„ì¹˜: (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ)
  - [ ] ì™„ë£Œì¡°ê±´: Supabase í…Œì´ë¸”ì—ì„œ ë ˆì½”ë“œ í™•ì¸

### Migration Test (ë°ì´í„° ì •í•©ì„±)

- [ ] **MT-1: ê¸°ì¡´ rag_chunks ë°ì´í„°ì— chunk_type ê¸°ë³¸ê°’ ì ìš©**

  - [ ] Count ê²€ì¦: `SELECT COUNT(*) FROM rag_chunks WHERE chunk_type IS NULL` = 0
  - [ ] ê¸°ë³¸ê°’ ê²€ì¦: `SELECT COUNT(*) FROM rag_chunks WHERE chunk_type = 'general'` = ê¸°ì¡´ ì „ì²´ ìˆ˜
  - [ ] ì™„ë£Œì¡°ê±´: ë§ˆì´ê·¸ë ˆì´ì…˜ ì „í›„ ì´ ì²­í¬ ìˆ˜ ì¼ì¹˜, NULL ì—†ìŒ

- [ ] **MT-2: ê¸°ì¡´ telemetry_runs ë°ì´í„°ì— run_type ê¸°ë³¸ê°’ ì ìš©**

  - [ ] Count ê²€ì¦: `SELECT COUNT(*) FROM telemetry_runs WHERE run_type IS NULL` = 0
  - [ ] ê¸°ë³¸ê°’ ê²€ì¦: ëª¨ë“  ê¸°ì¡´ ë ˆì½”ë“œ run_type = 'judge'
  - [ ] ì™„ë£Œì¡°ê±´: ë§ˆì´ê·¸ë ˆì´ì…˜ ì „í›„ ê²°ê³¼ ì¼ì¹˜

- [ ] **MT-3: ì‹ ê·œ í…Œì´ë¸” RLS ì •ì±… ê²€ì¦**
  - [ ] ìƒ˜í”Œë§ ê²€ì¦: ë‹¤ë¥¸ tenantë¡œ ë¡œê·¸ì¸ â†’ template_validation_samples ì¡°íšŒ ì‹œ 0ê±´
  - [ ] ì™„ë£Œì¡°ê±´: RLS ì •ì±…ìœ¼ë¡œ ë°ì´í„° ê²©ë¦¬ í™•ì¸

### Load Test (ì„±ëŠ¥ ê²€ì¦)

- [ ] **LT-1: í…œí”Œë¦¿ ë¹Œë“œ ì†Œìš” ì‹œê°„ < 30ì´ˆ**

  - [ ] ëª©í‘œ TPS: N/A (ë°°ì¹˜ ì‘ì—…)
  - [ ] ëª©í‘œ Latency: 30ì´ˆ ì´ë‚´
  - [ ] ë³‘ëª© í›„ë³´: LLM API í˜¸ì¶œ, Regression Gate ë°˜ë³µ í˜¸ì¶œ
  - [ ] ì™„ë£Œì¡°ê±´: í…ŒìŠ¤íŠ¸ ë¬¸ì„œ 5ê°œì—ì„œ í‰ê·  ë¹Œë“œ ì‹œê°„ 30ì´ˆ ì´í•˜

- [ ] **LT-2: í‰ê°€ ì‘ë‹µ ì‹œê°„ < 5ì´ˆ**

  - [ ] ëª©í‘œ TPS: 10 req/s (ë™ì‹œ ì‚¬ìš©ì ê¸°ì¤€)
  - [ ] ëª©í‘œ Latency: P95 < 5ì´ˆ
  - [ ] ë³‘ëª© í›„ë³´: LLM í‰ê°€ í˜¸ì¶œ, ê²€ìƒ‰ ì¿¼ë¦¬
  - [ ] ì™„ë£Œì¡°ê±´: í”¼í¬ íŠ¸ë˜í”½ì—ì„œ SLO ë§Œì¡±

- [ ] **LT-3: 3ë‹¨ UI ë Œë”ë§ ì„±ëŠ¥**
  - [ ] ëª©í‘œ: FCP < 2ì´ˆ, LCP < 3ì´ˆ
  - [ ] ë³‘ëª© í›„ë³´: ëŒ€ëŸ‰ ì˜ˆì‹œ ë°ì´í„° DOM ë Œë”ë§
  - [ ] ì™„ë£Œì¡°ê±´: Lighthouse Performance 80ì  ì´ìƒ

---

## 3) ğŸ›‘ ë¡¤ë°± ë° ë¹„ìƒ ëŒ€ì‘ ì „ëµ (Rollback Checklist)

### Feature Flag / Kill Switch

- [ ] **Feature Flag ì¡´ì¬ ì—¬ë¶€ í™•ì¸: (ë¬¸ì„œì— ëª…ì‹œ ì—†ìŒ - ì‹ ê·œ êµ¬í˜„ í•„ìš”)**
  - [ ] í”Œë˜ê·¸ ì´ë¦„ ì œì•ˆ: `ENABLE_PIPELINE_V4` ë˜ëŠ” `FEATURE_DUAL_INDEX`
  - [ ] í™˜ê²½ ë³€ìˆ˜ ìœ„ì¹˜: `.env.local`, Vercel Environment Variables
  - [ ] ë¹„ìƒ ì‹œ OFF ì ˆì°¨:
    - [ ] Vercel Dashboard â†’ Settings â†’ Environment Variables
    - [ ] `ENABLE_PIPELINE_V4=false` ì„¤ì •
    - [ ] Redeploy íŠ¸ë¦¬ê±° ë˜ëŠ” Instance Restart
  - [ ] ì™„ë£Œì¡°ê±´: í”Œë˜ê·¸ OFFë§Œìœ¼ë¡œ v3 ë™ì‘ í™•ì¸

### ë¡¤ë°± ì‹œë‚˜ë¦¬ì˜¤

- [ ] **ë¡¤ë°± íŠ¸ë¦¬ê±° ì¡°ê±´ ì •ì˜**
  - [ ] ì—ëŸ¬ìœ¨ > 5% (ê¸°ì¡´ ëŒ€ë¹„ 2ë°° ì´ìƒ)
  - [ ] í‰ê·  ì‘ë‹µ ì‹œê°„ > 10ì´ˆ (ê¸°ì¡´ ëŒ€ë¹„ 2ë°° ì´ìƒ)
  - [ ] í…œí”Œë¦¿ ë¹Œë“œ ì„±ê³µë¥  < 80%
- [ ] **ë¡¤ë°± ìˆ˜í–‰ì/ìŠ¹ì¸ì ì •ì˜**
  - [ ] ìˆ˜í–‰ì: (í™•ì¸ í•„ìš” - íŒ€ ìƒí™©ì— ë”°ë¼)
  - [ ] ìŠ¹ì¸ì: (í™•ì¸ í•„ìš”)
- [ ] **ë¡¤ë°± ì ˆì°¨**
  - [ ] Step 1: Feature Flag OFF (ì½”ë“œ ë³€ê²½ ì—†ì´ ì¦‰ì‹œ)
  - [ ] Step 2: Vercelì—ì„œ ì´ì „ ë°°í¬ ë²„ì „ìœ¼ë¡œ Rollback
  - [ ] Step 3: DB ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (í•„ìš” ì‹œ)
  - [ ] Step 4: ì›ì¸ ë¶„ì„ í›„ í•«í”½ìŠ¤
- [ ] ì™„ë£Œì¡°ê±´: ë¡¤ë°± í›„ í•µì‹¬ ì§€í‘œ ì •ìƒí™”

### ë°ì´í„° ë¡¤ë°± ë¶ˆê°€ ì§€ì 

- [ ] **ë¡¤ë°± ë¶ˆê°€ íŠ¸ëœì­ì…˜ ëª©ë¡**
  - [ ] `chunk_type` ì»¬ëŸ¼ ì¶”ê°€: ë¡¤ë°± ê°€ëŠ¥ (DROP COLUMN)
  - [ ] ê¸°ì¡´ ì²­í¬ chunk_type = 'general' ì—…ë°ì´íŠ¸: ë¡¤ë°± ì‹œ NULLë¡œ ë³µì› ìŠ¤í¬ë¦½íŠ¸ í•„ìš”
  - [ ] `run_type` ì»¬ëŸ¼ ì¶”ê°€: ë¡¤ë°± ê°€ëŠ¥
  - [ ] template_validation_samples í…Œì´ë¸”: DROP TABLEë¡œ ì œê±° ê°€ëŠ¥
- [ ] **ì™„í™”ì±…**
  - [ ] ëª¨ë“  ALTER TABLEì€ `IF NOT EXISTS` / `IF EXISTS` ì‚¬ìš©
  - [ ] ì»¬ëŸ¼ ì¶”ê°€ ì‹œ `DEFAULT` ê°’ ì„¤ì •ìœ¼ë¡œ í•˜ìœ„ í˜¸í™˜ ìœ ì§€
  - [ ] ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì‚¬ì „ ì‘ì„± ë° í…ŒìŠ¤íŠ¸
- [ ] ì™„ë£Œì¡°ê±´: ì‹¤íŒ¨ ì‹œì—ë„ ë°ì´í„° ì˜¤ì—¼ ë°©ì§€ í™•ì¸

---

## 4) ì¶”ê°€ í™•ì¸ í•„ìš”ì‚¬í•­ (Unknowns Checklist)

- [ ] **Q1: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ ë° ìœ„ì¹˜ í™•ì¸**

  - [ ] `frontend/src/lib/rag/__tests__/` ë””ë ‰í† ë¦¬ í™•ì¸ë¨ (3ê°œ íŒŒì¼ ì¡´ì¬)
  - [ ] ì–´ë–¤ í•¨ìˆ˜ê°€ í…ŒìŠ¤íŠ¸ë˜ê³  ìˆëŠ”ì§€ ìƒì„¸ í™•ì¸ í•„ìš”

- [ ] **Q2: ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì¡´ì¬ ì—¬ë¶€**

  - [ ] Telemetry ë¶„ë¦¬ í›„ ìƒˆ ëŒ€ì‹œë³´ë“œ í•„ìš”í•œì§€ í™•ì¸ í•„ìš”
  - [ ] ê¸°ì¡´ ëª¨ë‹ˆí„°ë§ ë„êµ¬ (Grafana, Supabase Dashboard ë“±) í™•ì¸

- [ ] **Q3: Canary/Blue-Green ë°°í¬ í™˜ê²½ ê°€ëŠ¥ ì—¬ë¶€**

  - [ ] Vercelì—ì„œ Preview Deploymentë¥¼ Canaryë¡œ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸
  - [ ] Production íŠ¸ë˜í”½ ì¼ë¶€ë§Œ v4ë¡œ ë¼ìš°íŒ… ê°€ëŠ¥í•œì§€ í™•ì¸

- [ ] **Q4: í…œí”Œë¦¿ ë²„ì „ ê´€ë¦¬ ì •ì±…**

  - [ ] ë™ì¼ ë¬¸ì„œì—ì„œ ì—¬ëŸ¬ ë²„ì „ í…œí”Œë¦¿ ìœ ì§€í• ì§€
  - [ ] ì´ì „ ë²„ì „ ìë™ ì‚­ì œ or ë³´ê´€ ì •ì±…

- [ ] **Q5: ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ë²”ìœ„ ë° ë°©ë²•**

  - [ ] Phase 5 UX ë³€ê²½ í›„ ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ ê³„íš ìˆëŠ”ì§€
  - [ ] A/B í…ŒìŠ¤íŠ¸ í•„ìš” ì—¬ë¶€

- [ ] **Q6: Phase 5 ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ì •í™•í•œ íŒŒì¼ ìœ„ì¹˜**

  - [ ] í‰ê°€ ê²°ê³¼ í‘œì‹œ UI ì»´í¬ë„ŒíŠ¸ ê²½ë¡œ (ë¬¸ì„œì— "(ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ íƒìƒ‰ í•„ìš”)" ëª…ì‹œ)

- [ ] **Q7: LLM API ë¹„ìš© ì¦ê°€ ì˜ˆìƒì¹˜**
  - [ ] Regression Gate ì¶”ê°€ë¡œ ì¸í•œ OpenAI API í˜¸ì¶œ ì¦ê°€ëŸ‰
  - [ ] ì›”ê°„ ë¹„ìš© ì˜ˆì‚° í™•ì¸

---

## 5) ìµœì¢… ì˜ê²¬ (Conclusion Checklist)

### Confidence ì„ íƒ

- [ ] High
- [x] **Mid**
- [ ] Low

### Go/No-Go ì„ íƒ

- [ ] Ready to Build
- [x] **Review Required**

### ê²°ì • ê·¼ê±°

- [ ] ê¸°ì¡´ Pipeline v3 ì½”ë“œë² ì´ìŠ¤ê°€ ì˜ êµ¬ì¡°í™”ë˜ì–´ ìˆì–´ ì¦ë¶„ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥
- [ ] ê° Phaseë³„ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ëª…í™•í•˜ê²Œ ì •ì˜ë˜ì–´ ìˆìŒ
- [x] **Feature Flag / Kill Switch ëˆ„ë½** - ì¦‰ì‹œ ë¡¤ë°± ë¶ˆê°€ ìœ„í—˜
- [x] **ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ë¯¸ì‘ì„±** - ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ ì‹œ ë³µêµ¬ ì–´ë ¤ì›€
- [x] **Regression Gate ì„±ëŠ¥ ì˜í–¥ ë¯¸ê²€ì¦** - ë¹Œë“œ ì‹œê°„ ê¸‰ì¦ ê°€ëŠ¥ì„±
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¡´ì¬ í™•ì¸ë¨ (3ê°œ íŒŒì¼) - ê¸°ì¡´ ê¸°ëŠ¥ ë³´í˜¸ ê°€ëŠ¥

### ìµœì¢… ì™„ë£Œì¡°ê±´ (ë°°í¬ ì „ í•„ìˆ˜ í†µê³¼ ê²Œì´íŠ¸)

- [ ] Feature Flag `ENABLE_PIPELINE_V4` êµ¬í˜„ ì™„ë£Œ
- [ ] ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì— ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ í¬í•¨
- [ ] Regression Test 5ê°œ ì¼€ì´ìŠ¤ 100% í†µê³¼
- [ ] í…œí”Œë¦¿ ë¹Œë“œ ì‹œê°„ < 30ì´ˆ ê²€ì¦ ì™„ë£Œ
- [ ] Phase 1~5 ê° ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ
- [ ] Phase 6 E2E í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
