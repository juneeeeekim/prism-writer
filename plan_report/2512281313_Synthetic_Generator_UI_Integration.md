# 🧠 브레인스토밍: 합성 데이터 생성기 UI 통합

**일시**: 2025-12-28 13:13
**주제**: 합성 데이터 생성기(Synthetic Data Generator)의 반자동화 UI 통합
**참석자**: 디렉터(PM), 기술 리더, 주니어 개발자, UX/UI 전문가

---

## 1. 디렉터 요청 사항

### 🎯 핵심 요청

> "합성 데이터 생성기가 현재는 터미널에서 수동으로 실행해야 합니다. **반자동화**하고 싶습니다.
> 즉, 참고 자료에 데이터를 업로드하면 청킹 등의 작업은 진행되지만, 합성 데이터 생성은 자동인지 수동인지 알고 싶습니다.
> **만약 수동이라면, UI/UX에서 '500개 합성 데이터 생성' 버튼을 만들고 싶습니다.**"

---

## 2. 현재 시스템 분석 (As-Is)

### 📂 관련 파일 구조

```
frontend/src/
├── lib/raft/
│   └── syntheticDataGenerator.ts    # 핵심 로직 (generateSyntheticData)
├── app/api/raft/generate/
│   └── route.ts                     # API 엔드포인트 (POST /api/raft/generate)
└── scripts/
    └── collect_raft_data.ts         # CLI 스크립트 (터미널 실행용)
```

### 🔍 분석 결과

| 구분              | 현재 상태   | 설명                                   |
| :---------------- | :---------- | :------------------------------------- |
| **API 존재 여부** | ✅ 존재     | `POST /api/raft/generate`              |
| **UI 트리거**     | ❌ **없음** | 프론트엔드에서 호출하는 컴포넌트 없음  |
| **실행 방식**     | 수동 (CLI)  | `npx tsx scripts/collect_raft_data.ts` |
| **자동 트리거**   | ❌ 없음     | 문서 업로드 시 자동 실행 안 됨         |

### 🔐 현재 API 보안

```typescript
// api/raft/generate/route.ts
- Feature Flag: ENABLE_RAFT_FEATURES (기본값: 아마도 false)
- 관리자 인증: Bearer Token 필요 (개발 환경에서는 SKIP_RAFT_AUTH=true로 우회 가능)
- 일일 한도: 500개/일
- 배치 크기: 최대 50개/요청
```

---

## 3. 전문가 라운드 테이블

### 👨‍💻 기술 리더 (Tech Lead)

**결론**: **UI 통합 가능하며, 비교적 간단합니다.**

**분석**:

- 백엔드 API는 **이미 준비되어 있습니다** (`POST /api/raft/generate`).
- 프론트엔드에서 이 API를 호출하는 버튼과 상태 표시 UI만 추가하면 됩니다.
- **핵심 과제**:
  1.  `FEATURE_FLAGS.ENABLE_RAFT_FEATURES`가 `true`인지 확인
  2.  관리자 인증 처리 (관리자 전용 페이지에 배치 권장)
  3.  실행 중 로딩 상태 및 결과 피드백 UI

**제안 아키텍처**:

```
[관리자 페이지]
    └── [합성 데이터 생성 패널]
            ├── "생성 시작" 버튼
            ├── 생성 개수 입력 (기본 10, 최대 50)
            ├── 참고 자료 선택 (RAG Chunks)
            └── 결과 표시 (성공/실패 개수)
```

### 🎨 UX/UI 전문가

**결론**: 관리자 전용 기능으로 배치하되, **직관적이고 안전한 UI**가 필요합니다.

**제안**:

1.  **버튼 위치**: 관리자 설정 페이지 또는 "참고 자료" 탭 내부
2.  **버튼 디자인**:
    - 눈에 잘 띄지만 실수로 누르지 않도록 **2단계 확인** (예: "정말 생성하시겠습니까?")
    - 아이콘: ⚙️ 또는 🏭 (공장)
3.  **진행 상태**:
    - 프로그레스 바 또는 스피너
    - "10/50개 생성 중..." 실시간 텍스트
4.  **결과 피드백**:
    - ✅ 성공: "45개 Q&A 생성 완료!"
    - ❌ 실패: "3개 항목 실패 (사유: ...)"

### 🐣 주니어 개발자

**아이디어**: "업로드 후 자동 트리거"도 구현 가능합니다!

**제안**:

- 문서 업로드 시 "고급 옵션" 체크박스: `☑️ 업로드 완료 후 합성 데이터 자동 생성`
- 체크하면 업로드 → 청킹 → 합성 데이터 생성까지 자동으로 파이프라인 실행
- **단점**: API 비용 증가 가능 (사용자별 제한 필요)

---

## 4. 구현 옵션

### Option A: 수동 버튼 (권장, 안전)

| 항목            | 내용                                   |
| :-------------- | :------------------------------------- |
| **위치**        | 관리자 설정 페이지 또는 "참고 자료" 탭 |
| **트리거**      | 사용자가 버튼 클릭                     |
| **장점**        | 비용 제어, 명확한 의도                 |
| **단점**        | 수동 개입 필요                         |
| **구현 난이도** | ⭐⭐ (쉬움)                            |

### Option B: 반자동 (업로드 시 옵션)

| 항목            | 내용                                    |
| :-------------- | :-------------------------------------- |
| **위치**        | 파일 업로드 모달 내 체크박스            |
| **트리거**      | 업로드 완료 후 자동 실행 (옵션 선택 시) |
| **장점**        | 편리함, 워크플로우 통합                 |
| **단점**        | 비용 예측 어려움, 오남용 가능성         |
| **구현 난이도** | ⭐⭐⭐ (보통)                           |

### Option C: 완전 자동 (위험, 비권장)

| 항목            | 내용                                |
| :-------------- | :---------------------------------- |
| **트리거**      | 모든 업로드에서 자동 실행           |
| **장점**        | 최대 편의성                         |
| **단점**        | API 비용 폭증, 불필요한 데이터 생성 |
| **구현 난이도** | ⭐⭐⭐⭐ (어려움 - 제한 로직 필요)  |

---

## 5. 합의 결과 및 권장 사항

### ✅ 권장: **Option A (수동 버튼) 우선 구현**

**이유**:

1.  **비용 제어**: 관리자만 명시적으로 실행하므로 API 비용 예측 가능
2.  **안전성**: 실수로 인한 대량 생성 방지
3.  **빠른 구현**: API가 이미 존재하므로 UI만 추가하면 됨

**추후 확장**:

- Phase 2에서 Option B (업로드 시 옵션) 추가 검토

---

## 6. 구현 체크리스트 (Option A 기준)

### Phase 1: 기반 작업

- [ ] **P1-01**: `FEATURE_FLAGS.ENABLE_RAFT_FEATURES`를 `true`로 설정 (또는 조건부 활성화)
- [ ] **P1-02**: 관리자 페이지 존재 여부 확인 (없으면 생성)

### Phase 2: UI 컴포넌트 개발

- [ ] **P2-01**: `SyntheticDataPanel.tsx` 컴포넌트 생성

  - 생성 버튼
  - 개수 입력 (1~50)
  - 참고 자료 선택 (Optional: RAG Chunks 목록)
  - 결과 표시 영역

- [ ] **P2-02**: 관리자 페이지에 컴포넌트 배치

### Phase 3: API 연동

- [ ] **P3-01**: `POST /api/raft/generate` 호출 함수 작성
- [ ] **P3-02**: 인증 토큰 처리 (현재 사용자 세션 활용)
- [ ] **P3-03**: 로딩 상태 및 에러 핸들링

### Phase 4: 검증

- [ ] **P4-01**: Feature Flag 활성화 상태에서 버튼 클릭 테스트
- [ ] **P4-02**: 생성된 데이터가 `raft_dataset` 테이블에 저장되는지 확인
- [ ] **P4-03**: 일일 한도(500개) 초과 시 에러 메시지 확인

---

## 7. 예상 UI 목업

```
┌─────────────────────────────────────────────────────┐
│  ⚙️ 합성 데이터 생성 (RAFT Training Data)           │
├─────────────────────────────────────────────────────┤
│                                                     │
│  생성 개수: [___10___] 개  (최대 50개)              │
│                                                     │
│  참고 자료: [모든 청크 사용 ▼]                      │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  🏭 합성 데이터 생성 시작                    │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ───────────────────────────────────────────────   │
│  📊 오늘 생성량: 45 / 500                           │
│  ───────────────────────────────────────────────   │
│                                                     │
│  [최근 생성 기록]                                   │
│  • 2025-12-28 13:00 - 10개 생성 ✅                  │
│  • 2025-12-28 12:30 - 35개 생성 ✅                  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 8. 다음 단계 (Action Items)

1.  **디렉터 승인 필요**: Option A (수동 버튼) 방식으로 진행해도 괜찮으신가요?
2.  **관리자 페이지 위치 결정**: 어느 경로에 배치할지 (예: `/admin/raft` 또는 기존 설정 페이지)
3.  **구현 시작**: 승인 후 Phase 1부터 순차 진행
