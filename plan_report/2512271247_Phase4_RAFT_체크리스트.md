# Phase 4: RAFT íŒŒì¸íŠœë‹ ì¤€ë¹„ - ì²´í¬ë¦¬ìŠ¤íŠ¸

> **ì‘ì„±ì¼**: 2025-12-27  
> **ê¸°ë°˜ ë¬¸ì„œ**: `2512271245_Phase4_RAFT_ê°„ì„­ë¶„ì„_íšŒì˜.md`  
> **ë‹´ë‹¹ì**: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì, UX/UI ì „ë¬¸ê°€

---

## ğŸ“‹ íŒŒì¼ êµ¬ì„± ê²°ì •

**ê²°ì •: ë‹¨ì¼ íŒŒì¼ë¡œ í†µí•©**

| ê¸°ì¤€      | ë‹¨ì¼ íŒŒì¼                 | ë¶„ë¦¬ íŒŒì¼                |
| --------- | ------------------------- | ------------------------ |
| í˜‘ì—… íš¨ìœ¨ | âœ… ì „ì²´ ë§¥ë½ íŒŒì•… ìš©ì´    | âŒ íŒŒì¼ ê°„ ì´ë™ í•„ìš”     |
| ìœ ì§€ë³´ìˆ˜  | âœ… ì—°ê²°ì„± í•œëˆˆì— í™•ì¸     | âŒ ì°¸ì¡° ê´€ê³„ ì¶”ì  ì–´ë ¤ì›€ |
| ê²€ì¦ íš¨ìœ¨ | âœ… Phaseë³„ ë…ë¦½ ê²€ì¦ ê°€ëŠ¥ | âœ… ë™ì¼                  |
| ì§„í–‰ ì¶”ì  | âœ… ì „ì²´ ì§„í–‰ë¥  í•œëˆˆì—     | âŒ ì—¬ëŸ¬ íŒŒì¼ í™•ì¸ í•„ìš”   |

**ê·¼ê±°**: Phase 4ëŠ” DB â†’ API â†’ UI â†’ í•©ì„±ì´ ìˆœì°¨ì ìœ¼ë¡œ ì—°ê²°ë˜ë¯€ë¡œ, í•˜ë‚˜ì˜ ë¬¸ì„œì—ì„œ ì—°ê²°ì„±ì„ íŒŒì•…í•˜ê³  ì „ì²´ ì§„í–‰ ìƒí™©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.

---

## ğŸ¯ í’ˆì§ˆ ì²´í¬ ê¸°ì¤€

ëª¨ë“  ì½”ë“œ ì‘ì„± ì‹œ ë‹¤ìŒ ê¸°ì¤€ì„ ì ìš©í•©ë‹ˆë‹¤:

| ê¸°ì¤€              | í™•ì¸ í•­ëª©                                                          |
| ----------------- | ------------------------------------------------------------------ |
| **ì½”ë”© ìŠ¤íƒ€ì¼**   | ESLint/Prettier í†µê³¼, í”„ë¡œì íŠ¸ ê·œì¹™ ì¤€ìˆ˜                           |
| **ëª…í™•í•œ ë„¤ì´ë°** | í•¨ìˆ˜ëª…: `ë™ì‚¬+ëª…ì‚¬`, ë³€ìˆ˜ëª…: `camelCase`, ìƒìˆ˜: `UPPER_SNAKE_CASE` |
| **ì—ëŸ¬ ì²˜ë¦¬**     | try-catch ë¸”ë¡, ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€, ì½˜ì†” ë¡œê¹…               |
| **ì„±ëŠ¥**          | ê³¼ë„í•œ ë°˜ë³µë¬¸ ì—†ìŒ, ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€, ë©”ëª¨ì´ì œì´ì…˜ ì ìš©      |
| **ì ‘ê·¼ì„±**        | aria-label, title ì†ì„±, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›                     |

---

## Phase 4-A: ë°ì´í„°ë² ì´ìŠ¤ (DB)

### âš ï¸ ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥                          | íŒŒì¼                                  | ì˜í–¥ ê°€ëŠ¥ì„±           |
| ----------------------------- | ------------------------------------- | --------------------- |
| hallucination_feedback í…Œì´ë¸” | `038_hallucination_feedback.sql`      | ğŸŸ¢ ë‚®ìŒ (ë…ë¦½ í…Œì´ë¸”) |
| í”¼ë“œë°± API                    | `api/feedback/hallucination/route.ts` | ğŸŸ¢ ë‚®ìŒ (ìˆ˜ì • ì—†ìŒ)   |
| ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì¿¼ë¦¬          | `app/admin/feedback/page.tsx`         | ğŸŸ¢ ë‚®ìŒ (ë³„ë„ ì¿¼ë¦¬)   |

---

### 4-A-1: RAFT ë°ì´í„°ì…‹ í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„±

- [ ] **íŒŒì¼ ìƒì„±**: `backend/migrations/039_raft_dataset.sql`
- [ ] **í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì •ì˜**
  ```sql
  CREATE TABLE raft_dataset (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_query TEXT NOT NULL,
    context TEXT NOT NULL,           -- RAG ê²€ìƒ‰ ê²°ê³¼ (ì°¸ê³  ìë£Œ)
    gold_answer TEXT NOT NULL,       -- ì •ë‹µ (ì°¸ê³  ìë£Œ ì¸ìš©)
    bad_answer TEXT,                 -- ì˜¤ë‹µ ì˜ˆì‹œ (ì„ íƒ)
    source TEXT NOT NULL CHECK (source IN ('synthetic', 'user_feedback', 'manual', 'ab_test')),
    verified BOOLEAN DEFAULT FALSE,
    original_feedback_id UUID,       -- ì›ë³¸ í”¼ë“œë°± ì°¸ì¡° (NULL í—ˆìš©)
    model_id TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```
- [ ] **ì¸ë±ìŠ¤ ìƒì„±**
  - [ ] `idx_raft_dataset_source` ON (source)
  - [ ] `idx_raft_dataset_verified` ON (verified)
  - [ ] `idx_raft_dataset_created` ON (created_at DESC)
- [ ] **RLS ì •ì±… ì„¤ì •**
  - [ ] `ENABLE ROW LEVEL SECURITY`
  - [ ] `service_role` ì „ì²´ ì ‘ê·¼ ì •ì±…
- [ ] **ì£¼ì„ ì¶”ê°€**: í…Œì´ë¸” ëª©ì , ê° ì»¬ëŸ¼ ì„¤ëª…
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] ì»¬ëŸ¼ëª… ëª…í™•í•¨ (snake_case)
  - [ ] NOT NULL ì œì•½ì¡°ê±´ ì ì ˆí•¨
  - [ ] CHECK ì œì•½ì¡°ê±´ìœ¼ë¡œ source ê°’ ì œí•œ

> **ì—°ê²°ì„±**: ì´ í…Œì´ë¸”ì€ Phase 4-Bì˜ APIì—ì„œ ì°¸ì¡°ë©ë‹ˆë‹¤.

---

### 4-A-2: Supabaseì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰

- [ ] **Supabase Dashboard** ì ‘ì†
- [ ] **SQL Editor** â†’ New Query
- [ ] `039_raft_dataset.sql` ë‚´ìš© ë¶™ì—¬ë„£ê¸°
- [ ] **Run** ì‹¤í–‰
- [ ] **í™•ì¸ ì¿¼ë¦¬** ì‹¤í–‰:
  ```sql
  SELECT * FROM raft_dataset LIMIT 1;
  ```
- [ ] RLS ì •ì±… í™•ì¸:
  ```sql
  SELECT * FROM pg_policies WHERE tablename = 'raft_dataset';
  ```

---

### âœ… Phase 4-A ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Syntax ì˜¤ë¥˜ í™•ì¸: SQL ë¬¸ë²• ì˜¤ë¥˜ ì—†ìŒ
- [ ] í…Œì´ë¸” ìƒì„± í™•ì¸: `SELECT * FROM raft_dataset LIMIT 1;` â†’ Success
- [ ] RLS ì •ì±… í™•ì¸: service_role ì •ì±… ì¡´ì¬
- [ ] ì¸ë±ìŠ¤ í™•ì¸: 3ê°œ ì¸ë±ìŠ¤ ìƒì„±ë¨
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ: hallucination_feedback í…Œì´ë¸” ì˜í–¥ ì—†ìŒ

---

## Phase 4-B: API ì—”ë“œí¬ì¸íŠ¸

### âš ï¸ ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥                | íŒŒì¼                                  | ì˜í–¥ ê°€ëŠ¥ì„±         |
| ------------------- | ------------------------------------- | ------------------- |
| í”¼ë“œë°± API          | `api/feedback/hallucination/route.ts` | ğŸŸ¢ ë‚®ìŒ (ìˆ˜ì • ì—†ìŒ) |
| Chat API            | `api/chat/route.ts`                   | ğŸŸ¢ ë‚®ìŒ (ìˆ˜ì • ì—†ìŒ) |
| Supabase í´ë¼ì´ì–¸íŠ¸ | `lib/supabase/client.ts`              | ğŸŸ¢ ë‚®ìŒ (ê¸°ì¡´ ì‚¬ìš©) |

---

### 4-B-1: RAFT ë°ì´í„°ì…‹ API ìƒì„±

- [ ] **íŒŒì¼ ìƒì„±**: `frontend/src/app/api/raft/dataset/route.ts`
- [ ] **GET í•¸ë“¤ëŸ¬ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `export async function GET(request: Request)`
  - [ ] ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°: `source`, `verified`, `limit`, `offset`
  - [ ] Supabase ì¿¼ë¦¬ ì‘ì„±
  - [ ] ì—ëŸ¬ ì²˜ë¦¬: try-catch, 500 ì—ëŸ¬ ë°˜í™˜
  - [ ] ì‘ë‹µ í˜•ì‹: `{ data: [], count: number }`
- [ ] **POST í•¸ë“¤ëŸ¬ êµ¬í˜„** (í”¼ë“œë°± â†’ RAFT ë³€í™˜)
  - [ ] í•¨ìˆ˜ëª…: `export async function POST(request: Request)`
  - [ ] ìš”ì²­ ë°”ë”” ê²€ì¦: `userQuery`, `context`, `goldAnswer` í•„ìˆ˜
  - [ ] `source` ê°’ ê²€ì¦
  - [ ] Supabase INSERT ì¿¼ë¦¬
  - [ ] ì—ëŸ¬ ì²˜ë¦¬: 400 (ê²€ì¦ ì‹¤íŒ¨), 500 (DB ì˜¤ë¥˜)
  - [ ] ì‘ë‹µ í˜•ì‹: `{ success: true, id: string }`
- [ ] **DELETE í•¸ë“¤ëŸ¬ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `export async function DELETE(request: Request)`
  - [ ] `id` íŒŒë¼ë¯¸í„° ê²€ì¦
  - [ ] Supabase DELETE ì¿¼ë¦¬
  - [ ] ì—ëŸ¬ ì²˜ë¦¬: 404 (ì°¾ì„ ìˆ˜ ì—†ìŒ), 500 (DB ì˜¤ë¥˜)
- [ ] **ì£¼ì„ ì¶”ê°€**: API ëª©ì , ê° í•¸ë“¤ëŸ¬ ì„¤ëª…
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] ESLint í†µê³¼
  - [ ] í•¨ìˆ˜ëª… ëª…í™•í•¨ (`GET`, `POST`, `DELETE`)
  - [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¡´ì¬
  - [ ] íƒ€ì… ì •ì˜ ì™„ë£Œ

> **ì—°ê²°ì„±**: Phase 4-Aì˜ `raft_dataset` í…Œì´ë¸” ì‚¬ìš©. Phase 4-Cì˜ UIì—ì„œ í˜¸ì¶œ.

---

### 4-B-2: LLM í•©ì„± ë°ì´í„° ìƒì„± API ìƒì„±

- [ ] **íŒŒì¼ ìƒì„±**: `frontend/src/app/api/raft/generate/route.ts`
- [ ] **POST í•¸ë“¤ëŸ¬ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `export async function POST(request: Request)`
  - [ ] ìš”ì²­ ë°”ë””: `documentChunks` (ì°¸ê³  ìë£Œ ë°°ì—´), `count` (ìƒì„± ê°œìˆ˜)
  - [ ] LLM í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì •ì˜
    ```
    ë‹¤ìŒ ì°¸ê³  ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ Q&A ìŒì„ ìƒì„±í•´ì£¼ì„¸ìš”:
    - ì§ˆë¬¸: ì°¸ê³  ìë£Œ ë‚´ìš©ì„ ë¬»ëŠ” ì§ˆë¬¸
    - ì •ë‹µ: ì°¸ê³  ìë£Œë¥¼ ì¸ìš©í•˜ì—¬ ë‹µë³€
    ```
  - [ ] LLM API í˜¸ì¶œ (generateText ì‚¬ìš©)
  - [ ] ìƒì„±ëœ ë°ì´í„° íŒŒì‹± (JSON)
  - [ ] `raft_dataset` í…Œì´ë¸”ì— ì €ì¥ (source: 'synthetic')
  - [ ] ì—ëŸ¬ ì²˜ë¦¬: LLM ì˜¤ë¥˜, íŒŒì‹± ì˜¤ë¥˜
  - [ ] ì‘ë‹µ í˜•ì‹: `{ success: true, generated: number }`
- [ ] **ë°°ì¹˜ ì œí•œ**: ìµœëŒ€ 50ê°œ/ìš”ì²­
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] LLM ì‘ë‹µ ê¸¸ì´ ê²€ì¦ (ìµœì†Œ 100ì)
  - [ ] JSON íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬
  - [ ] íƒ€ì„ì•„ì›ƒ ì„¤ì • (30ì´ˆ)

> **ì—°ê²°ì„±**: Phase 4-Aì˜ `raft_dataset` í…Œì´ë¸” ì‚¬ìš©. ê¸°ì¡´ LLM ìœ í‹¸ í•¨ìˆ˜ ì¬ì‚¬ìš©.

---

### 4-B-3: íƒ€ì… ì •ì˜ íŒŒì¼ ìƒì„±

- [ ] **íŒŒì¼ ìƒì„±**: `frontend/src/types/raft.ts`
- [ ] **íƒ€ì… ì •ì˜**

  ```typescript
  export interface RAFTDatasetEntry {
    id: string;
    userQuery: string;
    context: string;
    goldAnswer: string;
    badAnswer?: string;
    source: "synthetic" | "user_feedback" | "manual" | "ab_test";
    verified: boolean;
    originalFeedbackId?: string;
    modelId?: string;
    createdAt: string;
    updatedAt: string;
  }

  export interface RAFTGenerateRequest {
    documentChunks: Array<{ title: string; content: string }>;
    count: number;
  }

  export interface RAFTGenerateResponse {
    success: boolean;
    generated: number;
    errors?: string[];
  }
  ```

---

### âœ… Phase 4-B ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Syntax ì˜¤ë¥˜ í™•ì¸: `npx tsc --noEmit` â†’ 0 errors
- [ ] API í…ŒìŠ¤íŠ¸:
  - [ ] `GET /api/raft/dataset` â†’ 200 OK (ë¹ˆ ë°°ì—´)
  - [ ] `POST /api/raft/dataset` â†’ 201 Created
  - [ ] `DELETE /api/raft/dataset?id=xxx` â†’ 200 OK
- [ ] LLM ìƒì„± í…ŒìŠ¤íŠ¸:
  - [ ] `POST /api/raft/generate` â†’ ìƒì„± ì„±ê³µ í™•ì¸
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ:
  - [ ] `/api/feedback/hallucination` â†’ ì •ìƒ
  - [ ] `/api/chat` â†’ ì •ìƒ

---

## Phase 4-C: UI ì»´í¬ë„ŒíŠ¸

### âš ï¸ ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥                   | íŒŒì¼                          | ì˜í–¥ ê°€ëŠ¥ì„±         |
| ---------------------- | ----------------------------- | ------------------- |
| ê´€ë¦¬ì í”¼ë“œë°± ëŒ€ì‹œë³´ë“œ | `app/admin/feedback/page.tsx` | ğŸŸ¡ ì¤‘ê°„ (ê¸°ëŠ¥ ì¶”ê°€) |
| FeedbackCard ì»´í¬ë„ŒíŠ¸  | ë™ì¼ íŒŒì¼ ë‚´                  | ğŸŸ¡ ì¤‘ê°„ (ë²„íŠ¼ ì¶”ê°€) |
| í”¼ë“œë°± ëª©ë¡ ìŠ¤íƒ€ì¼     | ë™ì¼ íŒŒì¼ ë‚´                  | ğŸŸ¢ ë‚®ìŒ             |

---

### 4-C-1: FeedbackCard ì»´í¬ë„ŒíŠ¸ í™•ì¥

- [ ] **íŒŒì¼ ìˆ˜ì •**: `frontend/src/app/admin/feedback/page.tsx`
- [ ] **ìœ„ì¹˜**: `FeedbackCard` í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
- [ ] **RAFT ì €ì¥ ë²„íŠ¼ ì¶”ê°€**
  - [ ] ë²„íŠ¼ ìœ„ì¹˜: ê¸°ì¡´ "ì ‘ê¸°/í¼ì¹˜ê¸°" ë²„íŠ¼ ì˜†
  - [ ] ë²„íŠ¼ í…ìŠ¤íŠ¸: "ğŸ“¥ RAFT ì €ì¥"
  - [ ] í´ë¦­ í•¸ë“¤ëŸ¬: `handleSaveToRAFT(feedback.id)`
  - [ ] aria-label: "RAFT ë°ì´í„°ì…‹ì— ì €ì¥"
- [ ] **RAFT ì €ì¥ë¨ ë°°ì§€ ì¶”ê°€**
  - [ ] ì¡°ê±´: `feedback.raft_saved === true`
  - [ ] ë°°ì§€ ìŠ¤íƒ€ì¼: `bg-purple-100 text-purple-700`
  - [ ] í…ìŠ¤íŠ¸: "ğŸ“¦ RAFT"
- [ ] **í™•ì¸ ëª¨ë‹¬ êµ¬í˜„**
  - [ ] ìƒíƒœ: `showConfirmModal`, `selectedFeedbackId`
  - [ ] ëª¨ë‹¬ ë‚´ìš©: "ì´ í”¼ë“œë°±ì„ RAFT ë°ì´í„°ì…‹ì— ì €ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
  - [ ] ë²„íŠ¼: "ì €ì¥", "ì·¨ì†Œ"
  - [ ] z-index: z-50 ì´ìƒ
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] aria-label ì¡´ì¬
  - [ ] í‚¤ë³´ë“œ ì ‘ê·¼ì„± (Enter/Escape)
  - [ ] ë²„íŠ¼ ì •ë ¬ flex ìœ ì§€

> **ì—°ê²°ì„±**: Phase 4-Bì˜ `POST /api/raft/dataset` API í˜¸ì¶œ.

---

### 4-C-2: RAFT ê´€ë¦¬ í˜ì´ì§€ ìƒì„±

- [ ] **íŒŒì¼ ìƒì„±**: `frontend/src/app/admin/raft/page.tsx`
- [ ] **í˜ì´ì§€ êµ¬ì¡°**
  - [ ] í—¤ë”: "ğŸ“¦ RAFT ë°ì´í„°ì…‹ ê´€ë¦¬"
  - [ ] í†µê³„ ì¹´ë“œ: ì „ì²´ / ê²€ì¦ë¨ / í•©ì„± / í”¼ë“œë°± ê¸°ë°˜
  - [ ] í•„í„°: source ë³„, verified ë³„
  - [ ] ë°ì´í„° ëª©ë¡: í…Œì´ë¸” ë˜ëŠ” ì¹´ë“œ í˜•ì‹
- [ ] **í•©ì„± ë°ì´í„° ìƒì„± UI**
  - [ ] ë²„íŠ¼: "ğŸ¤– í•©ì„± ë°ì´í„° ìƒì„±"
  - [ ] ëª¨ë‹¬: ìƒì„± ê°œìˆ˜ ì…ë ¥ (ê¸°ë³¸ 10, ìµœëŒ€ 50)
  - [ ] ì§„í–‰ ìƒíƒœ í‘œì‹œ (ë¡œë”© ìŠ¤í”¼ë„ˆ)
- [ ] **ë°ì´í„°ì…‹ ë‚´ë³´ë‚´ê¸°**
  - [ ] ë²„íŠ¼: "ğŸ“¤ JSON ë‚´ë³´ë‚´ê¸°"
  - [ ] ê¸°ëŠ¥: ì „ì²´ ë°ì´í„°ì…‹ JSON ë‹¤ìš´ë¡œë“œ
- [ ] **ê²€ì¦ í† ê¸€**
  - [ ] ê° í•­ëª©ì— "âœ… ê²€ì¦ë¨" í† ê¸€ ìŠ¤ìœ„ì¹˜
  - [ ] API í˜¸ì¶œ: `PATCH /api/raft/dataset/{id}`
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ
  - [ ] ë¹ˆ ìƒíƒœ UI (ë°ì´í„° ì—†ìŒ)
  - [ ] ì—ëŸ¬ ìƒíƒœ UI
  - [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

> **ì—°ê²°ì„±**: Phase 4-Bì˜ ëª¨ë“  API ì‚¬ìš©. Phase 4-Aì˜ í…Œì´ë¸” ë°ì´í„° í‘œì‹œ.

---

### 4-C-3: ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ ì¶”ê°€

- [ ] **íŒŒì¼ ìˆ˜ì •**: ê´€ë¦¬ì ì‚¬ì´ë“œë°”/í—¤ë” (í•´ë‹¹ íŒŒì¼ í™•ì¸ í•„ìš”)
- [ ] **ë§í¬ ì¶”ê°€**: `/admin/raft` â†’ "RAFT ë°ì´í„°ì…‹"
- [ ] **ì•„ì´ì½˜**: ğŸ“¦ ë˜ëŠ” ì ì ˆí•œ ì•„ì´ì½˜

---

### âœ… Phase 4-C ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Syntax ì˜¤ë¥˜ í™•ì¸: `npx tsc --noEmit` â†’ 0 errors
- [ ] ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸:
  - [ ] `/admin/feedback` â†’ RAFT ì €ì¥ ë²„íŠ¼ í‘œì‹œë¨
  - [ ] RAFT ì €ì¥ í´ë¦­ â†’ í™•ì¸ ëª¨ë‹¬ í‘œì‹œë¨
  - [ ] ì €ì¥ í›„ â†’ "RAFT" ë°°ì§€ í‘œì‹œë¨
  - [ ] `/admin/raft` â†’ í˜ì´ì§€ ì •ìƒ ë¡œë“œ
  - [ ] í•©ì„± ë°ì´í„° ìƒì„± â†’ ë™ì‘ í™•ì¸
- [ ] ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸:
  - [ ] í‚¤ë³´ë“œë§Œìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸° ê°€ëŠ¥ (Escape)
  - [ ] ë²„íŠ¼ì— aria-label ì¡´ì¬
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ:
  - [ ] `/admin/feedback` ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ

---

## Phase 4-D: í•©ì„± ë°ì´í„° ìƒì„± ëª¨ë“ˆ

### âš ï¸ ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥     | íŒŒì¼       | ì˜í–¥ ê°€ëŠ¥ì„±                |
| -------- | ---------- | -------------------------- |
| LLM ìœ í‹¸ | `lib/llm/` | ğŸŸ¢ ë‚®ìŒ (ê¸°ì¡´ í•¨ìˆ˜ ì¬ì‚¬ìš©) |
| RAG ê²€ìƒ‰ | `lib/rag/` | ğŸŸ¢ ë‚®ìŒ (ê¸°ì¡´ í•¨ìˆ˜ ì¬ì‚¬ìš©) |

---

### 4-D-1: í•©ì„± ë°ì´í„° ìƒì„±ê¸° ëª¨ë“ˆ ìƒì„±

- [ ] **íŒŒì¼ ìƒì„±**: `frontend/src/lib/raft/syntheticDataGenerator.ts`
- [ ] **í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì •ì˜**

  ```typescript
  const GENERATION_PROMPT = `
  # ì—­í• 
  ë‹¹ì‹ ì€ ê¸€ì“°ê¸° êµìœ¡ Q&A ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
  
  # ì°¸ê³  ìë£Œ
  {context}
  
  # ì‘ì—…
  ìœ„ ì°¸ê³  ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ {count}ê°œì˜ Q&A ìŒì„ ìƒì„±í•´ì£¼ì„¸ìš”.
  
  # ì¶œë ¥ í˜•ì‹ (JSON)
  [
    {
      "question": "ê¸€ì“°ê¸°ì—ì„œ ë…ì ë¶„ì„ì´ ì¤‘ìš”í•œ ì´ìœ ëŠ”?",
      "answer": "ì°¸ê³  ìë£Œì— ë”°ë¥´ë©´, ë…ì ë¶„ì„ì€..."
    }
  ]
  `;
  ```

- [ ] **ìƒì„± í•¨ìˆ˜ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `generateSyntheticData`
  - [ ] ë§¤ê°œë³€ìˆ˜: `context: string`, `count: number`
  - [ ] ë°˜í™˜ê°’: `Promise<Array<{ question: string, answer: string }>>`
  - [ ] LLM API í˜¸ì¶œ
  - [ ] JSON íŒŒì‹± ë° ê²€ì¦
  - [ ] ì—ëŸ¬ ì²˜ë¦¬: íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- [ ] **ë°°ì¹˜ ìƒì„± í•¨ìˆ˜ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `generateBatch`
  - [ ] ë§¤ê°œë³€ìˆ˜: `chunks: Array<{ content: string }>`, `countPerChunk: number`
  - [ ] ê° chunkë³„ë¡œ ìƒì„± í›„ ë³‘í•©
  - [ ] ì¤‘ë³µ ì œê±° (question ê¸°ì¤€)
- [ ] **í’ˆì§ˆ ê²€ì¦ í•¨ìˆ˜ êµ¬í˜„**
  - [ ] í•¨ìˆ˜ëª…: `validateGeneratedData`
  - [ ] ê²€ì¦: question ê¸¸ì´ (10ì ì´ìƒ), answer ê¸¸ì´ (50ì ì´ìƒ)
  - [ ] ê²€ì¦: answerì— ì°¸ê³  ìë£Œ í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€
- [ ] **ì£¼ì„ ì¶”ê°€**: ëª¨ë“ˆ ëª©ì , ê° í•¨ìˆ˜ ì„¤ëª…
- [ ] **í’ˆì§ˆ ì²´í¬**:
  - [ ] í•¨ìˆ˜ëª… ëª…í™•í•¨
  - [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¡´ì¬
  - [ ] íƒ€ì… ì •ì˜ ì™„ë£Œ

---

### 4-D-2: ì°¸ê³  ìë£Œ ìˆ˜ì§‘ í•¨ìˆ˜ êµ¬í˜„

- [ ] **íŒŒì¼ ìˆ˜ì •**: `frontend/src/lib/raft/syntheticDataGenerator.ts`
- [ ] **í•¨ìˆ˜ ì¶”ê°€**: `getDocumentChunksForGeneration`
  - [ ] Supabaseì—ì„œ document_chunks ì¡°íšŒ
  - [ ] ì¡°ê±´: content ê¸¸ì´ 500ì ì´ìƒ
  - [ ] ì œí•œ: ìµœëŒ€ 100ê°œ
  - [ ] ëœë¤ ìƒ˜í”Œë§ ì˜µì…˜

---

### âœ… Phase 4-D ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Syntax ì˜¤ë¥˜ í™•ì¸: `npx tsc --noEmit` â†’ 0 errors
- [ ] ìœ ë‹› í…ŒìŠ¤íŠ¸ (ì„ íƒ):
  - [ ] `validateGeneratedData` í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
  - [ ] JSON íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸:
  - [ ] `/admin/raft`ì—ì„œ í•©ì„± ìƒì„± ì‹¤í–‰
  - [ ] ìƒì„±ëœ ë°ì´í„° í’ˆì§ˆ í™•ì¸ (ìˆ˜ë™)
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ:
  - [ ] LLM ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ
  - [ ] RAG ê²€ìƒ‰ ì˜í–¥ ì—†ìŒ

---

## ğŸ“Š ìµœì¢… ê²€ì¦ (ì „ì²´ Phase)

### ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸

- [ ] Phase 4-A ì™„ë£Œ í›„ Phase 4-B ì§„í–‰ ê°€ëŠ¥
- [ ] Phase 4-B ì™„ë£Œ í›„ Phase 4-C ì§„í–‰ ê°€ëŠ¥
- [ ] Phase 4-C ì™„ë£Œ í›„ Phase 4-D ì§„í–‰ ê°€ëŠ¥
- [ ] ì „ì²´ íë¦„ í…ŒìŠ¤íŠ¸:
  1. [ ] í”¼ë“œë°± ìˆ˜ì§‘ â†’ RAFT ì €ì¥
  2. [ ] í•©ì„± ë°ì´í„° ìƒì„± â†’ RAFT ì €ì¥
  3. [ ] RAFT ë°ì´í„°ì…‹ ë‚´ë³´ë‚´ê¸° (JSON)

### ê¸°ì¡´ ê¸°ëŠ¥ íšŒê·€ í…ŒìŠ¤íŠ¸

- [ ] `/admin/feedback` ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ
- [ ] Chat ê¸°ëŠ¥ ì •ìƒ
- [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì •ìƒ
- [ ] ì°¸ê³  ìë£Œ ì—…ë¡œë“œ ì •ìƒ

---

## ğŸ“ˆ ì§„í–‰ ìƒí™© ì¶”ì 

| Phase            | ìƒíƒœ    | ì™„ë£Œì¼ |
| ---------------- | ------- | ------ |
| Phase 4-A (DB)   | â³ ëŒ€ê¸° | -      |
| Phase 4-B (API)  | â³ ëŒ€ê¸° | -      |
| Phase 4-C (UI)   | â³ ëŒ€ê¸° | -      |
| Phase 4-D (í•©ì„±) | â³ ëŒ€ê¸° | -      |

---

> **ë‹¤ìŒ ë‹¨ê³„**: ë””ë ‰í„°ë‹˜ ìŠ¹ì¸ í›„ Phase 4-Aë¶€í„° ìˆœì°¨ ì§„í–‰
