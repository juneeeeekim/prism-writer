# P4: Adaptive Threshold System (ì ì‘í˜• ì„ê³„ê°’ ì‹œìŠ¤í…œ)

> **ë¬¸ì„œ ID**: 2601062103
> **ì‘ì„±ì¼**: 2026-01-06
> **ìƒíƒœ**: ì„¤ê³„ ê²€í†  ì¤‘
> **ì—°ê´€ ê¸°ëŠ¥**: P3-02 Self-RAG Groundedness Check

---

## ğŸ“‹ Executive Summary

ì‚¬ìš©ìì˜ ì‹¤ì‹œê°„ í”¼ë“œë°±ì„ ê¸°ë°˜ìœ¼ë¡œ RAG íŒŒì´í”„ë¼ì¸ì˜ ì„ê³„ê°’ì„ **ê°œì¸í™”**í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ìœ íŠœë¸Œ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì²˜ëŸ¼ ì‚¬ìš©ì ì„ í˜¸ë„ë¥¼ í•™ìŠµí•˜ì—¬ í• ë£¨ì‹œë„¤ì´ì…˜ ê°ì§€ ë¯¼ê°ë„ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.

---

## ğŸ‘¥ ì „ë¬¸ê°€ ìë¬¸ë‹¨

### ğŸ§  ML/ì¶”ì²œì‹œìŠ¤í…œ ì „ë¬¸ê°€ - Dr. Alex Kim

> ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” ì¶”ì²œ ì‹œìŠ¤í…œê³¼ ê°œì¸í™” ì•Œê³ ë¦¬ì¦˜ì„ 10ë…„ê°„ ì—°êµ¬í•´ì˜¨ Alexì…ë‹ˆë‹¤.
> Netflix, Spotify ë“±ì˜ ì¶”ì²œ ì—”ì§„ê³¼ ìœ ì‚¬í•œ **Collaborative Filtering** ë° **Contextual Bandit** ê¸°ë²•ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì¡°ì–¸**:

1. **Cold Start ë¬¸ì œ í•´ê²°**: ì‹ ê·œ ì‚¬ìš©ìëŠ” ì „ì²´ ì‚¬ìš©ì í‰ê· ê°’ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”
2. **í•™ìŠµë¥ (Learning Rate)**: ë„ˆë¬´ ë¹ ë¥´ë©´ ë¶ˆì•ˆì •, ë„ˆë¬´ ëŠë¦¬ë©´ íš¨ê³¼ ì—†ìŒ â†’ `Î± = 0.1` ê¶Œì¥
3. **Decay Factor**: ì˜¤ë˜ëœ í”¼ë“œë°±ì˜ ê°€ì¤‘ì¹˜ë¥¼ ë‚®ì¶”ëŠ” ì‹œê°„ ê°ì‡  ì ìš©

```python
# ì§€ìˆ˜ ì´ë™ í‰ê·  (EMA) ê¸°ë°˜ ì„ê³„ê°’ ì¡°ì •
new_threshold = Î± * feedback_signal + (1 - Î±) * old_threshold
```

---

### ğŸ¨ UX/UI ì „ë¬¸ê°€ - Sarah Park

> ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” ì‚¬ìš©ì ê²½í—˜ ë””ìì¸ ì „ë¬¸ê°€ Sarahì…ë‹ˆë‹¤.
> Google, Microsoftì—ì„œ í”¼ë“œë°± ì‹œìŠ¤í…œ UIë¥¼ ì„¤ê³„í•œ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤.

**ì¡°ì–¸**:

1. **í”¼ë“œë°± í”¼ë¡œë„ ìµœì†Œí™”**: ëª¨ë“  ë‹µë³€ì— í”¼ë“œë°± ìš”ì²­ X â†’ ì¤‘ìš”í•œ ìˆœê°„ì—ë§Œ
2. **ë§ˆì´í¬ë¡œ ì¸í„°ë™ì…˜**: ğŸ‘ğŸ‘ ë²„íŠ¼ì€ ë‹µë³€ ëì— ìì—°ìŠ¤ëŸ½ê²Œ ë°°ì¹˜
3. **íˆ¬ëª…ì„±**: "ì´ ë‹µë³€ì„ ê°œì„ í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤" íˆ´íŒ ì œê³µ

```
[ë‹µë³€ ë‚´ìš©...]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì´ ë‹µë³€ì´ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?
  [ğŸ‘ ë„ì›€ë¨]  [ğŸ‘ ì•„ë‹ˆìš”]  [ğŸš¨ í‹€ë¦° ì •ë³´]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

### ğŸ” ë°±ì—”ë“œ/ë°ì´í„° ì—”ì§€ë‹ˆì–´ - James Lee

> ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” ëŒ€ê·œëª¨ ì‚¬ìš©ì ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì„¤ê³„ ê²½í—˜ì´ ìˆëŠ” Jamesì…ë‹ˆë‹¤.
> ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°ê³¼ ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ëª¨ë‘ ê³ ë ¤í•œ ì•„í‚¤í…ì²˜ë¥¼ ì œì•ˆë“œë¦½ë‹ˆë‹¤.

**ì¡°ì–¸**:

1. **ì‹¤ì‹œê°„ vs ë°°ì¹˜**: ì¦‰ê° ë°˜ì˜(ì‹¤ì‹œê°„)ê³¼ ì¼ê´„ ë¶„ì„(ë°°ì¹˜) í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ
2. **ë°ì´í„° í”„ë¼ì´ë²„ì‹œ**: í”¼ë“œë°± ë°ì´í„°ëŠ” ê°œì¸ ì‹ë³„ ë¶ˆê°€í•˜ê²Œ ìµëª…í™”
3. **Fallback**: DB ì¥ì•  ì‹œ ê¸°ë³¸ ì„ê³„ê°’ìœ¼ë¡œ ìë™ ì „í™˜

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘ ë„ì›€ë¨   â”‚  â”‚ ğŸ‘ ì•„ë‹ˆìš”  â”‚  â”‚ ğŸš¨ í‹€ë¦° ì •ë³´ (ìƒì„¸ ì…ë ¥) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                      â”‚
          â–¼                â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API: /api/rag/feedback                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. í”¼ë“œë°± ì €ì¥ (rag_feedback_logs)                         â”‚ â”‚
â”‚  â”‚ 2. ì„ê³„ê°’ ê³„ì‚° (EMA ì•Œê³ ë¦¬ì¦˜)                              â”‚ â”‚
â”‚  â”‚ 3. ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ (user_rag_preferences)           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Self-RAG Pipeline                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ verifyGroundedness(answer, docs, {                         â”‚ â”‚
â”‚  â”‚   groundednessThreshold: getUserThreshold(userId) // ê°œì¸í™”â”‚ â”‚
â”‚  â”‚ })                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

> [!IMPORTANT] > **í”„ë¡œì íŠ¸ ê²©ë¦¬ ì›ì¹™**: í•™ìŠµ ì„ê³„ê°’ì€ **í”„ë¡œì íŠ¸ ë‹¨ìœ„**ë¡œ ë¶„ë¦¬ë©ë‹ˆë‹¤.
> A í”„ë¡œì íŠ¸ì˜ í•™ìŠµì´ B í”„ë¡œì íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 1. project_rag_preferences (í”„ë¡œì íŠ¸ë³„ ì„ê³„ê°’) â­ ìˆ˜ì •ë¨

| ì»¬ëŸ¼                   | íƒ€ì…      | ê¸°ë³¸ê°’ | ì„¤ëª…               |
| ---------------------- | --------- | ------ | ------------------ |
| **id**                 | UUID (PK) | -      | ë ˆì½”ë“œ ID          |
| **user_id**            | UUID (FK) | -      | ì‚¬ìš©ì ID          |
| **project_id**         | UUID (FK) | -      | **í”„ë¡œì íŠ¸ ID** â­ |
| groundedness_threshold | FLOAT     | 0.7    | ê·¼ê±° ê²€ì¦ ì„ê³„ê°’   |
| critique_threshold     | FLOAT     | 0.6    | ê´€ë ¨ë„ í‰ê°€ ì„ê³„ê°’ |
| retrieval_threshold    | FLOAT     | 0.5    | ê²€ìƒ‰ í•„ìš”ë„ ì„ê³„ê°’ |
| feedback_count         | INT       | 0      | ì´ í”¼ë“œë°± ìˆ˜       |
| positive_ratio         | FLOAT     | 0.5    | ê¸ì • í”¼ë“œë°± ë¹„ìœ¨   |
| created_at             | TIMESTAMP | now()  | ìƒì„±ì¼             |
| updated_at             | TIMESTAMP | now()  | ìˆ˜ì •ì¼             |

**Unique Constraint**: `(user_id, project_id)` - ì‚¬ìš©ì+í”„ë¡œì íŠ¸ ì¡°í•©ë‹¹ í•˜ë‚˜ì˜ ì„¤ì •

```sql
CREATE TABLE project_rag_preferences (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
  groundedness_threshold FLOAT DEFAULT 0.7,
  critique_threshold FLOAT DEFAULT 0.6,
  retrieval_threshold FLOAT DEFAULT 0.5,
  feedback_count INT DEFAULT 0,
  positive_ratio FLOAT DEFAULT 0.5,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  UNIQUE(user_id, project_id)
);

-- RLS ì •ì±…: ì‚¬ìš©ì ë³¸ì¸ + ë³¸ì¸ í”„ë¡œì íŠ¸ë§Œ ì ‘ê·¼
ALTER TABLE project_rag_preferences ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own project preferences"
  ON project_rag_preferences
  FOR ALL
  USING (auth.uid() = user_id);
```

### 2. learning_events (í•™ìŠµ ì´ë²¤íŠ¸ ë¡œê·¸) â­ ìˆ˜ì •ë¨

| ì»¬ëŸ¼               | íƒ€ì…      | ì„¤ëª…               |
| ------------------ | --------- | ------------------ |
| id                 | UUID (PK) | ì´ë²¤íŠ¸ ID          |
| user_id            | UUID (FK) | ì‚¬ìš©ì             |
| **project_id**     | UUID (FK) | **í”„ë¡œì íŠ¸ ID** â­ |
| event_type         | ENUM      | ì´ë²¤íŠ¸ ìœ í˜•        |
| event_data         | JSONB     | ìƒì„¸ ì •ë³´          |
| influence_weight   | FLOAT     | ê°€ì¤‘ì¹˜             |
| applied_adjustment | FLOAT     | ì‹¤ì œ ì ìš©ëœ ì¡°ì •ê°’ |
| created_at         | TIMESTAMP | ë°œìƒ ì‹œê°„          |

### 3. rag_feedback_logs (í”¼ë“œë°± ë¡œê·¸) â­ ìˆ˜ì •ë¨

| ì»¬ëŸ¼               | íƒ€ì…      | ì„¤ëª…                                      |
| ------------------ | --------- | ----------------------------------------- |
| id                 | UUID (PK) | ë¡œê·¸ ID                                   |
| user_id            | UUID (FK) | ì‚¬ìš©ì                                    |
| **project_id**     | UUID (FK) | **í”„ë¡œì íŠ¸ ID** â­                        |
| message_id         | UUID (FK) | ëŒ€ìƒ ë©”ì‹œì§€                               |
| feedback_type      | ENUM      | 'helpful', 'not_helpful', 'hallucination' |
| groundedness_score | FLOAT     | í•´ë‹¹ ë‹µë³€ì˜ Groundedness ì ìˆ˜             |
| comment            | TEXT      | ì‚¬ìš©ì ì½”ë©˜íŠ¸ (ì„ íƒ)                      |
| created_at         | TIMESTAMP | í”¼ë“œë°± ì‹œê°„                               |

---

## ğŸ”’ í”„ë¡œì íŠ¸ ê²©ë¦¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì‚¬ìš©ì A (user_id: U1)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      í”„ë¡œì íŠ¸ 1 (P1)         â”‚       í”„ë¡œì íŠ¸ 2 (P2)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ groundedness: 0.75          â”‚ groundedness: 0.60               â”‚
â”‚ critique: 0.65              â”‚ critique: 0.55                   â”‚
â”‚ feedback_count: 15          â”‚ feedback_count: 3                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í•™ìŠµ ì´ë²¤íŠ¸:                 â”‚ í•™ìŠµ ì´ë²¤íŠ¸:                     â”‚
â”‚ - í‰ê°€ ìˆ˜ì • 5íšŒ             â”‚ - ë£¨ë¸Œë¦­ ì±„íƒ 1íšŒ                â”‚
â”‚ - ë£¨ë¸Œë¦­ ì±„íƒ 3íšŒ           â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘ ì„œë¡œ ì˜í–¥ ì—†ìŒ â†‘
```

### í”„ë¡œì íŠ¸ ê²©ë¦¬ ë³´ì¥ ì½”ë“œ

```typescript
// ì„ê³„ê°’ ì¡°íšŒ ì‹œ ë°˜ë“œì‹œ projectId í¬í•¨
async function getProjectThreshold(
  userId: string,
  projectId: string
): Promise<ProjectRAGPreferences> {
  const { data } = await supabase
    .from("project_rag_preferences")
    .select("*")
    .eq("user_id", userId)
    .eq("project_id", projectId) // í”„ë¡œì íŠ¸ ê²©ë¦¬
    .single();

  // ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ìƒˆë¡œ ìƒì„±
  if (!data) {
    return createDefaultPreferences(userId, projectId);
  }
  return data;
}

// í•™ìŠµ ì´ë²¤íŠ¸ ì ìš© ì‹œ projectId í•„ìˆ˜
async function applyLearningEvent(
  userId: string,
  projectId: string, // í•„ìˆ˜ íŒŒë¼ë¯¸í„°
  event: LearningEvent
): Promise<void> {
  const prefs = await getProjectThreshold(userId, projectId);
  const newThreshold = calculateNewThreshold(prefs, event);

  await supabase
    .from("project_rag_preferences")
    .update({
      groundedness_threshold: newThreshold,
      feedback_count: prefs.feedback_count + 1,
      updated_at: new Date(),
    })
    .eq("user_id", userId)
    .eq("project_id", projectId); // í”„ë¡œì íŠ¸ ê²©ë¦¬
}
```

### ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ë™ì‘

```typescript
// í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ê¸°ë³¸ ì„ê³„ê°’ ìë™ ìƒì„±
async function onProjectCreated(userId: string, projectId: string) {
  await supabase.from("project_rag_preferences").insert({
    user_id: userId,
    project_id: projectId,
    groundedness_threshold: 0.7, // ê¸°ë³¸ê°’
    critique_threshold: 0.6,
    retrieval_threshold: 0.5,
    feedback_count: 0,
  });
}
```

---

## ğŸ”¢ ì„ê³„ê°’ ì¡°ì • ì•Œê³ ë¦¬ì¦˜

### EMA (Exponential Moving Average) ê¸°ë°˜

```typescript
const LEARNING_RATE = 0.1; // Î±: ìƒˆ í”¼ë“œë°±ì˜ ì˜í–¥ë ¥

function adjustThreshold(
  currentThreshold: number,
  feedbackType: "helpful" | "not_helpful" | "hallucination"
): number {
  let adjustment = 0;

  switch (feedbackType) {
    case "helpful":
      // ë„ì›€ëë‹¤ â†’ ì•½ê°„ ë” ìœ ì—°í•˜ê²Œ (ì„ê³„ê°’ ì†Œí­ í•˜ë½)
      adjustment = -0.02;
      break;
    case "not_helpful":
      // ë„ì›€ ì•ˆëë‹¤ â†’ ì¤‘ë¦½ (ë³€í™” ì—†ìŒ)
      adjustment = 0;
      break;
    case "hallucination":
      // í• ë£¨ì‹œë„¤ì´ì…˜ ì‹ ê³  â†’ ë” ì—„ê²©í•˜ê²Œ (ì„ê³„ê°’ ìƒìŠ¹)
      adjustment = +0.05;
      break;
  }

  const newThreshold = currentThreshold + LEARNING_RATE * adjustment;

  // ë²”ìœ„ ì œí•œ: 0.4 ~ 0.95
  return Math.max(0.4, Math.min(0.95, newThreshold));
}
```

### ì‹œê°„ ê°ì‡  (Time Decay)

ì˜¤ë˜ëœ í”¼ë“œë°±ì€ ì˜í–¥ë ¥ ê°ì†Œ:

```typescript
const DECAY_HALF_LIFE_DAYS = 30; // 30ì¼ í›„ ì˜í–¥ë ¥ 50%

function getDecayWeight(feedbackAge: number): number {
  return Math.pow(0.5, feedbackAge / DECAY_HALF_LIFE_DAYS);
}
```

---

## ğŸ–¥ï¸ API ì„¤ê³„

### POST /api/rag/feedback

**Request**:

```json
{
  "messageId": "uuid-of-ai-message",
  "feedbackType": "helpful" | "not_helpful" | "hallucination",
  "comment": "ì„ íƒì  ì½”ë©˜íŠ¸"
}
```

**Response**:

```json
{
  "success": true,
  "newThresholds": {
    "groundedness": 0.68,
    "critique": 0.58
  },
  "message": "í”¼ë“œë°±ì´ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## ğŸ¯ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ë°ì´í„° ê¸°ë°˜ êµ¬ì¶•

- [ ] `user_rag_preferences` í…Œì´ë¸” ìƒì„± (Supabase Migration)
- [ ] `rag_feedback_logs` í…Œì´ë¸” ìƒì„±
- [ ] RLS ì •ì±… ì„¤ì • (ì‚¬ìš©ì ë³¸ì¸ ë°ì´í„°ë§Œ ì ‘ê·¼)

### Phase 2: Backend API

- [ ] `/api/rag/feedback` POST ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
- [ ] `adjustThreshold()` í•¨ìˆ˜ êµ¬í˜„
- [ ] `getUserThreshold()` í•¨ìˆ˜ êµ¬í˜„
- [ ] `selfRAG.ts` ìˆ˜ì •: ê°œì¸í™” ì„ê³„ê°’ ì‚¬ìš©

### Phase 3: Frontend UI

- [ ] `FeedbackButtons` ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] `ChatMessage` í•˜ë‹¨ì— í”¼ë“œë°± UI ì¶”ê°€
- [ ] í”¼ë“œë°± ì œì¶œ ì‹œ í† ìŠ¤íŠ¸ ì•Œë¦¼

### Phase 4: ëª¨ë‹ˆí„°ë§ & ë¶„ì„

- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ: ì „ì²´ í”¼ë“œë°± í†µê³„
- [ ] ì´ìƒì¹˜ íƒì§€: íŠ¹ì • ì‚¬ìš©ì ê³¼ë„í•œ ì‹ ê³  ê°ì§€
- [ ] A/B í…ŒìŠ¤íŠ¸: ì ì‘í˜• vs ê³ ì • ì„ê³„ê°’ ë¹„êµ

---

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

| ì§€í‘œ              | í˜„ì¬ (ê³ ì • ì„ê³„ê°’) | ì˜ˆìƒ (ì ì‘í˜•) |
| ----------------- | ------------------ | ------------- |
| í• ë£¨ì‹œë„¤ì´ì…˜ ì˜¤íƒ | 15%                | 5% ì´í•˜       |
| ì‚¬ìš©ì ë§Œì¡±ë„     | -                  | +20% ì˜ˆìƒ     |
| ê²½ê³  ë©”ì‹œì§€ ë¹ˆë„  | ë†’ìŒ               | ê°œì¸í™” (ì ì •) |

---

## âš ï¸ ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

| ë¦¬ìŠ¤í¬                 | ëŒ€ì‘ ë°©ì•ˆ                      |
| ---------------------- | ------------------------------ |
| ì•…ì˜ì  í”¼ë“œë°± ì¡°ì‘     | ì´ìƒì¹˜ íƒì§€ + ì¼ì¼ í”¼ë“œë°± ì œí•œ |
| ë„ˆë¬´ ê´€ëŒ€í•´ì§€ëŠ” ì‚¬ìš©ì | ìµœì†Œ ì„ê³„ê°’ 0.4 ê°•ì œ ì ìš©      |
| DB ë¶€í•˜                | í”¼ë“œë°± ë°°ì¹˜ ì²˜ë¦¬ (5ë¶„ ê°„ê²©)    |

---

## ğŸ—“ï¸ ì¼ì • ì œì•ˆ

| ë‹¨ê³„               | ì˜ˆìƒ ì†Œìš” | ë‹´ë‹¹       |
| ------------------ | --------- | ---------- |
| Phase 1 (DB)       | 1ì¼       | Backend    |
| Phase 2 (API)      | 2ì¼       | Backend    |
| Phase 3 (UI)       | 2ì¼       | Frontend   |
| Phase 4 (ëª¨ë‹ˆí„°ë§) | 1ì¼       | Full-stack |
| **ì´ ì˜ˆìƒ**        | **6ì¼**   | -          |

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [YouTube ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ë…¼ë¬¸](https://research.google/pubs/pub45530/)
- [Spotify Discover Weekly ì„¤ê³„](https://engineering.atspotify.com/)
- [Contextual Bandit for Personalization](https://arxiv.org/abs/1003.0146)

---

## ğŸ—£ï¸ íŒ€ íšŒì˜ë¡: Learning Rate ì˜í–¥ ìš”ì†Œ êµ¬ì²´í™”

> **íšŒì˜ ì¼ì‹œ**: 2026-01-06 21:10
> **ì°¸ì„ì**:
>
> - ë‚´ë¶€íŒ€: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì, UX/UI ì „ë¬¸ê°€
> - ì™¸ë¶€ ìë¬¸: Dr. Alex Kim (ML), Sarah Park (UX), James Lee (Backend)
>   **ì•ˆê±´**: Prism Writer ì„œë¹„ìŠ¤ì—ì„œ Learning Rateì— ì˜í–¥ì„ ì£¼ëŠ” êµ¬ì²´ì ì¸ ì‹ í˜¸(Signal) ì •ì˜

---

### ğŸ¯ íšŒì˜ ë°°ê²½

ë””ë ‰í„°ë‹˜ ì§ˆë¬¸:

> "Learning Rateì— ì˜í–¥ì„ ì£¼ëŠ” ë°©ì‹ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì„¤ëª…ì´ ì—†ì—ˆìŠµë‹ˆë‹¤.
> ë£¨ë¸Œë¦­ ìƒì„±/ì±„íƒì´ ì˜í–¥ì„ ì¤„ ê²ƒì¸ê°€ìš”?
> Prism Writer ì„œë¹„ìŠ¤ì— ë§ëŠ” ìµœì ì˜ ë°©ì‹ì€ ë¬´ì—‡ì¸ê°€ìš”?"

---

### ğŸ’¬ íšŒì˜ ë‚´ìš©

---

#### ğŸ§‘â€ğŸ’» ì‹œë‹ˆì–´ ê°œë°œì (ê¸°ìˆ  ë¦¬ë”)

> ì¢‹ì€ ì§€ì ì…ë‹ˆë‹¤. í˜„ì¬ ë¬¸ì„œì—ëŠ” `ğŸ‘ğŸ‘ğŸš¨` ë²„íŠ¼ë§Œ ì–¸ê¸‰ë˜ì–´ ìˆëŠ”ë°,
> Prism WriterëŠ” **ê¸€ì“°ê¸° í‰ê°€ ë„êµ¬**ë¼ëŠ” íŠ¹ìˆ˜ì„±ì´ ìˆìŠµë‹ˆë‹¤.
>
> ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©ì ì˜ë„ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì‹ í˜¸ëŠ” í¬ê²Œ 4ê°€ì§€ì…ë‹ˆë‹¤:
>
> 1. **ì±„íŒ… í”¼ë“œë°±** (ğŸ‘ğŸ‘ğŸš¨) - ì§ì ‘ì , ëª…ì‹œì 
> 2. **ë£¨ë¸Œë¦­ ì±„íƒ/ìˆ˜ì •** - ì•”ë¬µì  (ì±„íƒ = ë™ì˜, ìˆ˜ì • = ë¶ˆë§Œì¡±)
> 3. **í‰ê°€ ê²°ê³¼ ìˆ˜ì •** - ì•”ë¬µì  (AI ì ìˆ˜ ë®ì–´ì“°ê¸° = ë¶ˆë§Œì¡±)
> 4. **ë¬¸ì„œ ì¬ì—…ë¡œë“œ** - ì•”ë¬µì  (ê°™ì€ ë¬¸ì„œ ë°˜ë³µ = ì²­í‚¹ ë¶ˆë§Œì¡±)

---

#### ğŸ§  Dr. Alex Kim (ML ì „ë¬¸ê°€)

> ì‹œë‹ˆì–´ë‹˜ ë§ì”€ì´ í•µì‹¬ì…ë‹ˆë‹¤. **Explicit vs Implicit Feedback** êµ¬ë¶„ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
>
> - **Explicit**: ì‚¬ìš©ìê°€ ì§ì ‘ ë²„íŠ¼ì„ í´ë¦­ (ğŸ‘ğŸ‘)
> - **Implicit**: ì‚¬ìš©ì í–‰ë™ì—ì„œ ì¶”ë¡  (ë£¨ë¸Œë¦­ ìˆ˜ì •, ì ìˆ˜ ë³€ê²½)
>
> **ê¶Œì¥ ê°€ì¤‘ì¹˜**:
>
> ```
> Explicit Feedback (ğŸ‘ğŸ‘ğŸš¨): ê°€ì¤‘ì¹˜ 1.0 (100%)
> Rubric Adoption:           ê°€ì¤‘ì¹˜ 0.3 (30%)
> Evaluation Override:       ê°€ì¤‘ì¹˜ 0.5 (50%)
> Document Re-upload:        ê°€ì¤‘ì¹˜ 0.2 (20%)
> ```
>
> ì´ë ‡ê²Œ í•˜ë©´ **ë‹¤ì–‘í•œ ì‹ í˜¸ë¥¼ ì¢…í•©**í•˜ë©´ì„œë„ ëª…ì‹œì  í”¼ë“œë°±ì„ ìš°ì„ í•©ë‹ˆë‹¤.

---

#### ğŸ¨ Sarah Park (UX ì „ë¬¸ê°€)

> ì ê¹ìš”, ì—¬ê¸°ì„œ UX ê´€ì ì—ì„œ ìš°ë ¤ê°€ ìˆìŠµë‹ˆë‹¤.
>
> ì‚¬ìš©ìê°€ **ë¬´ì˜ì‹ì  í–‰ë™**ì´ í•™ìŠµì— ì˜í–¥ì„ ì¤€ë‹¤ëŠ” ê±¸ ëª¨ë¥´ë©´,
> "ì™œ AIê°€ ì ì  ì´ìƒí•´ì§€ì§€?" ê°™ì€ í˜¼ë€ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.
>
> **íˆ¬ëª…ì„± ì›ì¹™**ì„ ì œì•ˆí•©ë‹ˆë‹¤:
>
> - ì„¤ì • í˜ì´ì§€ì— "AI ê°œì¸í™” í•™ìŠµ í˜„í™©" í‘œì‹œ
> - "ìµœê·¼ í•™ìŠµ ì´ë²¤íŠ¸: ë£¨ë¸Œë¦­ 3ê°œ ì±„íƒ, í‰ê°€ ìˆ˜ì • 2íšŒ" ê°™ì€ ìš”ì•½
> - í•„ìš”ì‹œ "í•™ìŠµ ì´ˆê¸°í™”" ë²„íŠ¼ ì œê³µ

---

#### ğŸ‘¨â€ğŸ’» ì£¼ë‹ˆì–´ ê°œë°œì

> ê¸°ìˆ ì ìœ¼ë¡œ ê¶ê¸ˆí•œ ê²Œ ìˆìŠµë‹ˆë‹¤.
> ë£¨ë¸Œë¦­ ì±„íƒì€ ì–´ë–»ê²Œ Learning Rateì— ì˜í–¥ì„ ì£¼ë‚˜ìš”?
>
> ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ **ì—„ê²©í•œ ë£¨ë¸Œë¦­**ì„ ì±„íƒí•˜ë©´
> Groundedness ì„ê³„ê°’ë„ ë†’ì•„ì ¸ì•¼ í•˜ë‚˜ìš”?

---

#### ğŸ§  Dr. Alex Kim (ë‹µë³€)

> ì¢‹ì€ ì§ˆë¬¸ì…ë‹ˆë‹¤! ë‹¨ìˆœíˆ ì„ê³„ê°’ë§Œ ì¡°ì •í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
> **ë£¨ë¸Œë¦­ íŠ¹ì„±**ì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
>
> ```typescript
> // ë£¨ë¸Œë¦­ ì±„íƒ ì‹œ
> function onRubricAdoption(rubric: Rubric, userPrefs: UserPrefs) {
>   // ë£¨ë¸Œë¦­ì˜ ì—„ê²©ë„ ë¶„ì„
>   const rubricStrictness = analyzeRubricStrictness(rubric);
>
>   // ì—„ê²©í•œ ë£¨ë¸Œë¦­ ì±„íƒ â†’ ì‚¬ìš©ìëŠ” ì •í™•ë„ ì¤‘ì‹œ
>   if (rubricStrictness > 0.7) {
>     userPrefs.groundedness_threshold += 0.03 * LEARNING_RATE;
>   }
>   // ê´€ëŒ€í•œ ë£¨ë¸Œë¦­ ì±„íƒ â†’ ì‚¬ìš©ìëŠ” ìœ ì—°ì„± ì¤‘ì‹œ
>   else if (rubricStrictness < 0.3) {
>     userPrefs.groundedness_threshold -= 0.02 * LEARNING_RATE;
>   }
> }
> ```

---

#### ğŸ” James Lee (ë°±ì—”ë“œ ì „ë¬¸ê°€)

> DB ì„¤ê³„ ê´€ì ì—ì„œ ì œì•ˆë“œë¦½ë‹ˆë‹¤.
>
> ì—¬ëŸ¬ ì‹ í˜¸ë¥¼ ì¶”ì í•˜ë ¤ë©´ **ì´ë²¤íŠ¸ ë¡œê·¸ í…Œì´ë¸”**ì´ í•„ìš”í•©ë‹ˆë‹¤:
>
> ```sql
> CREATE TABLE learning_events (
>   id UUID PRIMARY KEY,
>   user_id UUID NOT NULL,
>   event_type ENUM('chat_feedback', 'rubric_adopt', 'eval_override', 'doc_reupload'),
>   event_data JSONB,           -- ìƒì„¸ ì •ë³´
>   influence_weight FLOAT,     -- ê°€ì¤‘ì¹˜
>   applied_adjustment FLOAT,   -- ì‹¤ì œ ì ìš©ëœ ì¡°ì •ê°’
>   created_at TIMESTAMP
> );
> ```
>
> ì´ë ‡ê²Œ í•˜ë©´ **ì–´ë–¤ ì´ë²¤íŠ¸ê°€ í•™ìŠµì— ì˜í–¥ì„ ì£¼ì—ˆëŠ”ì§€** ì¶”ì  ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

#### ğŸ§‘â€ğŸ’» ì‹œë‹ˆì–´ ê°œë°œì (ì¢…í•©)

> ë…¼ì˜ë¥¼ ì¢…í•©í•˜ë©´, Prism Writerì—ì„œ Learning Rateì— ì˜í–¥ì„ ì£¼ëŠ” **4ê°€ì§€ ì‹ í˜¸**ê°€ ìˆìŠµë‹ˆë‹¤:

| ì‹ í˜¸ ìœ í˜•          | íŠ¸ë¦¬ê±°           | ê°€ì¤‘ì¹˜ | ì„ê³„ê°’ ì¡°ì • ë°©í–¥    |
| ------------------ | ---------------- | ------ | ------------------- |
| **ğŸ‘ ë„ì›€ë¨**      | ì±„íŒ… í”¼ë“œë°± ë²„íŠ¼ | 1.0    | -0.02 (ìœ ì—°í•˜ê²Œ)    |
| **ğŸ‘ ì•„ë‹ˆìš”**      | ì±„íŒ… í”¼ë“œë°± ë²„íŠ¼ | 1.0    | 0 (ì¤‘ë¦½)            |
| **ğŸš¨ í‹€ë¦° ì •ë³´**   | ì±„íŒ… í”¼ë“œë°± ë²„íŠ¼ | 1.0    | +0.05 (ì—„ê²©í•˜ê²Œ)    |
| **ë£¨ë¸Œë¦­ ì±„íƒ**    | ë£¨ë¸Œë¦­ approve   | 0.3    | Â±0.03 (ì—„ê²©ë„ ê¸°ë°˜) |
| **í‰ê°€ ì ìˆ˜ ìˆ˜ì •** | ì ìˆ˜ ë®ì–´ì“°ê¸°    | 0.5    | +0.03 (ë” ì—„ê²©í•˜ê²Œ) |
| **ë¬¸ì„œ ì¬ì—…ë¡œë“œ**  | ê°™ì€ íŒŒì¼ ì¬ì²˜ë¦¬ | 0.2    | +0.01 (ì²­í‚¹ ê°œì„ )   |

---

### âœ… íšŒì˜ ê²°ë¡ 

#### 1. ë‹¤ì¤‘ ì‹ í˜¸ ê¸°ë°˜ í•™ìŠµ (Multi-Signal Learning)

```typescript
interface LearningEvent {
  type: "chat_feedback" | "rubric_adopt" | "eval_override" | "doc_reupload";
  weight: number;
  adjustment: number;
}

function applyLearningEvent(
  userPrefs: UserPrefs,
  event: LearningEvent
): UserPrefs {
  const effectiveAdjustment = event.adjustment * event.weight * LEARNING_RATE;

  return {
    ...userPrefs,
    groundedness_threshold: clamp(
      userPrefs.groundedness_threshold + effectiveAdjustment,
      0.4,
      0.95
    ),
    updated_at: new Date(),
  };
}
```

#### 2. íˆ¬ëª…ì„± UI ì¶”ê°€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  AI ê°œì¸í™” í˜„í™©                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  í˜„ì¬ ì •í™•ë„ ë¯¼ê°ë„: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%     â”‚
â”‚                                         â”‚
â”‚  ìµœê·¼ í•™ìŠµ ì´ë²¤íŠ¸:                       â”‚
â”‚  â€¢ ë£¨ë¸Œë¦­ "í•µì‹¬ ê¸°ì¤€" ì±„íƒ (+3%)        â”‚
â”‚  â€¢ í‰ê°€ ì ìˆ˜ 2íšŒ ìˆ˜ì • (+6%)             â”‚
â”‚  â€¢ ë„ì›€ë¨ í”¼ë“œë°± 5íšŒ (-10%)             â”‚
â”‚                                         â”‚
â”‚  [í•™ìŠµ ì´ˆê¸°í™”] [ìƒì„¸ ë³´ê¸°]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. êµ¬í˜„ ìš°ì„ ìˆœìœ„ ì¬ì •ì˜

| ìˆœì„œ | ì‘ì—…                 | ì´ìœ                       |
| ---- | -------------------- | ------------------------- |
| 1    | ì±„íŒ… í”¼ë“œë°± (ğŸ‘ğŸ‘ğŸš¨) | ê°€ì¥ ì§ì ‘ì , êµ¬í˜„ ê°„ë‹¨    |
| 2    | í‰ê°€ ì ìˆ˜ ìˆ˜ì • ê°ì§€  | ê¸°ì¡´ evaluation_logs í™œìš© |
| 3    | ë£¨ë¸Œë¦­ ì±„íƒ ì—°ë™     | ê¸°ì¡´ rubric ì‹œìŠ¤í…œ ì—°ë™   |
| 4    | íˆ¬ëª…ì„± UI            | ì‚¬ìš©ì ì‹ ë¢° êµ¬ì¶•          |

---

## ğŸ”„ ìˆ˜ì •: í•™ìŠµ ì‹ í˜¸ ìš°ì„ ìˆœìœ„ ì¬ì •ì˜ (2026-01-06)

> **ë°°ê²½**: Prism Writer ì„œë¹„ìŠ¤ íŠ¹ì„±ìƒ ì±„íŒ… ëŒ€í™”ê°€ ì œí•œì  (ì„¸ì…˜ë‹¹ ìµœëŒ€ 10íšŒ, ì´ 50íšŒ ì´í•˜).
> ì±„íŒ… í”¼ë“œë°±ë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•œ í•™ìŠµ ë°ì´í„° í™•ë³´ ë¶ˆê°€.

### âš ï¸ ê¸°ì¡´ â†’ ìˆ˜ì •

| í•­ëª©           | ê¸°ì¡´ ì„¤ê³„            | ìˆ˜ì • ì„¤ê³„            |
| -------------- | -------------------- | -------------------- |
| ì£¼ìš” í•™ìŠµ ì‹ í˜¸ | ì±„íŒ… í”¼ë“œë°± (ğŸ‘ğŸ‘ğŸš¨) | **í‰ê°€/ë£¨ë¸Œë¦­ í™œë™** |
| ë³´ì¡° í•™ìŠµ ì‹ í˜¸ | í‰ê°€/ë£¨ë¸Œë¦­          | **ì±„íŒ… í”¼ë“œë°±**      |
| ì²« ì²´ê° ì‹œì    | 25~50íšŒ ì±„íŒ…         | **5~10íšŒ í‰ê°€ í™œë™** |

---

### ğŸ“Š ìˆ˜ì •ëœ ê°€ì¤‘ì¹˜ ì²´ê³„

| ì‹ í˜¸ ìœ í˜•             | íŠ¸ë¦¬ê±°           | ê°€ì¤‘ì¹˜ (ìˆ˜ì •) | ì¡°ì •ê°’ | ìœ íš¨ ì¡°ì • |
| --------------------- | ---------------- | ------------- | ------ | --------- |
| â­ **í‰ê°€ ì ìˆ˜ ìˆ˜ì •** | ì ìˆ˜ ë®ì–´ì“°ê¸°    | **0.8**       | +0.05  | +0.04/íšŒ  |
| ğŸ“‹ **ë£¨ë¸Œë¦­ ì±„íƒ**    | ë£¨ë¸Œë¦­ ìŠ¹ì¸      | **0.5**       | Â±0.03  | Â±0.015/íšŒ |
| ğŸ“„ **ë¬¸ì„œ ì¬ì—…ë¡œë“œ**  | ê°™ì€ íŒŒì¼ ì¬ì²˜ë¦¬ | **0.4**       | +0.02  | +0.008/íšŒ |
| ğŸ”– **ì˜ˆì‹œ Pin/Unpin** | ì˜ˆì‹œ ê³ ì •/í•´ì œ   | **0.3**       | Â±0.02  | Â±0.006/íšŒ |
| ğŸ‘ **ë„ì›€ë¨**         | ì±„íŒ… í”¼ë“œë°±      | 0.3 (â†“)       | -0.02  | -0.006/íšŒ |
| ğŸ‘ **ì•„ë‹ˆìš”**         | ì±„íŒ… í”¼ë“œë°±      | 0.3 (â†“)       | 0      | 0         |
| ğŸš¨ **í‹€ë¦° ì •ë³´**      | ì±„íŒ… í”¼ë“œë°±      | 0.5           | +0.05  | +0.025/íšŒ |

---

### ğŸ¯ ìˆ˜ì •ëœ êµ¬í˜„ ìš°ì„ ìˆœìœ„

| ìˆœì„œ  | ì‘ì—…                 | ì´ìœ                                           | ê°œë°œ ë‚œì´ë„ |
| ----- | -------------------- | --------------------------------------------- | ----------- |
| **1** | í‰ê°€ ì ìˆ˜ ìˆ˜ì • ê°ì§€  | ê¸°ì¡´ `evaluation_logs` í™œìš©, ê°€ì¥ ê°•ë ¥í•œ ì‹ í˜¸ | ë‚®ìŒ        |
| **2** | ë£¨ë¸Œë¦­ ì±„íƒ ì—°ë™     | ê¸°ì¡´ `rag_templates` í™œìš©                     | ë‚®ìŒ        |
| **3** | ì˜ˆì‹œ Pin/Unpin ì¶”ì   | ì„ í˜¸ ìŠ¤íƒ€ì¼ íŒŒì•…                              | ì¤‘ê°„        |
| **4** | ì±„íŒ… í”¼ë“œë°± (ğŸ‘ğŸ‘ğŸš¨) | ë³´ì¡° ì‹ í˜¸ë¡œ í™œìš©                              | ì¤‘ê°„        |
| **5** | íˆ¬ëª…ì„± UI            | ì‚¬ìš©ì ì‹ ë¢° êµ¬ì¶•                              | ì¤‘ê°„        |

---

### ğŸ“ˆ ì˜ˆìƒ í•™ìŠµ ì†ë„ (ìˆ˜ì •)

**ì‹œë‚˜ë¦¬ì˜¤: ì¼ë°˜ ì‚¬ìš©ì 1ì£¼ì¼ í™œë™**

| í™œë™                    | íšŸìˆ˜ | ëˆ„ì  ì¡°ì •           |
| ----------------------- | ---- | ------------------- |
| ë¬¸ì„œ 3ê°œ ì—…ë¡œë“œ í›„ í‰ê°€ | -    | -                   |
| í‰ê°€ ì ìˆ˜ 2íšŒ ìˆ˜ì •      | 2    | +0.08               |
| ë£¨ë¸Œë¦­ 1ê°œ ì±„íƒ         | 1    | +0.015              |
| ì˜ˆì‹œ 2ê°œ Pin            | 2    | +0.012              |
| ì±„íŒ… 5íšŒ + í”¼ë“œë°± 2íšŒ   | 2    | +0.012              |
| **ì´ ëˆ„ì **             | -    | **+0.119 (ì•½ 12%)** |

â†’ **1ì£¼ì¼ í™œë™ìœ¼ë¡œ 12% ì„ê³„ê°’ ë³€í™” ë‹¬ì„±!**
â†’ **ì±„íŒ… ì—†ì´ë„ í‰ê°€/ë£¨ë¸Œë¦­ë§Œìœ¼ë¡œ 10% ë‹¬ì„± ê°€ëŠ¥!**

---

### ğŸ’» ìˆ˜ì •ëœ ì½”ë“œ ì„¤ê³„

```typescript
// ì‹ í˜¸ ìœ í˜•ë³„ ì„¤ì •
const SIGNAL_CONFIG = {
  eval_override: { weight: 0.8, adjustment: 0.05 }, // í‰ê°€ ì ìˆ˜ ìˆ˜ì •
  rubric_adopt: { weight: 0.5, adjustment: 0.03 }, // ë£¨ë¸Œë¦­ ì±„íƒ
  doc_reupload: { weight: 0.4, adjustment: 0.02 }, // ë¬¸ì„œ ì¬ì—…ë¡œë“œ
  example_pin: { weight: 0.3, adjustment: 0.02 }, // ì˜ˆì‹œ Pin
  chat_helpful: { weight: 0.3, adjustment: -0.02 }, // ì±„íŒ… ë„ì›€ë¨
  chat_not_helpful: { weight: 0.3, adjustment: 0 }, // ì±„íŒ… ì•„ë‹ˆìš”
  chat_hallucination: { weight: 0.5, adjustment: 0.05 }, // í‹€ë¦° ì •ë³´
};

function processLearningSignal(
  userId: string,
  signalType: keyof typeof SIGNAL_CONFIG,
  metadata?: Record<string, any>
) {
  const config = SIGNAL_CONFIG[signalType];
  const learningRate = getAdaptiveLearningRate(userId);

  const effectiveAdjustment = config.adjustment * config.weight * learningRate;

  // DB ì—…ë°ì´íŠ¸
  updateUserThreshold(userId, effectiveAdjustment);

  // ì´ë²¤íŠ¸ ë¡œê¹…
  logLearningEvent(userId, signalType, effectiveAdjustment, metadata);
}
```

---

### ğŸ“ íšŒì˜ ê²°ê³¼ ë°˜ì˜: ì—…ë°ì´íŠ¸ëœ DB ìŠ¤í‚¤ë§ˆ

#### learning_events (ì‹ ê·œ í…Œì´ë¸”)

| ì»¬ëŸ¼               | íƒ€ì…      | ì„¤ëª…                                                             |
| ------------------ | --------- | ---------------------------------------------------------------- |
| id                 | UUID (PK) | ì´ë²¤íŠ¸ ID                                                        |
| user_id            | UUID (FK) | ì‚¬ìš©ì                                                           |
| event_type         | ENUM      | 'chat_feedback', 'rubric_adopt', 'eval_override', 'doc_reupload' |
| event_data         | JSONB     | ìƒì„¸ ì •ë³´ (rubric_id, score_diff ë“±)                             |
| influence_weight   | FLOAT     | ê°€ì¤‘ì¹˜ (0.2 ~ 1.0)                                               |
| applied_adjustment | FLOAT     | ì‹¤ì œ ì ìš©ëœ ì„ê³„ê°’ ë³€í™”                                          |
| created_at         | TIMESTAMP | ë°œìƒ ì‹œê°„                                                        |

---

### ğŸ’¡ Dr. Alex Kim ì¶”ê°€ ì¡°ì–¸

> ë§ˆì§€ë§‰ìœ¼ë¡œ, **ì ì‘í˜• Learning Rate**ë„ ê³ ë ¤í•´ë³´ì„¸ìš”.
>
> ì‹ ê·œ ì‚¬ìš©ìëŠ” ë¹ ë¥´ê²Œ í•™ìŠµí•˜ê³ (Î±=0.2),
> ê¸°ì¡´ ì‚¬ìš©ìëŠ” ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€(Î±=0.05)í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤:
>
> ```typescript
> function getAdaptiveLearningRate(feedbackCount: number): number {
>   // í”¼ë“œë°± 10ê°œ ë¯¸ë§Œ: ë¹ ë¥¸ í•™ìŠµ
>   if (feedbackCount < 10) return 0.2;
>   // 10~50ê°œ: ì¤‘ê°„
>   if (feedbackCount < 50) return 0.1;
>   // 50ê°œ ì´ìƒ: ì•ˆì •í™”
>   return 0.05;
> }
> ```

---

**íšŒì˜ ì¢…ë£Œ**

---

**ë¬¸ì„œ ë**
