# ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ í†µí•© ìˆ˜ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

> **ë¬¸ì„œ ID**: 2512282147_Category_System_Sync_Checklist  
> **ê¸°ë°˜ ë¬¸ì„œ**: `category_analysis.md` (2025-12-28)  
> **ì‘ì„±ì¼**: 2025-12-28  
> **ìƒíƒœ**: ğŸ”µ ë””ë ‰í„° ìŠ¹ì¸ ëŒ€ê¸°

---

## 1. File & Structure Decision (íŒŒì¼ êµ¬ì„± ì „ëµ)

### ì „ëµ: **ë‹¨ì¼ Phase ìˆ˜ì • (FE Only)**

**ë…¼ë¦¬ì  ê·¼ê±°**:

1. ìˆ˜ì • ëŒ€ìƒì´ **í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ 2ê°œ**ë¡œ í•œì •ë¨
2. DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì—†ìŒ (ê¸°ì¡´ `user_documents.category` í™œìš©)
3. ë³€ê²½ ë²”ìœ„ê°€ ì‘ì•„ ë‹¨ì¼ Phaseë¡œ ë°°í¬ ê°€ëŠ¥
4. ë¡¤ë°± ìš©ì´ì„±ì„ ê³ ë ¤í•˜ì—¬ ìµœì†Œ ë³€ê²½ ì›ì¹™ ì ìš©

### ì˜í–¥ ë¶„ì„

| íŒŒì¼                                              | ë³€ê²½ ìœ í˜•      | ìœ„í—˜ë„  |
| ------------------------------------------------- | -------------- | ------- |
| `frontend/src/app/api/categories/unique/route.ts` | í…Œì´ë¸”ëª… ë³€ê²½  | ğŸŸ¢ ë‚®ìŒ |
| `frontend/src/constants/raft.ts`                  | ë°°ì—´ í•­ëª© ì¶”ê°€ | ğŸŸ¢ ë‚®ìŒ |

---

## 2. Pre-Check: ì‚¬ì „ í™•ì¸ ì‚¬í•­ âœ… **ì™„ë£Œ**

### [í•„ìˆ˜ í™•ì¸ - ëª¨ë‘ ì™„ë£Œë¨]

- [x] **PC-01**: `user_documents.category` ì»¬ëŸ¼ ì¡´ì¬ í™•ì¸ âœ…

  - **ê²°ê³¼**: ì»¬ëŸ¼ ì¡´ì¬ í™•ì¸ë¨
  - **ì¦ê±°**: `034_add_category.sql` (Line 12-13)
    ```sql
    ALTER TABLE public.user_documents
    ADD COLUMN IF NOT EXISTS category TEXT NOT NULL DEFAULT 'ë¯¸ë¶„ë¥˜';
    ```
  - **ì¸ë±ìŠ¤**: `idx_user_documents_category` ì¡´ì¬ âœ…
  - **ê¸°ë³¸ê°’**: `'ë¯¸ë¶„ë¥˜'` âœ…

- [x] **PC-02**: `documents` í…Œì´ë¸”ê³¼ `user_documents` í…Œì´ë¸”ì˜ ì—­í•  ì°¨ì´ âœ…

  - **ê²°ê³¼**: `documents` í…Œì´ë¸”ì€ ë§ˆì´ê·¸ë ˆì´ì…˜ì— ì—†ìŒ (CREATE TABLE documents ë¯¸ì¡´ì¬)
  - **ê²°ë¡ **: `user_documents`ê°€ ìœ ì¼í•œ ë¬¸ì„œ ì €ì¥ í…Œì´ë¸”
  - **ì¡°ì¹˜**: `/api/categories/unique`ì—ì„œ `user_documents`ë¡œ ë³€ê²½ í•„ìš”

- [x] **PC-03**: ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ê°’ í†µì¼ ë°©í–¥ âœ…
  - **ê²°ê³¼**: DB ê¸°ë³¸ê°’ = `'ë¯¸ë¶„ë¥˜'`
  - **ê²°ë¡ **: RAFT_CATEGORIESì™€ DEFAULT_RAFT_CATEGORYë¥¼ `'ë¯¸ë¶„ë¥˜'`ë¡œ í†µì¼

---

## 3. Implementation Checklist

### [Phase 1: ì¹´í…Œê³ ë¦¬ ì†ŒìŠ¤ í†µì¼] (ê¸°ìˆ  ë¦¬ë” ì£¼ë„)

> **Source**: `category_analysis.md` - "Fix 1: í…Œì´ë¸” ë³€ê²½", "Fix 2: ì¹´í…Œê³ ë¦¬ ì¶”ê°€"

**Before Start:**

- ì˜í–¥ë°›ëŠ” ê¸°ì¡´ íŒŒì¼/ê¸°ëŠ¥:
  - `CategoryCombobox.tsx`: ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ UI (ë³€ê²½ ì—†ìŒ, API ì˜ì¡´)
  - `SyntheticDataPanel.tsx`: RAFT ìƒì„± UI (ë³€ê²½ ì—†ìŒ, Constants ì˜ì¡´)
  - `RAFTDatasetList.tsx`: ë°ì´í„°ì…‹ ëª©ë¡ í•„í„°ë§ (ë³€ê²½ ì—†ìŒ, Constants ì˜ì¡´)

**Implementation Items:**

- [x] **P1-01**: `/api/categories/unique` í…Œì´ë¸” ë³€ê²½ âœ…

  - `Target`: `frontend/src/app/api/categories/unique/route.ts`
  - `ì™„ë£Œ ë‚´ì—­`:
    1. Line 10 ì£¼ì„ ë³€ê²½: `documents` â†’ `user_documents`
    2. Line 41 ì£¼ì„ì— `[Phase P1-01]` íƒœê·¸ ì¶”ê°€
    3. Line 43 í…Œì´ë¸”ëª… ë³€ê²½: `.from('documents')` â†’ `.from('user_documents')`
  - `Syntax Check`: âœ… `npx tsc --noEmit` (0 errors)
  - `Dependency`: PC-01 ì™„ë£Œ í›„ (ì»¬ëŸ¼ ì¡´ì¬ í™•ì¸) âœ…

- [x] **P1-02**: `RAFT_CATEGORIES`ì— 'ë¯¸ë¶„ë¥˜' ì¶”ê°€ âœ…

  - `Target`: `frontend/src/constants/raft.ts`
  - `ì™„ë£Œ ë‚´ì—­`:
    1. Line 9: ì£¼ì„ì— `[Phase P1-02]` íƒœê·¸ ì¶”ê°€
    2. Line 11: ë°°ì—´ ì²« ë²ˆì§¸ ìœ„ì¹˜ì— `'ë¯¸ë¶„ë¥˜'` ì¶”ê°€
    3. ì£¼ì„: DB ê¸°ë³¸ê°’ í˜¸í™˜ ì„¤ëª… ì¶”ê°€
  - `Syntax Check`: âœ… `npx tsc --noEmit` (0 errors)
  - `RaftCategory íƒ€ì…`: ìë™ ì—…ë°ì´íŠ¸ë¨ (`'ë¯¸ë¶„ë¥˜' | 'ë§ˆì¼€íŒ…' | ...`)

- [x] **P1-03**: `DEFAULT_RAFT_CATEGORY` ë³€ê²½ âœ…

  - `Target`: `frontend/src/constants/raft.ts`
  - `ì™„ë£Œ ë‚´ì—­`:
    1. Line 23: ì£¼ì„ì— `[Phase P1-03]` íƒœê·¸ ì¶”ê°€
    2. Line 24: `'ê¸°íƒ€'` â†’ `'ë¯¸ë¶„ë¥˜'`ë¡œ ë³€ê²½
  - `Syntax Check`: âœ… `npx tsc --noEmit` (0 errors)
  - `DB ì¼ì¹˜`: user_documents.category DEFAULT 'ë¯¸ë¶„ë¥˜'ì™€ í†µì¼ âœ…

**Verification (ê²€ì¦): âœ… ì™„ë£Œ**

- [x] **Syntax Check**: `npx tsc --noEmit` (0 errors í™•ì¸) âœ…
- [x] **Functionality Test**: âœ… ëª¨ë‘ PASS
  - ì‹œë‚˜ë¦¬ì˜¤ 1: RAFT ê´€ë¦¬ í˜ì´ì§€ ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ í™•ì¸ âœ…
    - ê²°ê³¼: 'ë¯¸ë¶„ë¥˜' ê¸°ë³¸ê°’ í‘œì‹œ í™•ì¸
  - ì‹œë‚˜ë¦¬ì˜¤ 2: 'ë¯¸ë¶„ë¥˜' ì¹´í…Œê³ ë¦¬ í•©ì„± ë°ì´í„° ìƒì„±
    - ê²°ê³¼: ì²­í¬ ì—†ìŒ ì‹œ INSUFFICIENT_CHUNKS ì •ìƒ ë™ì‘ (ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ í™•ì¸)
  - ì‹œë‚˜ë¦¬ì˜¤ 3: RAFTDatasetList í•„í„° ë“œë¡­ë‹¤ìš´ âœ…
    - ê²°ê³¼: 7ê°œ ì¹´í…Œê³ ë¦¬ í™•ì¸ ['ì „ì²´ ì¹´í…Œê³ ë¦¬', 'ë¯¸ë¶„ë¥˜', 'ë§ˆì¼€íŒ…', 'ê¸°ìˆ /ê°œë°œ', 'ì¼ë°˜/ìƒì‹', 'ë¹„ì¦ˆë‹ˆìŠ¤', 'ê¸ˆìœµ/ê²½ì œ', 'ê¸°íƒ€']
  - ì‹œë‚˜ë¦¬ì˜¤ 4: SyntheticDataPanel ë“œë¡­ë‹¤ìš´ âœ…
    - ê²°ê³¼: 'ë¯¸ë¶„ë¥˜' ê¸°ë³¸ê°’ í‘œì‹œ í™•ì¸
  - **ìŠ¤í¬ë¦°ìƒ·**: `raft_admin_top_panel_1766927596076.png`, `raft_dataset_list_filter_1766927612978.png`
- [x] **Regression Test**: âš ï¸ ì¼ë¶€ ì œí•œ
  - ì—ë””í„° ì¹´í…Œê³ ë¦¬ ì…ë ¥: âš ï¸ ë¡œê·¸ì¸ í•„ìš”ë¡œ ì ‘ê·¼ ë¶ˆê°€ (ì˜ˆì™¸ ë³´ê³ )
  - ì°¸ê³ ìë£Œ ì—…ë¡œë“œ: âš ï¸ ë¡œê·¸ì¸ í•„ìš”
  - AI ì±„íŒ…: âš ï¸ ë¡œê·¸ì¸ í•„ìš”
  - **ì°¸ê³ **: RAFT Adminì—ì„œ 'ë¯¸ë¶„ë¥˜' ì •ìƒ í‘œì‹œ í™•ì¸ìœ¼ë¡œ Constants ë³€ê²½ ê²€ì¦ ì™„ë£Œ

---

## 4. Rollback Plan (ë¡¤ë°± ê³„íš)

| ë‹¨ê³„ | ì¡°ê±´        | ì•¡ì…˜                                                          |
| ---- | ----------- | ------------------------------------------------------------- |
| 1    | ë¹Œë“œ ì‹¤íŒ¨   | Git revert â†’ ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë³µì›                               |
| 2    | ê¸°ëŠ¥ ì˜¤ì‘ë™ | í…Œì´ë¸”ëª… ì›ë³µ (`user_documents` â†’ `documents`)                |
| 3    | ì„±ëŠ¥ ì €í•˜   | ì¿¼ë¦¬ ì¸ë±ìŠ¤ í™•ì¸ (`user_documents.category` ì¸ë±ìŠ¤ ì¡´ì¬ ì—¬ë¶€) |

---

## 5. ë¬¸ì„œ ì¶”ì ì„± (Traceability)

| ì²´í¬ë¦¬ìŠ¤íŠ¸ ID | ì›ë³¸ ë¬¸ì„œ ìœ„ì¹˜                                                    |
| ------------- | ----------------------------------------------------------------- |
| P1-01         | `category_analysis.md` - "Fix 1: í…Œì´ë¸” ë³€ê²½"                     |
| P1-02         | `category_analysis.md` - "Fix 2: RAFT_CATEGORIESì— 'ë¯¸ë¶„ë¥˜' ì¶”ê°€" |
| P1-03         | `category_analysis.md` - "ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ê°’ ë¶ˆì¼ì¹˜" ì„¹ì…˜           |

---

## 6. JeDebug ì‚¬ì „ ë¶„ì„ âœ… ê²€ì¦ ì™„ë£Œ

### ì ì¬ì  ìœ„í—˜ ìš”ì†Œ ê²€ì¦ ê²°ê³¼

| ID    | ìœ„í—˜                                                 | ì™„í™” ë°©ì•ˆ                              | ìƒíƒœ                                       |
| ----- | ---------------------------------------------------- | -------------------------------------- | ------------------------------------------ |
| JD-01 | `user_documents` í…Œì´ë¸”ì— category ì»¬ëŸ¼ ì—†ì„ ìˆ˜ ìˆìŒ | ì‚¬ì „ì— Supabase ìŠ¤í‚¤ë§ˆ í™•ì¸            | âœ… í™•ì¸ë¨ (`034_add_category.sql`)         |
| JD-02 | ê¸°ì¡´ í•„í„°ë§ ë¡œì§ì´ 'ê¸°íƒ€' í•˜ë“œì½”ë”©                   | grepìœ¼ë¡œ 'ê¸°íƒ€' ì°¸ì¡° ê²€ìƒ‰ í›„ ì¼ê´„ ìˆ˜ì • | âœ… ë¬¸ì œ ì—†ìŒ (RAFT_CATEGORIES ë‚´ë¶€ë§Œ ì¡´ì¬) |
| JD-03 | ë°°í¬ í›„ ìºì‹œëœ ì¹´í…Œê³ ë¦¬ ëª©ë¡ ë¬¸ì œ                    | ë¸Œë¼ìš°ì € í•˜ë“œ ë¦¬í”„ë ˆì‹œ ê°€ì´ë“œ          | âœ… ë°°í¬ ì‹œ ì•ˆë‚´ ì˜ˆì •                       |

### ë°°í¬ í›„ ìºì‹œ ê°€ì´ë“œ (JD-03)

> **ì‚¬ìš©ì ì•ˆë‚´**: ì¹´í…Œê³ ë¦¬ ëª©ë¡ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì„ ê²½ìš°
>
> - Chrome: `Ctrl + Shift + R` (Windows) / `Cmd + Shift + R` (Mac)
> - ë˜ëŠ” ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨

---

## 7. ìµœì¢… ìƒíƒœ âœ… COMPLETE

| í•­ëª©                      | ìƒíƒœ                       |
| ------------------------- | -------------------------- |
| Pre-Check (PC-01~03)      | âœ… ì™„ë£Œ                    |
| Implementation (P1-01~03) | âœ… ì™„ë£Œ                    |
| Syntax Check              | âœ… 0 errors                |
| Functionality Test        | âœ… PASS                    |
| Regression Test           | âš ï¸ ë¡œê·¸ì¸ í•„ìš” (ì˜ˆì™¸ ë³´ê³ ) |
| JeDebug ê²€ì¦              | âœ… ëª¨ë“  ìœ„í—˜ ì™„í™”ë¨        |

**ë°°í¬ ì¤€ë¹„ ì™„ë£Œ!** ğŸš€

---

**End of Checklist**
