# íšŒì› ë“±ê¸‰ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸ (v2.0)

**ì‘ì„±ì¼**: 2025-12-15  
**ì—…ë°ì´íŠ¸**: 2025-12-15 07:32 - í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸(ì¼ì¼ ìš”ì²­ + ì›”ê°„ í† í°) ì ìš©  
**ê¸°ë°˜ ë¬¸ì„œ**: íšŒì›ë“±ê¸‰ê´€ë¦¬ì‹œìŠ¤í…œ\_ì „ë¬¸ê°€íšŒì˜ë³´ê³ ì„œ.md, LLMì„œë¹„ìŠ¤ìš”ê¸ˆì œ\_ë ˆí¼ëŸ°ìŠ¤ë³´ê³ ì„œ.md  
**ë‹´ë‹¹ì**: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì, UX/UI ë””ìì¸ ì „ë¬¸ê°€, AI/ML ì—”ì§€ë‹ˆì–´, ë°ì´í„° ì—”ì§€ë‹ˆì–´, DevOps ì—”ì§€ë‹ˆì–´

---

## ê°œìš”

ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” **ëŒ€ê¸°ì—… ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë°˜ì˜í•œ LLM API ì‚¬ìš©ëŸ‰ ê¸°ë°˜ íšŒì› ë“±ê¸‰ ê´€ë¦¬ ì‹œìŠ¤í…œ**ì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìƒì„¸ ê°€ì´ë“œì…ë‹ˆë‹¤.

> ğŸ†• **v2.0 ì£¼ìš” ë³€ê²½ ì‚¬í•­**
>
> - **í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ ì ìš©**: ë‚´ë¶€ í† í° ì¶”ì  + ì‚¬ìš©ì ì¹œí™”ì  ì¼ì¼ ìš”ì²­ íšŸìˆ˜ í‘œì‹œ
> - **ì¼ì¼ ë¦¬ì…‹ ì¶”ê°€**: Google Gemini ë°©ì‹ ì°¸ê³  (ë§¤ì¼ ìì • ë¦¬ì…‹)
> - **Fair Use ì •ì±…**: Notion AI ë°©ì‹ ì°¸ê³  (ì•…ìš© ë°©ì§€)
> - **ë“±ê¸‰ë³„ í• ë‹¹ëŸ‰ ìˆ˜ì •**: Grammarly, ChatGPT Plus ë ˆí¼ëŸ°ìŠ¤ ê¸°ë°˜

---

## ë“±ê¸‰ êµ¬ì¡° (v2.0 - í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë‚´ë¶€: í† í° ê¸°ë°˜ ì¶”ì  (ì •í™•í•œ ë¹„ìš© ê³„ì‚°)              â”‚
â”‚  â†“                                                  â”‚
â”‚  ì‚¬ìš©ì í‘œì‹œ: "ì˜¤ëŠ˜ NíšŒ" + "ì´ë²ˆ ë‹¬ Ní† í°"           â”‚
â”‚  â†“                                                  â”‚
â”‚  ë¦¬ì…‹: ì¼ì¼ ìš”ì²­ = ë§¤ì¼ ìì • / ì›”ê°„ í† í° = ë§¤ì›” 1ì¼  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë“±ê¸‰ë³„ LLM ì‚¬ìš©ëŸ‰ í• ë‹¹ (ë””ë ‰í„° ì§€ì •)

| ë“±ê¸‰        | ì¼ì¼ ìš”ì²­ | ì›”ê°„ í† í°  | ë¹„ê³           | AI ê¸°ëŠ¥             |
| ----------- | --------- | ---------- | ------------- | ------------------- |
| **pending** | 0         | 0          | ì„œë¹„ìŠ¤ ë¶ˆê°€   | ë¶ˆê°€                |
| **free**    | **5íšŒ**   | **10,000** | ì„œë¹„ìŠ¤ ì²´í—˜ìš© | ê¸°ë³¸ AIë§Œ           |
| **premium** | **50íšŒ**  | **30,000** | ìœ ë£Œ íšŒì›     | ëª¨ë“  AI             |
| **special** | ë¬´ì œí•œ    | 200,000    | í—¤ë¹„ ìœ ì €     | ëª¨ë“  AI + ìš°ì„  ì²˜ë¦¬ |
| **admin**   | ë¬´ì œí•œ    | ë¬´ì œí•œ     | -             | ëª¨ë“  ê¸°ëŠ¥           |

> ğŸ“Š **í• ë‹¹ëŸ‰ ê¸°ì¤€ (ë””ë ‰í„° ì§€ì •)**
>
> - `free` ì¼ì¼ 5íšŒ: ì„œë¹„ìŠ¤ ì²´í—˜ìš© (ë¬´ë¶„ë³„í•œ ì‚¬ìš© ë°©ì§€)
> - `premium` ì¼ì¼ 50íšŒ / ì›” 30,000í† í°: ìœ ë£Œ íšŒì› ê¸°ì¤€

### í’ˆì§ˆ ê¸°ì¤€ (ëª¨ë“  í•­ëª©ì— ì ìš©)

- [x] âœ… ì½”ë”© ìŠ¤íƒ€ì¼ ì¼ì¹˜ (ê¸°ì¡´ í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ ì¤€ìˆ˜)
- [x] âœ… ëª…í™•í•œ í•¨ìˆ˜ëª…/ë³€ìˆ˜ëª… (ì˜ë¬¸, camelCase/PascalCase)
- [x] âœ… ì—ëŸ¬ ì²˜ë¦¬ ì¡´ì¬ (try-catch, ì—ëŸ¬ ë©”ì‹œì§€ í•œê¸€í™”)
- [x] âœ… ì„±ëŠ¥ ì´ìŠˆ ì—†ìŒ (ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§, ê³¼ë„í•œ API í˜¸ì¶œ ë°©ì§€)
- [x] âœ… ì ‘ê·¼ì„± ê³ ë ¤ (aria-label, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜)

---

## Phase 1: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¶•

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì¼
**ë‹´ë‹¹**: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì

### ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥             | ì˜í–¥ ì—¬ë¶€ | í™•ì¸ ë°©ë²•                             |
| ---------------- | --------- | ------------------------------------- |
| ì‚¬ìš©ì íšŒì›ê°€ì…  | âš ï¸ ê°€ëŠ¥   | íšŒì›ê°€ì… í›„ profiles ë ˆì½”ë“œ ìƒì„± í™•ì¸ |
| ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ  | âœ… ì—†ìŒ   | ê¸°ì¡´ ì¸ì¦ í”Œë¡œìš° ë³€ê²½ ì—†ìŒ            |
| ê¸°ì¡´ ë¬¸ì„œ/drafts | âœ… ì—†ìŒ   | user_id ì™¸ë˜í‚¤ ìœ ì§€                   |

### 1.1 ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±

**íŒŒì¼**: `backend/migrations/003_profiles_schema.sql` [NEW]

- [x] **1.1.1** `profiles` í…Œì´ë¸” ìƒì„± SQL ì‘ì„±

  ```sql
  CREATE TABLE profiles (
      id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
      role TEXT DEFAULT 'pending',
      tier INTEGER DEFAULT 0,
      is_approved BOOLEAN DEFAULT FALSE,
      approved_at TIMESTAMPTZ,
      approved_by UUID REFERENCES auth.users(id),
      subscription_expires_at TIMESTAMPTZ,
      -- ğŸ†• v2.0: í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ í•„ë“œ
      monthly_token_limit INTEGER DEFAULT 0,      -- ì›”ê°„ í† í° í•œë„
      daily_request_limit INTEGER DEFAULT 0,      -- ì¼ì¼ ìš”ì²­ ì œí•œ
      created_at TIMESTAMPTZ DEFAULT NOW(),
      updated_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

````

- ì˜ì¡´ì„±: ì—†ìŒ
- í’ˆì§ˆ: í…Œì´ë¸”ëª…/ì»¬ëŸ¼ëª… snake_case í™•ì¸

- [x] **1.1.2** `role_history` í…Œì´ë¸” ìƒì„± SQL ì‘ì„±

  ```sql
  CREATE TABLE role_history (
      id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
      user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
      previous_role TEXT,
      new_role TEXT,
      changed_by UUID REFERENCES auth.users(id),
      reason TEXT,
      created_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

  - ì—°ê²°: profiles í…Œì´ë¸”ì˜ role ë³€ê²½ ì‹œ ìë™ ë¡œê¹…

- [x] **1.1.3** `llm_usage` í…Œì´ë¸” ìƒì„± (LLM ì‚¬ìš©ëŸ‰ ì¶”ì  í•µì‹¬)

  ```sql
  CREATE TABLE llm_usage (
      id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
      user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,

      -- ì‚¬ìš©ëŸ‰ ìƒì„¸
      request_type TEXT NOT NULL,           -- 'chat', 'summarize', 'generate', 'edit'
      model_name TEXT NOT NULL,             -- 'gpt-4', 'gpt-3.5-turbo', 'gemini-pro'
      input_tokens INTEGER NOT NULL,        -- ì…ë ¥ í† í° ìˆ˜
      output_tokens INTEGER NOT NULL,       -- ì¶œë ¥ í† í° ìˆ˜
      total_tokens INTEGER GENERATED ALWAYS AS (input_tokens + output_tokens) STORED,

      -- ë¹„ìš© ê³„ì‚°
      estimated_cost_usd DECIMAL(10, 6),

      -- ë©”íƒ€ë°ì´í„°
      request_id TEXT,
      response_time_ms INTEGER,
      is_cached BOOLEAN DEFAULT FALSE,

      created_at TIMESTAMPTZ DEFAULT NOW()
  );
  ```

  - ì—°ê²°: Phase 6ì˜ callLLM ë˜í¼ì—ì„œ í˜¸ì¶œ

- [x] **1.1.4** ğŸ†• `llm_daily_usage` í…Œì´ë¸” ìƒì„± (ì¼ì¼ ìš”ì²­ ì¶”ì )

  ```sql
  -- v2.0: ì¼ì¼ ìš”ì²­ íšŸìˆ˜ ë¹ ë¥¸ ì¡°íšŒìš©
  CREATE TABLE llm_daily_usage (
      id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
      user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
      usage_date DATE NOT NULL DEFAULT CURRENT_DATE,

      -- ì¼ì¼ ì§‘ê³„
      request_count INTEGER DEFAULT 0,

      -- ì¸ë±ìŠ¤ìš© ë³µí•© ìœ ë‹ˆí¬
      UNIQUE(user_id, usage_date)
  );
  ```

  - ìš©ë„: ì¼ì¼ ìš”ì²­ íšŸìˆ˜ ë¹ ë¥¸ ì¡°íšŒ (ë§¤ ìš”ì²­ë§ˆë‹¤ COUNT ì¿¼ë¦¬ ë°©ì§€)
  - ì—°ê²°: Phase 6ì˜ checkDailyQuota í•¨ìˆ˜ì—ì„œ ì‚¬ìš©

- [x] **1.1.5** `llm_usage_summary` í…Œì´ë¸” ìƒì„± (ì›”ê°„ ì§‘ê³„ ìºì‹œ)

  ```sql
  CREATE TABLE llm_usage_summary (
      id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
      user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,

      period_type TEXT NOT NULL,            -- 'daily', 'monthly'
      period_start DATE NOT NULL,

      total_tokens INTEGER DEFAULT 0,
      total_requests INTEGER DEFAULT 0,
      total_cost_usd DECIMAL(10, 4) DEFAULT 0,

      tokens_remaining INTEGER,
      requests_remaining INTEGER,

      created_at TIMESTAMPTZ DEFAULT NOW(),
      updated_at TIMESTAMPTZ DEFAULT NOW(),

      UNIQUE(user_id, period_type, period_start)
  );
  ```

- [x] **1.1.6** ì¸ë±ìŠ¤ ìƒì„±

  ```sql
  -- profiles
  CREATE INDEX idx_profiles_role ON profiles(role);
  CREATE INDEX idx_profiles_is_approved ON profiles(is_approved);

  -- llm_usage
  CREATE INDEX idx_llm_usage_user_id ON llm_usage(user_id);
  CREATE INDEX idx_llm_usage_created_at ON llm_usage(created_at DESC);
  CREATE INDEX idx_llm_usage_user_date ON llm_usage(user_id, created_at);

  -- ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ ë¹ ë¥¸ ì¡°íšŒ
  CREATE INDEX idx_llm_daily_usage_lookup ON llm_daily_usage(user_id, usage_date);
  CREATE INDEX idx_llm_usage_summary_lookup ON llm_usage_summary(user_id, period_type, period_start);
  ```

- [x] **1.1.7** updated_at ìë™ ê°±ì‹  íŠ¸ë¦¬ê±° ì ìš©

### 1.2 RLS ì •ì±… ì¶”ê°€

**íŒŒì¼**: `backend/migrations/004_profiles_rls.sql` [NEW]

- [x] **1.2.1** profiles í…Œì´ë¸” RLS í™œì„±í™” ë° ì •ì±…
- [x] **1.2.2** ë³¸ì¸ í”„ë¡œí•„ ì¡°íšŒ/ìˆ˜ì • ì •ì±…
- [x] **1.2.3** ê´€ë¦¬ì ì „ì²´ ì¡°íšŒ ì •ì±…
- [x] **1.2.4** role_history RLS ì •ì±… (ê´€ë¦¬ìë§Œ)
- [x] **1.2.5** llm_usage, llm_daily_usage RLS ì •ì±…

  ```sql
  -- ë³¸ì¸ ì‚¬ìš©ëŸ‰ë§Œ ì¡°íšŒ ê°€ëŠ¥
  CREATE POLICY "Users can view own llm_usage"
      ON llm_usage FOR SELECT
      USING (auth.uid() = user_id);

  -- ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ë„ ë³¸ì¸ë§Œ
  CREATE POLICY "Users can view own llm_daily_usage"
      ON llm_daily_usage FOR SELECT
      USING (auth.uid() = user_id);
  ```

### 1.3 ìë™ í”„ë¡œí•„/í• ë‹¹ëŸ‰ íŠ¸ë¦¬ê±°

**íŒŒì¼**: `backend/migrations/003_profiles_schema.sql`ì— ì¶”ê°€

- [x] **1.3.1** íšŒì›ê°€ì… ì‹œ í”„ë¡œí•„ ìë™ ìƒì„±

  ```sql
  CREATE OR REPLACE FUNCTION handle_new_user()
  RETURNS TRIGGER AS $$
  BEGIN
      INSERT INTO profiles (
          id, role,
          monthly_token_limit, daily_request_limit
      )
      VALUES (
          NEW.id, 'pending',
          0, 0  -- pendingì€ ì‚¬ìš© ë¶ˆê°€
      );
      RETURN NEW;
  END;
  $$ LANGUAGE plpgsql SECURITY DEFINER;
  ```

- [x] **1.3.2** ğŸ†• v2.0: ì—­í•  ë³€ê²½ ì‹œ í• ë‹¹ëŸ‰ ìë™ ì—…ë°ì´íŠ¸
  ```sql
  CREATE OR REPLACE FUNCTION update_role_limits()
  RETURNS TRIGGER AS $$
  BEGIN
      CASE NEW.role
          WHEN 'free' THEN
              NEW.monthly_token_limit := 10000;
              NEW.daily_request_limit := 5;     -- ë””ë ‰í„° ì§€ì •
          WHEN 'premium' THEN
              NEW.monthly_token_limit := 30000;
              NEW.daily_request_limit := 50;    -- ë””ë ‰í„° ì§€ì •
          WHEN 'special' THEN
              NEW.monthly_token_limit := 200000;
              NEW.daily_request_limit := 999999;
          WHEN 'admin' THEN
              NEW.monthly_token_limit := 999999999;
              NEW.daily_request_limit := 999999;
          ELSE
              NEW.monthly_token_limit := 0;
              NEW.daily_request_limit := 0;
      END CASE;
      RETURN NEW;
  END;
  $$ LANGUAGE plpgsql;
  ```

### Phase 1 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ Syntax ì˜¤ë¥˜ í™•ì¸
  - Supabase SQL Editorì—ì„œ ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‹¤í–‰
  - ì—ëŸ¬ ë©”ì‹œì§€ ì—†ì´ ì™„ë£Œ í™•ì¸

â–¡ í…Œì´ë¸” ìƒì„± í™•ì¸
  - profiles, role_history, llm_usage, llm_daily_usage, llm_usage_summary ì¡´ì¬

â–¡ íŠ¸ë¦¬ê±° í…ŒìŠ¤íŠ¸
  - ìƒˆ ì‚¬ìš©ì íšŒì›ê°€ì… â†’ profilesì— pending, í• ë‹¹ëŸ‰ 0 í™•ì¸
  - ì—­í•  ë³€ê²½(pending â†’ free) â†’ daily_request_limit = 5 í™•ì¸

â–¡ ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸
  - ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì •ìƒ
  - ê¸°ì¡´ documents, drafts ì¡°íšŒ ì •ìƒ
```

---

## Phase 2: í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì… ë° í›… í™•ì¥

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì¼
**ë‹´ë‹¹**: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì

### ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥              | ì˜í–¥ ì—¬ë¶€ | í™•ì¸ ë°©ë²•                  |
| ----------------- | --------- | -------------------------- |
| useAuth í›… ì‚¬ìš©ì²˜ | âš ï¸ ê°€ëŠ¥   | íƒ€ì… í˜¸í™˜ì„± ìœ ì§€ í•„ìš”      |
| ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ  | âš ï¸ ê°€ëŠ¥   | user ê°ì²´ í™•ì¥ìœ¼ë¡œ UI ì˜í–¥ |
| ë³´í˜¸ëœ ë¼ìš°íŠ¸     | âœ… ì—†ìŒ   | ê¸°ì¡´ ë¡œì§ ìœ ì§€             |

### 2.1 íƒ€ì… ì •ì˜ ì¶”ê°€

**íŒŒì¼**: `frontend/src/types/auth.ts` [NEW]

- [x] **2.1.1** UserRole íƒ€ì… ì •ì˜

  ```typescript
  export type UserRole = "pending" | "free" | "premium" | "special" | "admin";
  ```

- [x] **2.1.2** ğŸ†• v2.0: í•˜ì´ë¸Œë¦¬ë“œ ì‚¬ìš©ëŸ‰ íƒ€ì… ì •ì˜

  ```typescript
  export interface UsageLimits {
    monthlyTokenLimit: number;
    dailyRequestLimit: number; // ğŸ†• v2.0
  }

  export interface DailyUsage {
    requestCount: number;
    requestsRemaining: number;
    resetAt: string; // ğŸ†• v2.0: "ë‚´ì¼ 00:00"
  }

  export interface MonthlyUsage {
    totalTokensUsed: number;
    tokensRemaining: number;
    resetAt: string; // ğŸ†• v2.0: "ë‹¤ìŒ ë‹¬ 1ì¼"
  }

  export interface UsageSummary {
    daily: DailyUsage; // ğŸ†• v2.0
    monthly: MonthlyUsage;
    percentUsed: number;
    isNearDailyLimit: boolean; // ğŸ†• v2.0: ì¼ì¼ 80% ë„ë‹¬
    isAtDailyLimit: boolean; // ğŸ†• v2.0: ì¼ì¼ 100% ë„ë‹¬
    isNearMonthlyLimit: boolean;
    isAtMonthlyLimit: boolean;
  }
  ```

- [x] **2.1.3** UserProfile ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (í• ë‹¹ëŸ‰ í¬í•¨)

  ```typescript
  export interface UserProfile {
    id: string;
    role: UserRole;
    tier: number;
    isApproved: boolean;
    approvedAt: string | null;
    subscriptionExpiresAt: string | null;
    monthlyTokenLimit: number;
    dailyRequestLimit: number; // ğŸ†• v2.0
  }
  ```

- [x] **2.1.4** types/index.tsì— export ì¶”ê°€

### 2.2 useAuth í›… í™•ì¥

**íŒŒì¼**: `frontend/src/hooks/useAuth.ts` (ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •)

- [x] **2.2.1** ìƒíƒœì— profile ì¶”ê°€
- [x] **2.2.2** fetchProfile í•¨ìˆ˜ ì‘ì„±
- [x] **2.2.3** useEffectì— í”„ë¡œí•„ ì¡°íšŒ ë¡œì§ ì¶”ê°€
- [x] **2.2.4** ğŸ†• v2.0: ë°˜í™˜ê°’ì— ì¼ì¼ ì œí•œ ì •ë³´ ì¶”ê°€
  ```typescript
  return {
    user,
    profile,
    role: profile?.role ?? null,
    isAdmin: profile?.role === "admin",
    isPremium: ["premium", "special", "admin"].includes(profile?.role ?? ""),
    // ğŸ†• v2.0
    dailyRequestLimit: profile?.dailyRequestLimit ?? 0,
    monthlyTokenLimit: profile?.monthlyTokenLimit ?? 0,
    canUseLLM: profile?.role !== "pending" && profile?.isApproved,
    loading,
    signOut,
    signInWithGoogle,
  };
  ```

### 2.3 ğŸ†• v2.0: useLLMUsage í›… ìƒì„± (í•˜ì´ë¸Œë¦¬ë“œ)

**íŒŒì¼**: `frontend/src/hooks/useLLMUsage.ts` [NEW]

- [x] **2.3.1** ì¼ì¼ + ì›”ê°„ ì‚¬ìš©ëŸ‰ ì¡°íšŒ í›…

  ```typescript
  export function useLLMUsage(): UseLLMUsageReturn {
    const [usage, setUsage] = useState<UsageSummary | null>(null);
    const { user, profile } = useAuth();

    const fetchUsage = useCallback(async () => {
      if (!user || !profile) return;

      // ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ ì¡°íšŒ
      const today = new Date().toISOString().split("T")[0];
      const { data: dailyData } = await supabase
        .from("llm_daily_usage")
        .select("request_count")
        .eq("user_id", user.id)
        .eq("usage_date", today)
        .single();

      const dailyCount = dailyData?.request_count ?? 0;
      const dailyLimit = profile.dailyRequestLimit;

      // ì›”ê°„ ì‚¬ìš©ëŸ‰ ì¡°íšŒ
      const { data: monthlyData } = await supabase
        .from("llm_usage_summary")
        .select("total_tokens")
        .eq("user_id", user.id)
        .eq("period_type", "monthly")
        .eq("period_start", getCurrentMonthStart())
        .single();

      const monthlyTokens = monthlyData?.total_tokens ?? 0;

      setUsage({
        daily: {
          requestCount: dailyCount,
          requestsRemaining: Math.max(0, dailyLimit - dailyCount),
          resetAt: "ë‚´ì¼ 00:00",
        },
        monthly: {
          totalTokensUsed: monthlyTokens,
          tokensRemaining: Math.max(
            0,
            profile.monthlyTokenLimit - monthlyTokens
          ),
          resetAt: "ë‹¤ìŒ ë‹¬ 1ì¼",
        },
        isNearDailyLimit: dailyCount >= dailyLimit * 0.8,
        isAtDailyLimit: dailyCount >= dailyLimit,
        isNearMonthlyLimit: monthlyTokens >= profile.monthlyTokenLimit * 0.8,
        isAtMonthlyLimit: monthlyTokens >= profile.monthlyTokenLimit,
        // ...
      });
    }, [user, profile]);

    // ...
  }
  ```

- [x] **2.3.2** í›…ì—ì„œ refetch í•¨ìˆ˜ ì œê³µ (API í˜¸ì¶œ í›„ ê°±ì‹ ìš©)

### 2.4 ê¶Œí•œ ì²´í¬ ìœ í‹¸ë¦¬í‹°

**íŒŒì¼**: `frontend/src/lib/permissions.ts` [NEW]

- [x] **2.4.1** hasPermission í•¨ìˆ˜ ì‘ì„±
- [x] **2.4.2** ROLE_HIERARCHY ìƒìˆ˜ ì •ì˜
- [x] **2.4.3** hasMinimumRole í•¨ìˆ˜ ì‘ì„±
- [x] **2.4.4** ğŸ†• v2.0: canMakeLLMRequest í•¨ìˆ˜ (ì¼ì¼ + ì›”ê°„ ì²´í¬)

  ```typescript
  export function canMakeLLMRequest(usage: UsageSummary | null): {
    allowed: boolean;
    reason: "ok" | "daily_limit" | "monthly_limit";
  } {
    if (!usage) return { allowed: false, reason: "ok" };

    // ğŸ†• v2.0: ì¼ì¼ ì œí•œ ë¨¼ì € ì²´í¬ (ë” ë¹ ë¥¸ ë¦¬ì…‹)
    if (usage.isAtDailyLimit) {
      return { allowed: false, reason: "daily_limit" };
    }

    if (usage.isAtMonthlyLimit) {
      return { allowed: false, reason: "monthly_limit" };
    }

    return { allowed: true, reason: "ok" };
  }
  ```

### Phase 2 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ í™•ì¸
  - í„°ë¯¸ë„: cd frontend && npm run build
  - íƒ€ì… ì—ëŸ¬ 0ê°œ í™•ì¸

â–¡ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
  - ë¡œê·¸ì¸ í›„ ì½˜ì†”ì—ì„œ profile.dailyRequestLimit ê°’ í™•ì¸
  - useLLMUsage í›…ì˜ daily.requestCount ì •ìƒ ë°˜í™˜

â–¡ ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸
  - ê¸°ì¡´ useAuth ì‚¬ìš©ì²˜ì—ì„œ ì—ëŸ¬ ì—†ìŒ
  - ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì •ìƒ ë™ì‘
```

---

## Phase 3: ë¯¸ë“¤ì›¨ì–´ RBAC í™•ì¥

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì¼
**ë‹´ë‹¹**: ì‹œë‹ˆì–´ ê°œë°œì

(ê¸°ì¡´ê³¼ ë™ì¼ - ìƒëµ)

### Phase 3 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–  ë¯¸ë“¤ì›¨ì–´ ë™ì‘ í™•ì¸ - RBAC í™•ì¥ ì™„ë£Œ
â–  ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸ - TypeScript ë¹Œë“œ ì„±ê³µ
```

---

## Phase 4: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ UI

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-4ì¼
**ë‹´ë‹¹**: ì£¼ë‹ˆì–´ ê°œë°œì, UX/UI ë””ìì¸ ì „ë¬¸ê°€

### 4.1 ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ

(ê¸°ì¡´ê³¼ ë™ì¼)

### 4.2 íšŒì› ëª©ë¡ í˜ì´ì§€ (ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ ì»¬ëŸ¼ ì¶”ê°€)

**íŒŒì¼**: `frontend/src/app/admin/users/page.tsx` [NEW]

- [ ] **4.2.1** íšŒì› ëª©ë¡ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸
  - ğŸ†• v2.0 ì»¬ëŸ¼: ì´ë©”ì¼, ë“±ê¸‰, **ì˜¤ëŠ˜ ì‚¬ìš©**, **ì›”ê°„ ì‚¬ìš©**, ê°€ì…ì¼, ì•¡ì…˜

### 4.3 ğŸ†• v2.0: ì „ì²´ ì‚¬ìš©ëŸ‰ ëŒ€ì‹œë³´ë“œ (ì¼ì¼ ì¶”ì´ ê°•í™”)

**íŒŒì¼**: `frontend/src/app/admin/usage/page.tsx` [NEW]

- [ ] **4.3.1** ì „ì²´ ì„œë¹„ìŠ¤ LLM ë¹„ìš© í˜„í™©

  - ğŸ†• v2.0: ì¼ê°„ ìš”ì²­ ì¶”ì´ ì°¨íŠ¸
  - ì›”ê°„ í† í° ì‚¬ìš©ëŸ‰ ì°¨íŠ¸
  - ì¶”ì • ë¹„ìš© (USD)

- [ ] **4.3.2** ë“±ê¸‰ë³„ ì¼ì¼ ì‚¬ìš©ëŸ‰ ë¶„í¬

### 4.4 ğŸ†• v2.0: ì‚¬ìš©ëŸ‰ ê²Œì´ì§€ ì»´í¬ë„ŒíŠ¸ (ë“€ì–¼ ê²Œì´ì§€)

**íŒŒì¼**: `frontend/src/components/ui/UsageGauge.tsx` [NEW]

- [ ] **4.4.1** ë“€ì–¼ ê²Œì´ì§€ ì»´í¬ë„ŒíŠ¸

  ```typescript
  interface DualUsageGaugeProps {
    dailyUsed: number;
    dailyLimit: number;
    monthlyUsed: number;
    monthlyLimit: number;
  }

  // ğŸ†• v2.0: ë‘ ê°œì˜ ê²Œì´ì§€ë¥¼ ë‚˜ë€íˆ í‘œì‹œ
  // "ì˜¤ëŠ˜ 5/20íšŒ" | "ì´ë²ˆ ë‹¬ 1,234/10,000 í† í°"
  ```

  - ìƒ‰ìƒ: 80% ë¯¸ë§Œ(ì´ˆë¡), 80-90%(ë…¸ë‘), 90% ì´ìƒ(ë¹¨ê°•)
  - ì ‘ê·¼ì„±: aria-valuenow, aria-valuemax

### Phase 4 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ UI ë Œë”ë§ í™•ì¸
  - /admin/users í˜ì´ì§€ì— ì¼ì¼ + ì›”ê°„ ì‚¬ìš©ëŸ‰ ì»¬ëŸ¼ í‘œì‹œ
  - ë“€ì–¼ ê²Œì´ì§€ ì •ìƒ ë Œë”ë§

â–¡ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸
  - DualUsageGaugeì— aria ì†ì„± ì ìš©
```

---

## Phase 5: ê´€ë¦¬ì API ì—°ë™

(ê¸°ì¡´ê³¼ ìœ ì‚¬ - ì¼ì¼ ì‚¬ìš©ëŸ‰ ì¶”ê°€)

---

## Phase 6: LLM API ì‚¬ìš©ëŸ‰ ì¶”ì  ì‹œìŠ¤í…œ (ğŸ†• v2.0 í•˜ì´ë¸Œë¦¬ë“œ)

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-4ì¼
**ë‹´ë‹¹**: AI/ML ì—”ì§€ë‹ˆì–´, ì‹œë‹ˆì–´ ê°œë°œì, ë°±ì—”ë“œ ê°œë°œì

### ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥              | ì˜í–¥ ì—¬ë¶€    | í™•ì¸ ë°©ë²•             |
| ----------------- | ------------ | --------------------- |
| ê¸°ì¡´ LLM API í˜¸ì¶œ | âš ï¸ í•„ìˆ˜ ìˆ˜ì • | ëª¨ë“  í˜¸ì¶œì— ë˜í¼ ì ìš© |
| AI ì‘ë‹µ ì†ë„      | âš ï¸ ê°€ëŠ¥      | ë¡œê¹… ì˜¤ë²„í—¤ë“œ ìµœì†Œí™”  |

### 6.1 ğŸ†• v2.0: LLM í˜¸ì¶œ ë˜í¼ êµ¬í˜„ (í•˜ì´ë¸Œë¦¬ë“œ ì²´í¬)

**íŒŒì¼**: `frontend/src/lib/llm/wrapper.ts` [NEW]

- [ ] **6.1.1** LLM API í˜¸ì¶œ ë˜í¼ í•¨ìˆ˜

  ```typescript
  export async function callLLM(
    options: LLMRequestOptions
  ): Promise<LLMResponse> {
    // ğŸ†• v2.0: 1. ì¼ì¼ í• ë‹¹ëŸ‰ ë¨¼ì € ì²´í¬ (ë¹ ë¥¸ ì‘ë‹µ)
    const dailyQuota = await checkDailyQuota(options.userId);
    if (!dailyQuota.allowed) {
      throw new DailyQuotaExceededError(
        "ì˜¤ëŠ˜ì˜ AI ì‚¬ìš© íšŸìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
      );
    }

    // 2. ì›”ê°„ í† í° í• ë‹¹ëŸ‰ ì²´í¬
    const monthlyQuota = await checkMonthlyQuota(options.userId);
    if (!monthlyQuota.allowed) {
      throw new MonthlyQuotaExceededError(
        "ì´ë²ˆ ë‹¬ AI í† í°ì„ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤."
      );
    }

    // 3. ìºì‹œ ì²´í¬
    const cached = await getFromCache(options);
    if (cached) {
      await logUsage({ ...options, cached: true, tokens: 0 });
      await incrementDailyUsage(options.userId); // ğŸ†• v2.0: ìºì‹œë„ íšŸìˆ˜ ì¹´ìš´íŠ¸
      return cached;
    }

    // 4. ì‹¤ì œ LLM API í˜¸ì¶œ
    const response = await actualLLMCall(options);

    // 5. ì‚¬ìš©ëŸ‰ ê¸°ë¡
    await Promise.all([
      logUsage(response),
      incrementDailyUsage(options.userId), // ğŸ†• v2.0
      updateMonthlySummary(options.userId, response.usage.totalTokens),
    ]);

    return response;
  }
  ```

- [ ] **6.1.2** ğŸ†• v2.0: ì¼ì¼ í• ë‹¹ëŸ‰ ì²´í¬ í•¨ìˆ˜

  ```typescript
  async function checkDailyQuota(
    userId: string
  ): Promise<{ allowed: boolean }> {
    const today = new Date().toISOString().split("T")[0];

    const { data: dailyUsage } = await supabase
      .from("llm_daily_usage")
      .select("request_count")
      .eq("user_id", userId)
      .eq("usage_date", today)
      .single();

    const { data: profile } = await supabase
      .from("profiles")
      .select("daily_request_limit")
      .eq("id", userId)
      .single();

    const count = dailyUsage?.request_count ?? 0;
    const limit = profile?.daily_request_limit ?? 0;

    return { allowed: count < limit };
  }
  ```

- [ ] **6.1.3** ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ ì¦ê°€ í•¨ìˆ˜

  ```typescript
  async function incrementDailyUsage(userId: string): Promise<void> {
    const today = new Date().toISOString().split("T")[0];

    // UPSERT: ìˆìœ¼ë©´ +1, ì—†ìœ¼ë©´ ìƒì„±
    await supabase.rpc("increment_daily_usage", {
      p_user_id: userId,
      p_date: today,
    });
  }
  ```

- [ ] **6.1.4** DailyQuotaExceededError, MonthlyQuotaExceededError ì»¤ìŠ¤í…€ ì—ëŸ¬

### 6.2 ğŸ†• v2.0: ì¼ì¼ ì‚¬ìš©ëŸ‰ RPC í•¨ìˆ˜

**íŒŒì¼**: `backend/migrations/005_usage_functions.sql` [NEW]

- [ ] **6.2.1** increment_daily_usage RPC í•¨ìˆ˜

  ```sql
  CREATE OR REPLACE FUNCTION increment_daily_usage(
      p_user_id UUID,
      p_date DATE
  )
  RETURNS VOID AS $$
  BEGIN
      INSERT INTO llm_daily_usage (user_id, usage_date, request_count)
      VALUES (p_user_id, p_date, 1)
      ON CONFLICT (user_id, usage_date)
      DO UPDATE SET request_count = llm_daily_usage.request_count + 1;
  END;
  $$ LANGUAGE plpgsql SECURITY DEFINER;
  ```

- [ ] **6.2.2** ğŸ†• v2.0: ì¼ì¼ ìì • ë¦¬ì…‹ (ìë™ - í…Œì´ë¸” êµ¬ì¡°ë¡œ ì²˜ë¦¬)

  - `usage_date` ì»¬ëŸ¼ìœ¼ë¡œ ìë™ ë¶„ë¦¬ë˜ë¯€ë¡œ ë³„ë„ ë¦¬ì…‹ ë¶ˆí•„ìš”

- [ ] **6.2.3** update_monthly_summary RPC í•¨ìˆ˜ (ê¸°ì¡´ê³¼ ë™ì¼)

### 6.3 ê¸°ì¡´ LLM í˜¸ì¶œ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

- [ ] **6.3.1** ê¸°ì¡´ LLM í˜¸ì¶œ ìœ„ì¹˜ íŒŒì•…
- [ ] **6.3.2** ëª¨ë“  í˜¸ì¶œì„ callLLM ë˜í¼ë¡œ êµì²´
- [ ] **6.3.3** ì—ëŸ¬ í•¸ë“¤ë§ (ì¼ì¼/ì›”ê°„ êµ¬ë¶„)

### Phase 6 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ ì¼ì¼ ì œí•œ í…ŒìŠ¤íŠ¸
  - 5íšŒ ì‚¬ìš© í›„ DailyQuotaExceededError ë°œìƒ í™•ì¸ (free ê¸°ì¤€)
  - ë‹¤ìŒ ë‚ (ë‚ ì§œ ë³€ê²½) í›„ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥ í™•ì¸

â–¡ ì›”ê°„ ì œí•œ í…ŒìŠ¤íŠ¸
  - í† í° í•œë„ ì´ˆê³¼ í›„ MonthlyQuotaExceededError ë°œìƒ í™•ì¸

â–¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  - ë¡œê¹…ìœ¼ë¡œ ì¸í•œ ì‘ë‹µ ì§€ì—° 200ms ë¯¸ë§Œ

â–¡ ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸
  - ëª¨ë“  AI ê¸°ëŠ¥ ì •ìƒ ë™ì‘
```

---

## Phase 7: ğŸ†• v2.0 ì‚¬ìš©ì ì‚¬ìš©ëŸ‰ UI (í•˜ì´ë¸Œë¦¬ë“œ)

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì¼
**ë‹´ë‹¹**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì, UX/UI ë””ìì¸ ì „ë¬¸ê°€

### ì˜í–¥ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°ì¡´ ê¸°ëŠ¥

| ê¸°ëŠ¥            | ì˜í–¥ ì—¬ë¶€ | í™•ì¸ ë°©ë²•             |
| --------------- | --------- | --------------------- |
| ì—ë””í„° UI       | âš ï¸ ì¶”ê°€   | ì‚¬ìš©ëŸ‰ í‘œì‹œ ì˜ì—­ ì¶”ê°€ |
| í—¤ë”/ë„¤ë¹„ê²Œì´ì…˜ | âš ï¸ ì¶”ê°€   | ì‚¬ìš©ëŸ‰ ê²Œì´ì§€ ì¶”ê°€    |

### 7.1 ğŸ†• v2.0: ë“€ì–¼ ì‚¬ìš©ëŸ‰ í‘œì‹œ ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `frontend/src/components/usage/UsageIndicator.tsx` [NEW]

- [ ] **7.1.1** í—¤ë”ìš© ë¯¸ë‹ˆ ì‚¬ìš©ëŸ‰ í‘œì‹œ (ë“€ì–¼)

  ```typescript
  // ğŸ†• v2.0: "ì˜¤ëŠ˜ 3/5íšŒ | ì´ë²ˆ ë‹¬ 1,234/10,000"
  <div className="usage-indicator">
    <span className="daily">
      ì˜¤ëŠ˜ {daily.requestCount}/{dailyLimit}íšŒ
    </span>
    <span className="divider">|</span>
    <span className="monthly">
      ì´ë²ˆ ë‹¬ {monthly.tokensUsed}/{monthlyLimit}
    </span>
  </div>
  ```

  - ì ‘ê·¼ì„±: aria-label="AI ì‚¬ìš©ëŸ‰: ì˜¤ëŠ˜ 3íšŒ ì¤‘ 5íšŒ ì‚¬ìš©, ì´ë²ˆ ë‹¬ 1234 í† í° ì¤‘ 10000 ì‚¬ìš©"

- [ ] **7.1.2** ìƒì„¸ ì‚¬ìš©ëŸ‰ ëª¨ë‹¬

  - ì¼ì¼ ìš”ì²­ íšŸìˆ˜ + ë¦¬ì…‹ ì‹œê°„ ("ë‚´ì¼ 00:00ì— ë¦¬ì…‹")
  - ì›”ê°„ í† í° ì‚¬ìš©ëŸ‰ + ë¦¬ì…‹ ì‹œê°„ ("ë‹¤ìŒ ë‹¬ 1ì¼ì— ë¦¬ì…‹")
  - ì‚¬ìš© ì´ë ¥ (ìµœê·¼ 10ê±´)

- [ ] **7.1.3** í•œë„ ê²½ê³  ë°°ë„ˆ (ì¼ì¼ ë˜ëŠ” ì›”ê°„)
  - ğŸ†• v2.0: **ì¼ì¼ ë¨¼ì € í‘œì‹œ** (ë” ë¹ ë¥¸ ë¦¬ì…‹ì´ë¯€ë¡œ ê¸ì •ì  ë©”ì‹œì§€)
  - ì¼ì¼ 80%: "ì˜¤ëŠ˜ AI ì‚¬ìš©ëŸ‰ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì–´ìš” (ë‚´ì¼ ë¦¬ì…‹)"
  - ì›”ê°„ 80%: "ì´ë²ˆ ë‹¬ AI í† í°ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì–´ìš”"

### 7.2 ğŸ†• v2.0: í•œë„ ì´ˆê³¼ UX (ì¼ì¼/ì›”ê°„ êµ¬ë¶„)

**íŒŒì¼**: `frontend/src/components/usage/QuotaExceededModal.tsx` [NEW]

- [ ] **7.2.1** ì¼ì¼ í•œë„ ì´ˆê³¼ ëª¨ë‹¬ (ê¸ì •ì  ë©”ì‹œì§€)

  ```typescript
  // ì¼ì¼ ì œí•œì€ ê³§ ë¦¬ì…‹ë˜ë¯€ë¡œ ë” ì¹œì ˆí•˜ê²Œ
  "ì˜¤ëŠ˜ì˜ AI ì‚¬ìš© íšŸìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤ ğŸ‰"
  "ë‚´ì¼ 00:00ì— ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”!"
  [í”„ë¦¬ë¯¸ì—„ ì—…ê·¸ë ˆì´ë“œë¡œ 50íšŒ/ì¼]
  ```

- [ ] **7.2.2** ì›”ê°„ í•œë„ ì´ˆê³¼ ëª¨ë‹¬

  ```typescript
  // ì›”ê°„ ì œí•œì€ ë” ê¸¸ê²Œ ê¸°ë‹¤ë ¤ì•¼ í•˜ë¯€ë¡œ ì—…ê·¸ë ˆì´ë“œ ìœ ë„
  "ì´ë²ˆ ë‹¬ AI í† í°ì„ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤"
  "ë‹¤ìŒ ë‹¬ 1ì¼ì— ë¦¬ì…‹ë©ë‹ˆë‹¤"
  [ì§€ê¸ˆ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥!]
  ```

- [ ] **7.2.3** AI ë²„íŠ¼ ë¹„í™œì„±í™” ì²˜ë¦¬
  - íˆ´íŒ: "ì˜¤ëŠ˜ ì‚¬ìš©ëŸ‰ ì´ˆê³¼" ë˜ëŠ” "ì›”ê°„ í† í° ì†Œì§„"

### 7.3 ì—ë””í„°ì— ì‚¬ìš©ëŸ‰ í‘œì‹œ í†µí•©

**íŒŒì¼**: `frontend/src/app/editor/page.tsx` (ìˆ˜ì •)

- [ ] **7.3.1** ì—ë””í„° í—¤ë”ì— UsageIndicator ì¶”ê°€
- [ ] **7.3.2** AI ê¸°ëŠ¥ í˜¸ì¶œ ì „ canMakeLLMRequest ì²´í¬
- [ ] **7.3.3** í•œë„ ì´ˆê³¼ ì‹œ ì ì ˆí•œ ëª¨ë‹¬ í‘œì‹œ

### Phase 7 ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ UI ë Œë”ë§ í™•ì¸
  - í—¤ë”ì— "ì˜¤ëŠ˜ N/20íšŒ | ì´ë²ˆ ë‹¬ N/10,000" í˜•ì‹ í‘œì‹œ
  - ì¼ì¼/ì›”ê°„ ê²½ê³  ë°°ë„ˆ ìƒ‰ìƒ êµ¬ë¶„

â–¡ UX í…ŒìŠ¤íŠ¸
  - ì¼ì¼ í•œë„ ì´ˆê³¼ â†’ "ë‚´ì¼ ë¦¬ì…‹" ì•ˆë‚´ ëª¨ë‹¬
  - ì›”ê°„ í•œë„ ì´ˆê³¼ â†’ "ì—…ê·¸ë ˆì´ë“œ" ìœ ë„ ëª¨ë‹¬

â–¡ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸
  - ì‚¬ìš©ëŸ‰ ì •ë³´ ìŠ¤í¬ë¦° ë¦¬ë” ì ‘ê·¼ ê°€ëŠ¥
```

---

## Phase 8: ë¹„ìš© ìµœì í™” ì „ëµ ì ìš©

(ê¸°ì¡´ê³¼ ë™ì¼)

---

## Phase 9: ğŸ†• v2.0 Fair Use ì •ì±… ë° ì´ìƒ íƒì§€

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì¼
**ë‹´ë‹¹**: ë³´ì•ˆ ì „ë¬¸ê°€, ë°±ì—”ë“œ ê°œë°œì

### 9.1 Fair Use ì •ì±… ë¬¸ì„œ

- [ ] **9.1.1** ì´ìš©ì•½ê´€ì— Fair Use ì¡°í•­ ì¶”ê°€
  - ë¹„ì •ìƒì  ì‚¬ìš© íŒ¨í„´ ì •ì˜
  - ìë™í™”/ë´‡ ì‚¬ìš© ê¸ˆì§€
  - ìƒì—…ì  ëŒ€ëŸ‰ ìƒì„± ì œí•œ

### 9.2 ì´ìƒ ì‚¬ìš© íƒì§€

- [ ] **9.2.1** ë¶„ë‹¹ ìš”ì²­ ìˆ˜ Rate Limiting

  - Microsoft Copilot ì°¸ê³ : ~18 ìš”ì²­/ë¶„
  - êµ¬í˜„: ë¯¸ë“¤ì›¨ì–´ ë˜ëŠ” Supabase Edge Function

- [ ] **9.2.2** ë¹„ì •ìƒ íŒ¨í„´ íƒì§€
  - ë‹¨ì‹œê°„ ê¸‰ì¦ íƒì§€
  - IP ê¸°ë°˜ ì œí•œ ê³ ë ¤

---

## Phase 10: í†µí•© í…ŒìŠ¤íŠ¸ ë° ìµœì¢… ê²€ì¦

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì¼
**ë‹´ë‹¹**: ì‹œë‹ˆì–´ ê°œë°œì, ì£¼ë‹ˆì–´ ê°œë°œì, UX/UI ë””ìì¸ ì „ë¬¸ê°€, QA

### 10.1 End-to-End ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

- [ ] **10.1.1** ì‹ ê·œ íšŒì›ê°€ì… â†’ pending ìƒíƒœ, í• ë‹¹ëŸ‰ 0
- [ ] **10.1.2** ê´€ë¦¬ìê°€ íšŒì› ìŠ¹ì¸ â†’ free, ì¼ì¼ 5íšŒ, ì›”ê°„ 10,000 í† í°
- [ ] **10.1.3** free íšŒì› AI 5íšŒ ì‚¬ìš© â†’ ì¼ì¼ í•œë„ ë„ë‹¬ â†’ ì•ˆë‚´ UI
- [ ] **10.1.4** ë‹¤ìŒ ë‚  â†’ ì¼ì¼ ë¦¬ì…‹ â†’ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥
- [ ] **10.1.5** ì›”ê°„ í† í° í•œë„ ë„ë‹¬ â†’ ì›”ê°„ í•œë„ ì•ˆë‚´ UI
- [ ] **10.1.6** ë“±ê¸‰ ì—…ê·¸ë ˆì´ë“œ â†’ í• ë‹¹ëŸ‰ ìë™ ì¦ê°€

### 10.2 ë¹„ìš© ì‹œë®¬ë ˆì´ì…˜

- [ ] **10.2.1** 100ëª… ì‚¬ìš©ì: ëª¨ë‘ free, ë§¤ì¼ 5íšŒ = 500íšŒ/ì¼
- [ ] **10.2.2** 1,000ëª… ì‚¬ìš©ì: í˜¼í•© ë“±ê¸‰ = ì•½ $Y

### Phase 10 ìµœì¢… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ ë™ì‘ í™•ì¸
  - ì¼ì¼ ì œí•œ ì •ìƒ (free: 5íšŒ, premium: 50íšŒ)
  - ì›”ê°„ ì œí•œ ì •ìƒ (ë§¤ì›” 1ì¼ ë¦¬ì…‹)
  - ë‘ ì œí•œì´ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘

â–¡ ì‚¬ìš©ì UI í™•ì¸
  - "ì˜¤ëŠ˜ N/5íšŒ | ì´ë²ˆ ë‹¬ N/10,000" (free ê¸°ì¤€)
  - ì¼ì¼/ì›”ê°„ í•œë„ ì´ˆê³¼ ì‹œ ì ì ˆí•œ ì•ˆë‚´

â–¡ ê¸°ì¡´ ì„œë¹„ìŠ¤ ì˜í–¥ ì—†ìŒ
  - ê¸°ì¡´ ì‚¬ìš©ì ë°ì´í„° ì •ìƒ
  - AI ê¸°ëŠ¥ í’ˆì§ˆ ìœ ì§€

â–¡ ë°°í¬ ì¤€ë¹„
  - í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
  - ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
  - ë¡¤ë°± ê³„íš
```

---

## ë¶€ë¡: íŒŒì¼ ëª©ë¡ ìš”ì•½

### ì‹ ê·œ ìƒì„± íŒŒì¼ (v2.0 ì¶”ê°€ë¶„ í¬í•¨)

| íŒŒì¼ ê²½ë¡œ                                              | Phase | ë‹´ë‹¹   | v2.0 ì‹ ê·œ |
| ------------------------------------------------------ | ----- | ------ | --------- |
| `backend/migrations/003_profiles_schema.sql`           | 1     | ì‹œë‹ˆì–´ | ìˆ˜ì •      |
| `backend/migrations/004_profiles_rls.sql`              | 1     | ì‹œë‹ˆì–´ | -         |
| `backend/migrations/005_usage_functions.sql`           | 6     | ì‹œë‹ˆì–´ | ìˆ˜ì •      |
| `frontend/src/types/auth.ts`                           | 2     | ì£¼ë‹ˆì–´ | ìˆ˜ì •      |
| `frontend/src/hooks/useLLMUsage.ts`                    | 2     | ì£¼ë‹ˆì–´ | ğŸ†• ìˆ˜ì •   |
| `frontend/src/lib/llm/wrapper.ts`                      | 6     | AI/ML  | ğŸ†• ìˆ˜ì •   |
| `frontend/src/components/usage/UsageIndicator.tsx`     | 7     | UX/UI  | ğŸ†• ìˆ˜ì •   |
| `frontend/src/components/usage/QuotaExceededModal.tsx` | 7     | UX/UI  | ğŸ†• ìˆ˜ì •   |
| `frontend/src/components/ui/UsageGauge.tsx`            | 4     | UX/UI  | ğŸ†• ë“€ì–¼   |

---

## v2.0 ë³€ê²½ ì´ë ¥

| ë²„ì „     | ë‚ ì§œ                 | ë³€ê²½ ë‚´ìš©                                    |
| -------- | -------------------- | -------------------------------------------- |
| v1.0     | 2025-12-15 07:06     | ì´ˆê¸° ë²„ì „ (ì›”ê°„ í† í°ë§Œ)                      |
| **v2.0** | **2025-12-15 07:32** | **í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ ì ìš©**                     |
| -        | -                    | ì¼ì¼ ìš”ì²­ ì œí•œ ì¶”ê°€ (Grammarly, Google ì°¸ê³ ) |
| -        | -                    | llm_daily_usage í…Œì´ë¸” ì¶”ê°€                  |
| -        | -                    | ë“€ì–¼ ê²Œì´ì§€ UI ì¶”ê°€                          |
| -        | -                    | ì¼ì¼/ì›”ê°„ êµ¬ë¶„ ì—ëŸ¬ ì²˜ë¦¬                     |
| -        | -                    | Fair Use ì •ì±… Phase ì¶”ê°€                     |

---

**ì‘ì„± ì™„ë£Œ**: 2025-12-15
**ë²„ì „**: v2.0 (í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸)
**ê²€í† ì ì„œëª…**: **\*\*\*\***\_\_\_\_**\*\*\*\***
````
