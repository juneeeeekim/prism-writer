# ğŸ’ PRISM Writer

> **RAG ê¸°ë°˜ ì§€ëŠ¥í˜• ê¸€ì“°ê¸° ë„êµ¬** - ë‚´ ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ ê¸€ì˜ êµ¬ì¡°ì™€ ë‚´ìš©ì„ ì¡ì•„ì£¼ëŠ” ì €ì‘ ë„êµ¬

![Version](https://img.shields.io/badge/version-0.1.0-blue)
![Status](https://img.shields.io/badge/status-Phase%205%20Complete-green)
![License](https://img.shields.io/badge/license-MIT-brightgreen)

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

PRISM WriterëŠ” ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ë¬¸ì„œë“¤ì„ RAG(Retrieval-Augmented Generation) ê¸°ìˆ ë¡œ ë¶„ì„í•˜ì—¬,
ê¸€ì“°ê¸°ì˜ **êµ¬ì¡°(Structure)** ì™€ **ë‚´ìš©(Content)** ì˜ ì´ˆì„ì„ ì œê³µí•˜ëŠ” ì›¹ ê¸°ë°˜ ì €ì‘ ë„êµ¬ì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥

| ê¸°ëŠ¥                  | ì„¤ëª…                                           | ìƒíƒœ    |
| :-------------------- | :--------------------------------------------- | :------ |
| **Dual Pane Editor**  | ì™¼ìª½(ë§ˆí¬ë‹¤ìš´ ì—ë””í„°) + ì˜¤ë¥¸ìª½(RAG ì–´ì‹œìŠ¤í„´íŠ¸) | âœ… ì™„ë£Œ |
| **Outline Generator** | ì£¼ì œ ê¸°ë°˜ ëª©ì°¨ ìë™ ìƒì„±                       | âœ… ì™„ë£Œ |
| **Reference Linking** | ë¬¸ë‹¨ë³„ ì¶œì²˜ ë§¤í•‘ ë° ê·¼ê±° ì œì‹œ                  | âœ… ì™„ë£Œ |
| **AI ì±„íŒ…**           | ê¸€ì“°ê¸° ë„ìš°ë¯¸ ëŒ€í™” ì¸í„°í˜ì´ìŠ¤                  | âœ… ì™„ë£Œ |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­         | ê¸°ìˆ                              | ì„¤ëª…                     |
| :----------- | :------------------------------- | :----------------------- |
| **Language** | Python 3.11+, TypeScript 5.3+    | ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ        |
| **Backend**  | FastAPI 0.124+                   | ê³ ì„±ëŠ¥ ë¹„ë™ê¸° API ì„œë²„   |
| **Frontend** | Next.js 14.0.4                   | React ê¸°ë°˜ ì›¹ í”„ë ˆì„ì›Œí¬ |
| **Editor**   | @uiw/react-md-editor             | ë§ˆí¬ë‹¤ìš´ ì—ë””í„°          |
| **State**    | Zustand 4.4+                     | ê²½ëŸ‰ ìƒíƒœ ê´€ë¦¬           |
| **Database** | Supabase (PostgreSQL + pgvector) | ë²¡í„° ê²€ìƒ‰ ì§€ì› DB        |
| **Testing**  | Playwright                       | E2E í…ŒìŠ¤íŠ¸               |
| **Deploy**   | Docker, Vercel, Railway          | ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°°í¬       |

---

## ğŸ›ï¸ ì•„í‚¤í…ì²˜

### RAG ê¸°ë°˜ ê³„ì¸µ êµ¬ì¡°

```
[ì‚¬ìš©ì] â†’ [Frontend (Next.js)] â†’ [API Layer]
                                       â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚       RAG Foundation         â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                        â”‚  â”‚ rag_chunks (ë²¡í„° DB)   â”‚  â”‚
                        â”‚  â”‚ user_documents (ë¬¸ì„œ)  â”‚  â”‚
                        â”‚  â”‚ rag_templates (í‰ê°€)   â”‚  â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                          â–¼                          â–¼
    [ğŸ“ ê¸€ì“°ê¸° ê¸°ëŠ¥]            [â­ í‰ê°€ ê¸°ëŠ¥]            [ğŸ’¬ ì±„íŒ… ê¸°ëŠ¥]
```

### Feature Flags

í™˜ê²½ ë³€ìˆ˜ë¡œ ê¸°ëŠ¥ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

| í”Œë˜ê·¸         | í™˜ê²½ ë³€ìˆ˜                 | ê¸°ë³¸ê°’  | ì„¤ëª…                        |
| -------------- | ------------------------- | ------- | --------------------------- |
| v3 í‰ê°€ ì‹œìŠ¤í…œ | `ENABLE_PIPELINE_V5`      | `true`  | v3 í‰ê°€ ì‹œìŠ¤í…œ ì‚¬ìš©         |
| Template ì±„íŒ…  | `USE_TEMPLATE_FOR_CHAT`   | `false` | ì±„íŒ…ì— í…œí”Œë¦¿ ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€ |
| ì¸ìš© í‘œì‹œ      | `ENABLE_SOURCE_CITATIONS` | `true`  | í‰ê°€ ê²°ê³¼ì— ì›ë¬¸ ì¸ìš© í¬í•¨  |

### ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸ (RAG)

| Method | Endpoint                     | ì„¤ëª…               |
| ------ | ---------------------------- | ------------------ |
| `POST` | `/api/rag/evaluate`          | ì¢…í•© ê¸€ í‰ê°€       |
| `POST` | `/api/rag/evaluate-holistic` | ê¸°ì¤€ë³„ í‰ê°€        |
| `POST` | `/api/rag/evaluate-single`   | ë‹¨ì¼ ê¸°ì¤€ ì¬í‰ê°€   |
| `POST` | `/api/rag/search`            | ë²¡í„° ê²€ìƒ‰          |
| `POST` | `/api/chat`                  | AI ì±„íŒ… (ìŠ¤íŠ¸ë¦¬ë°) |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
prismLM/
â”œâ”€â”€ frontend/                     # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # í™ˆí˜ì´ì§€
â”‚   â”‚   â”‚   â””â”€â”€ editor/page.tsx  # ì—ë””í„° í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ DualPane/        # Dual Pane ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ Editor/          # ë§ˆí¬ë‹¤ìš´ ì—ë””í„°
â”‚   â”‚   â”‚   â””â”€â”€ Assistant/       # AI ì–´ì‹œìŠ¤í„´íŠ¸ íŒ¨ë„
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useEditorState.ts # Zustand ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ lib/api/             # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ e2e/                     # E2E í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ playwright.config.ts     # Playwright ì„¤ì •
â”œâ”€â”€ backend/                      # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py                  # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ presentation/api/
â”‚   â”‚   â”‚   â”œâ”€â”€ outline.py       # ëª©ì°¨ ìƒì„± API
â”‚   â”‚   â”‚   â””â”€â”€ references.py    # ì°¸ì¡° ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â””â”€â”€ use_cases/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ infrastructure/
â”‚   â”‚       â”œâ”€â”€ retriever.py     # ë²¡í„° ê²€ìƒ‰
â”‚   â”‚       â””â”€â”€ prompts/         # LLM í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ migrations/              # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ docs/openapi.yaml        # API ë¬¸ì„œ
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ supabase-setup.md        # Supabase ì„¤ì • ê°€ì´ë“œ
â”‚   â””â”€â”€ user-guide.md            # ì‚¬ìš©ì ê°€ì´ë“œ
â”œâ”€â”€ plan_report/                  # ê¸°íš ë¬¸ì„œ ë° íšŒì˜ë¡
â”œâ”€â”€ docker-compose.dev.yml        # Docker ê°œë°œ í™˜ê²½
â””â”€â”€ README.md                     # ì´ ë¬¸ì„œ
```

---

## ğŸŒ API ì—”ë“œí¬ì¸íŠ¸

### System

| Method | Endpoint  | ì„¤ëª…           |
| :----- | :-------- | :------------- |
| `GET`  | `/health` | ì„œë²„ ìƒíƒœ í™•ì¸ |

### Outline (ëª©ì°¨)

| Method | Endpoint                | ì„¤ëª…             |
| :----- | :---------------------- | :--------------- |
| `POST` | `/v1/outline/generate`  | ëª©ì°¨ ìƒì„±        |
| `GET`  | `/v1/outline/templates` | ëª©ì°¨ í…œí”Œë¦¿ ëª©ë¡ |

### References (ì°¸ì¡°)

| Method   | Endpoint                              | ì„¤ëª…           |
| :------- | :------------------------------------ | :------------- |
| `POST`   | `/v1/drafts/{id}/references`          | ì°¸ì¡° ì¶”ê°€      |
| `GET`    | `/v1/drafts/{id}/references`          | ì°¸ì¡° ëª©ë¡ ì¡°íšŒ |
| `DELETE` | `/v1/drafts/{id}/references/{ref_id}` | ì°¸ì¡° ì‚­ì œ      |

> ğŸ“– ìƒì„¸ API ë¬¸ì„œ: `backend/docs/openapi.yaml`

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18+
- Python 3.11+
- Docker (ì„ íƒ)

### ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-username/prism-writer.git
cd prism-writer

# 2. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
cd frontend
cp .env.example .env.local
npm install
npm run dev              # http://localhost:3000

# 3. ë°±ì—”ë“œ ì„¤ì • (ìƒˆ í„°ë¯¸ë„)
cd backend
cp .env.example .env
pip install -r requirements.txt
python -m uvicorn main:app --reload   # http://localhost:8000
```

### E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
cd frontend
npm run test:e2e         # í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ
npm run test:e2e:ui      # UI ëª¨ë“œ
```

### Dockerë¡œ ì‹¤í–‰

```bash
docker-compose -f docker-compose.dev.yml up
```

---

## ğŸ“Š ê°œë°œ í˜„í™©

| Phase                      | ìƒíƒœ    | ì£¼ìš” ê²°ê³¼ë¬¼                 |
| :------------------------- | :------ | :-------------------------- |
| Phase 1: ê¸°ë°˜ êµ¬ì¶•         | âœ… ì™„ë£Œ | Docker, DB ìŠ¤í‚¤ë§ˆ, í™˜ê²½ì„¤ì • |
| Phase 2: Dual Pane UI      | âœ… ì™„ë£Œ | ì—ë””í„°, ì–´ì‹œìŠ¤í„´íŠ¸ íŒ¨ë„     |
| Phase 3: Outline Generator | âœ… ì™„ë£Œ | ëª©ì°¨ ìƒì„± API + UI          |
| Phase 4: Reference Linking | âœ… ì™„ë£Œ | ì°¸ì¡° ê´€ë¦¬ API + UI          |
| Phase 5: í†µí•© í…ŒìŠ¤íŠ¸       | âœ… ì™„ë£Œ | E2E í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™”          |

---

## ğŸ“– ê°œë°œ ì›ì¹™

1. **TDD (Test-Driven Development)** - í…ŒìŠ¤íŠ¸ ë¨¼ì €, êµ¬í˜„ ë‚˜ì¤‘
2. **Clean Architecture** - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì¸í”„ë¼ ë¶„ë¦¬
3. **Model Agnostic** - LLM ëª¨ë¸ êµì²´ ê°€ëŠ¥ ì„¤ê³„
4. **Zero Cost MVP** - ë¬´ë£Œ í‹°ì–´ ìš°ì„  í™œìš©

---

## ğŸ“š ë¬¸ì„œ

- [ì‚¬ìš©ì ê°€ì´ë“œ](./docs/user-guide.md)
- [Supabase ì„¤ì •](./docs/supabase-setup.md)
- [API ë¬¸ì„œ](./backend/docs/openapi.yaml)
- [ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸](./plan_report/2512141410_PRISM_Writer_ì²´í¬ë¦¬ìŠ¤íŠ¸.md)

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤

MIT License - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](./LICENSE) íŒŒì¼ ì°¸ì¡°

---

## ğŸ‘¥ íŒ€

- **ë””ë ‰í„°** - í”„ë¡œì íŠ¸ ë°©í–¥ ë° ì˜ì‚¬ê²°ì •
- **Senior Developer** - ì•„í‚¤í…ì²˜ ì„¤ê³„ ë° í•µì‹¬ êµ¬í˜„
- **Junior Developer** - ê¸°ëŠ¥ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
- **UX/UI Designer** - ì‚¬ìš©ì ê²½í—˜ ì„¤ê³„

---

_ìµœì¢… ì—…ë°ì´íŠ¸: 2025ë…„ 12ì›” 30ì¼_
